[{"categories":["è®¾è®¡æ¨¡å¼"],"content":"C++çš„å•ä¾‹æ¨¡å¼åˆ°ä»»åŠ¡é˜Ÿåˆ— ","date":"2023-02-21","objectID":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/:1:0","tags":["è®¾è®¡æ¨¡å¼","C/C++"],"title":"ä»C++çš„å•ä¾‹æ¨¡å¼åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æ„å»º","uri":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Ÿ å•ä¾‹æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œå®ƒéš¶å±äºåˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œä½œç”¨æ˜¯è®©ä½¿ç”¨è€…èƒ½ä¿è¯è¯¥ç±»åªä¼šå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼ŒåŒæ—¶å¯¹å¤–æä¾›ä¸€ä¸ªè®¿é—®è¯¥å®ä¾‹çš„å…¨å±€èŠ‚ç‚¹ã€‚ å•ä¾‹è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ï¼š ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ å®ƒçš„è¿ä½œæœºåˆ¶æ˜¯è¿™æ ·çš„ï¼šå¦‚æœåˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶è¿‡ä¸€ä¼šå†³å®šå†åˆ›å»ºä¸€ä¸ªå¯¹è±¡åˆ™ä½¿ç”¨è€…ä¼šè·å¾—ä¹‹å‰åˆ›å»ºçš„å¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œæ¢è¨€ä¹‹â€”â€”ä¹Ÿå°±æ˜¯ä¿è¯äº†ä¸€ä¸ªç±»åªä¼šå­˜åœ¨ä¸€ä¸ªå®ä¾‹ ä¸ºä»€ä¹ˆä¼šæœ‰äººæƒ³è¦åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Ÿæœ€å¸¸è§çš„åŸå› æ˜¯ä¸ºäº†æ§åˆ¶æŸäº›å…±äº«èµ„æºï¼ˆä¾‹å¦‚æ•°æ®åº“ã€ä»»åŠ¡é˜Ÿåˆ—æˆ–è€…æ–‡ä»¶ï¼‰çš„è®¿é—®æƒé™ã€‚ åŒæ—¶è¿˜è¦æ³¨æ„ï¼Œæ™®é€šæ„é€ å‡½æ•°ä¸€å®šæ— æ³•å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œå› ä¸ºæ„é€ å‡½æ•°çš„è®¾å®šä½¿å¾—å®ƒæ¯æ¬¡ä½¿ç”¨å¿…é¡»è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå› æ­¤éœ€è¦ä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œæš‚æ—¶æŒ‰ä¸‹ä¸è¡¨ï¼Œåæ–‡è¯¦ç»†ä»‹ç»ã€‚ ä¸ºè¯¥å®ä¾‹æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®èŠ‚ç‚¹ ä»å‰é¢çš„æè¿°çœ‹èµ·æ¥ï¼Œå•ä¾‹ä¸å…¨å±€å˜é‡ä¼¼ä¹èµ·åˆ°äº†ä¸€ä¸ªä½œç”¨ï¼Œä½†æ˜¯å…¨å±€å˜é‡çš„ä½¿ç”¨å…·ç”¨æå¼ºçš„å®‰å…¨éšæ‚£ï¼Œå› ä¸ºä»»ä½•ä»£ç éƒ½æœ‰å¯èƒ½è¦†ç›–æ‰é‚£ä¸ªå…¨å±€å˜é‡çš„å†…å®¹ï¼Œå®ƒåªæ˜¯ä¿è¯äº†åå­—ä¸å˜ï¼Œä½†å†…å®¹ä¸ä¸€å®šå§‹ç»ˆå¦‚ä¸€ï¼ŒåŒæ—¶å…¨å±€å˜é‡ä¹Ÿæ— æ³•ä¿è¯è¿™ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆè¯·ç‰¢è®°ï¼šä¸è¦æŠŠå®‰å…¨éšæ‚£æš´éœ²ç»™ä½¿ç”¨è€…ï¼Œè€Œåº”å°½å¯èƒ½ä»æºå¤´éåˆ¶ç›¸å…³é—®é¢˜ï¼‰ å•ä¾‹è™½ç„¶ä¹Ÿå…è®¸ç¨‹åºåœ¨ä»»ä½•åœ°æ–¹è®¿é—®ç‰¹å®šå¯¹è±¡ï¼Œä½†å®ƒå¯ä»¥ä¿æŠ¤è¯¥å®ä¾‹ä¸è¢«å…¶ä»–ä»£ç è¦†ç›–ã€‚ å¦å¤–ï¼šæ²¡æœ‰ä¸€ä¸ªä»£ç ç¼–å†™è€…å¸Œæœ›è§£å†³åŒä¸€ä¸ªé—®é¢˜çš„ä»£ç åˆ†æ•£åœ¨ç¨‹åºå„å¤„çš„ï¼ŒæŠŠå®ƒä»¬æ”¾åˆ°åŒä¸€ä¸ªç±»ä¸­æ˜¯ä¸€ä¸ªç‰¹åˆ«å¥½çš„æ–¹æ³•ï¼Œå°¤å…¶æ˜¯å¦‚æœè¿˜æœ‰å…¶ä»–ä»£ç å·²ç»ä¾èµ–äºè¿™ä¸ªç±»çš„æ—¶å€™ã€‚ ","date":"2023-02-21","objectID":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/:1:1","tags":["è®¾è®¡æ¨¡å¼","C/C++"],"title":"ä»C++çš„å•ä¾‹æ¨¡å¼åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æ„å»º","uri":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"ç¼–å†™å•ä¾‹æ¨¡å¼çš„è§£å†³æ–¹æ¡ˆ æ‰€æœ‰å•ä¾‹çš„å®ç°ä¸€å®šä¸ä¼šè·³è„±å‡ºä»¥ä¸‹ä¸¤ä¸ªç›¸åŒçš„æ­¥éª¤ï¼š å°†é»˜è®¤æ„é€ å‡½æ•°è®¾ä¸ºç§æœ‰ï¼Œ é˜²æ­¢å…¶ä»–å¯¹è±¡ä½¿ç”¨å•ä¾‹ç±»çš„newè¿ç®—ç¬¦ æ–°å»ºä¸€ä¸ªé™æ€æ„å»ºæ–¹æ³•ä½œä¸ºæ„é€ å‡½æ•°ã€‚ è¯¥å‡½æ•°ä¼šâ€œå·å·â€è°ƒç”¨ä¸Šè¿°è¢«è®¾ç½®ä¸ºç§æœ‰çš„æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ï¼Œå¹¶å°†å…¶ä¿å­˜åœ¨ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ä¸­ã€‚ æ­¤åæ‰€æœ‰å¯¹äºè¯¥å‡½æ•°çš„è°ƒç”¨éƒ½å°†è¿”å›è¿™ä¸€ç¼“å­˜å¯¹è±¡ã€‚ï¼ˆåªè¦èƒ½å¤Ÿè®¿é—®å•ä¾‹ç±»ï¼Œ é‚£å°±å¯ä»¥è°ƒç”¨å•ä¾‹ç±»çš„é™æ€æ–¹æ³•è¿›è€Œè·å¾—å•ä¾‹å®ä¾‹å¯¹è±¡ï¼‰ ","date":"2023-02-21","objectID":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/:1:2","tags":["è®¾è®¡æ¨¡å¼","C/C++"],"title":"ä»C++çš„å•ä¾‹æ¨¡å¼åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æ„å»º","uri":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"ç¼–å†™å•ä¾‹æ¨¡å¼çš„å…·ä½“æ­¥éª¤ åœ¨ç±»ä¸­æ·»åŠ ä¸€ä¸ªç§æœ‰é™æ€æˆå‘˜å˜é‡ç”¨äºä¿å­˜å•ä¾‹å®ä¾‹ å£°æ˜ä¸€ä¸ªå…¬æœ‰é™æ€æ„å»ºæ–¹æ³•ç”¨äºè·å–å•ä¾‹å®ä¾‹ åœ¨é™æ€æ–¹æ³•ä¸­å®ç°\"å»¶è¿Ÿåˆå§‹åŒ–\"ã€‚ è¯¥æ–¹æ³•ä¼šåœ¨é¦–æ¬¡è¢«è°ƒç”¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œ å¹¶å°†å…¶å­˜å‚¨åœ¨é™æ€æˆå‘˜å˜é‡ä¸­ï¼Œæ­¤åè¯¥æ–¹æ³•æ¯æ¬¡è¢«è°ƒç”¨æ—¶éƒ½è¿”å›è¯¥å®ä¾‹ å°†ç±»çš„æ„é€ å‡½æ•°è®¾ä¸ºç§æœ‰ã€‚ ç±»çš„é™æ€æ–¹æ³•ä»èƒ½è°ƒç”¨æ„é€ å‡½æ•°ï¼Œ ä½†æ˜¯å…¶ä»–å¯¹è±¡ä¸èƒ½è°ƒç”¨ æ£€æŸ¥å®¢æˆ·ç«¯ä»£ç ï¼Œå°†å¯¹å•ä¾‹çš„æ„é€ å‡½æ•°çš„è°ƒç”¨æ›¿æ¢ä¸ºå¯¹å…¶é™æ€æ„å»ºæ–¹æ³•çš„è°ƒç”¨ ","date":"2023-02-21","objectID":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/:1:3","tags":["è®¾è®¡æ¨¡å¼","C/C++"],"title":"ä»C++çš„å•ä¾‹æ¨¡å¼åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æ„å»º","uri":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"ä½¿ç”¨C++å®ç°å•ä¾‹æ¨¡å¼ ä¸Šæ–‡æœ‰æåˆ°ï¼Œå•ä¾‹æ¨¡å¼åº”ç¦æ­¢æ‰æ¶‰åŠä¸€ä¸ªç±»ä¼šäº§ç”Ÿæ–°å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œåœ¨C++ä¸­ï¼Œä¼šæ¶‰åŠåˆ°ä¸€ä¸ªç±»å¤šå¯¹è±¡æ“ä½œçš„å‡½æ•°æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š æ„é€ å‡½æ•°ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ æ‹·è´æ„é€ å‡½æ•°ï¼šæ ¹æ®å·²æœ‰å¯¹è±¡æ‹·è´å‡ºä¸€ä¸ªæ–°çš„å¯¹è±¡ æ‹·è´èµ‹å€¼æ“ä½œç¬¦é‡è½½å‡½æ•°ï¼šå¯¹äº=çš„é‡è½½ï¼Œç”¨äºä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„èµ‹å€¼æ“ä½œ ä¸ºäº†æŠŠä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å¤šä¸ªå¯¹è±¡çš„è·¯å°æ­»ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹å¤„ç†ï¼š æ„é€ å‡½æ•°ç§æœ‰åŒ–ï¼Œä½¿å¾—åªæœ‰ç±»å†…éƒ¨æ‰èƒ½è°ƒç”¨ï¼Œå¹¶é€šè¿‡ä¸€å®šæ–¹å¼ä¿è¯åªä¼šè°ƒç”¨ä¸€æ¬¡ è€ƒè™‘åˆ°ä½¿ç”¨è€…åœ¨ç±»å¤–éƒ¨ä¸èƒ½ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥åœ¨ç±»å†…éƒ¨åˆ›å»ºçš„è¿™ä¸ªå”¯ä¸€çš„å¯¹è±¡å¿…é¡»æ˜¯é™æ€çš„ï¼Œè¿™æ ·å°±å¯ä»¥ä»…é€šè¿‡ç±»åæ¥è¿›è¡Œè®¿é—®ï¼ŒåŒæ—¶ä¸ºäº†ä¸ç ´åå°è£…ï¼Œä¸€èˆ¬ä¼šé€‰æ‹©å°†è¿™ä¸ªé™æ€å¯¹è±¡çš„è®¿é—®æƒé™è®¾ç½®ä¸ºç§æœ‰ C++ä¸­ç±»çš„é™æ€æˆå‘˜å˜é‡åªæœ‰å…¶é™æ€æˆå‘˜å‡½æ•°æ‰å¯ä»¥è®¿é—®ï¼Œå› æ­¤ç»™è¿™ä¸ªå•ä¾‹ç±»æä¾›ä¸€ä¸ªå…¬æœ‰çš„é™æ€å‡½æ•°æ¥è®¿é—®å¾—åˆ°è¿™ä¸ªé™æ€çš„å•ä¾‹å¯¹è±¡ æ‹·è´æ„é€ å‡½æ•°ç§æœ‰åŒ–(private\\protect)æˆ–è€…ç¦ç”¨(ä½¿ç”¨=deleteåç¼€) æ‹·è´èµ‹å€¼æ“ä½œç¬¦é‡è½½å‡½æ•°ç§æœ‰åŒ–(private\\protect)æˆ–è€…ç¦ç”¨(ä½¿ç”¨=deleteåç¼€)ï¼Œä»å•ä¾‹çš„è¯­ä¹‰ä¸Šè®²è¿™ä¸ªå‡½æ•°å·²ç»æ¯«æ— æ„ä¹‰ï¼Œå› æ­¤ç±»ä¸­ä¸å†æä¾›è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä¹Ÿå°†å®ƒä¸€å¹¶å¤„ç†æ‰ å•ä¾‹æ¨¡å¼çš„ç±»çš„æ¨¡ç‰ˆâ€”â€”é›å½¢ æ ¹æ®ä¸Šè¿°ä¿¡æ¯ï¼Œæˆ‘ä»¬ç»™å‡ºå•ä¾‹æ¨¡å¼çš„ç¬¬ä¸€ç‰ˆä»£ç ï¼š å°†ç›¸å…³å‡½æ•°ç¦ç”¨çš„å†™æ³•ï¼š // å®šä¹‰ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„ç±» class Singleton { public: // = delete ä»£è¡¨å‡½æ•°ç¦ç”¨, ä¹Ÿå¯ä»¥å°†å…¶è®¿é—®æƒé™è®¾ç½®ä¸ºç§æœ‰ Singleton(const Singleton \u0026obj) = delete; Singleton \u0026operator=(const Singleton \u0026obj) = delete; static Singleton *getInstance(); private: Singleton() = default; static Singleton *m_obj; }; å°†ç›¸å…³å‡½æ•°è®¾ç½®ä¸ºç§æœ‰åŒ–çš„å†™æ³•ï¼š // å®šä¹‰ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„ç±» class Singleton { public: static Singleton *getInstance(); private: // = default ä»£è¡¨ä½¿ç”¨é»˜è®¤çš„å®ç° Singleton() = default; Singleton(const Singleton \u0026obj) = default; Singleton \u0026operator=(const Singleton \u0026obj) = default; static Singleton *m_obj; }; ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„C++å®ç°çš„åŸºæœ¬é›å½¢ï¼Œé¦–å…ˆï¼Œå®ƒæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ä¸ªæ˜¯å°†æ„é€ å‡½æ•°ç¦ç”¨ï¼Œä¸€ä¸ªæ˜¯å°†æ„é€ å‡½æ•°ç§æœ‰åŒ–ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹å¦‚æœé€‰ç”¨ç¦ç”¨æ„é€ å‡½æ•°çš„æ–¹æ¡ˆçš„è¯ä¸èƒ½æŠŠæ‰€æœ‰æ„é€ å‡½æ•°éƒ½ç¦ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä¸€ä¸ªå®ä¾‹ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼Œæ— è®ºå“ªç§æ–¹æ¡ˆç›®å‰æœ‰ä¸€ä¸ªå‡½æ•°éƒ½è¿˜æ²¡æœ‰å»å®ç°ï¼Œé‚£å°±æ˜¯getInstance()æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥è·å¾—è¿™ä¸ªç±»çš„å”¯ä¸€å®ä¾‹ï¼ŒåŒæ—¶å› ä¸ºè¦æ“ä½œé™æ€æˆå‘˜å˜é‡ï¼Œå› æ­¤è¿™ä¸ªå‡½æ•°ä¹Ÿæ˜¯é™æ€æˆå‘˜å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»åè¿›è¡Œè®¿é—®ã€‚ å…·ä½“åˆ°getInstance()çš„å®ç°ï¼Œè¿™é‡Œéœ€è¦å…ˆå¼•å…¥ä¸¤ä¸ªæ¦‚å¿µï¼Œæ‡’æ±‰æ¨¡å¼ä¸é¥¿æ±‰æ¨¡å¼: æ‡’æ±‰æ¨¡å¼ï¼šæ‡’æ±‰æ¯”è¾ƒæ‡’ï¼Œä¸è€ƒè™‘åœºæ™¯ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±ç«‹å³è¿›è¡Œå®ä¾‹åŒ–ï¼Œè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå”¯ä¸€çš„å¯ç”¨å¯¹è±¡ é¥¿æ±‰æ¨¡å¼ï¼šé¥¿æ±‰åˆ™æ¯”è¾ƒä¹–å·§ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼ˆä¸é¥¿ï¼‰ä¸å»åˆ›å»ºè¿™ä¸ªå”¯ä¸€çš„å®ä¾‹ï¼Œè€Œæ˜¯åœ¨éœ€è¦ä½¿ç”¨çš„æ—¶å€™ï¼ˆé¥¿äº†ï¼‰å†è¿›è¡Œå®ä¾‹åŒ– ä»è¿™ä¸ªä¸¤ä¸ªæ¦‚å¿µæˆ‘ä»¬å¾ˆå®¹æ˜“çœ‹å‡ºæ¥ï¼Œæ‡’æ±‰æ¨¡å¼æ¯”è¾ƒç®€å•ç›´æ¥ï¼Œåªè¦ç¨‹åºå¼€å§‹è¿è¡Œå°±ä¼šæœ‰è¿™ä¸ªå”¯ä¸€çš„ç±»ï¼Œè€Œé¥¿æ±‰åªæœ‰åªæœ‰ç”¨åˆ°çš„æ—¶å€™æ‰å»åˆ›å»ºï¼Œå› æ­¤æ‡’æ±‰æ¨¡å¼æ›´é€‚åˆå…¨å±€è¦ä½¿ç”¨çš„å¯¹è±¡ï¼ˆæ¯”å¦‚æœåŠ¡å™¨çš„æ•°æ®åº“è¿æ¥æ± ï¼‰ï¼Œè€Œé¥¿æ±‰æ›´é€‚åˆå±€éƒ¨ä½¿ç”¨çš„å¯¹è±¡ï¼ŒåŒæ—¶ä»…åœ¨éœ€è¦çš„æ—¶å€™æ‰å»åˆ›å»ºï¼Œä¼šæ›´èŠ‚çœç›¸åº”èµ„æºï¼Œè¿™ä¹Ÿæ˜¯é¥¿æ±‰æ¨¡å¼çš„ä¸€ä¸ªä¼˜ç‚¹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹æ‡’æ±‰æ¨¡å¼ä»¥åŠé¥¿æ±‰æ¨¡å¼åº”å¦‚ä½•ç¼–å†™ç›¸å…³ä»£ç ã€‚ å•ä¾‹æ¨¡å¼çš„ç±»çš„æ¨¡ç‰ˆâ€”â€”é¥¿æ±‰æ¨¡å¼ é¥¿æ±‰æ¨¡å¼å®ç°ä»£ç å¦‚ä¸‹ï¼š // æ‡’æ±‰æ¨¡å¼ // å®šä¹‰ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„ç±» class Singleton { public: // = delete ä»£è¡¨å‡½æ•°ç¦ç”¨, ä¹Ÿå¯ä»¥å°†å…¶è®¿é—®æƒé™è®¾ç½®ä¸ºç§æœ‰ Singleton(const Singleton \u0026obj) = delete; Singleton \u0026operator=(const Singleton \u0026obj) = delete; static Singleton *getInstance() { return m_obj; } private: Singleton() = default; static Singleton *m_obj; }; Singleton *Singleton::m_obj = new Singleton; å¯ä»¥çœ‹åˆ°ï¼Œé¥¿æ±‰æ¨¡å¼çš„ä»£ç éå¸¸ç®€å•ï¼Œåªéœ€è¦ç›´æ¥è¿”å›ç§æœ‰æˆå‘˜å˜é‡m_objå³å¯ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ç¬¬20è¡Œm_objæˆå‘˜å˜é‡å·²ç»è¢«å®šä¹‰å¥½äº†ï¼Œå› æ­¤æ¯æ¬¡è¿”å›çš„éƒ½æ˜¯è¿™ä¸ªå”¯ä¸€çš„æˆå‘˜å˜é‡ã€‚ è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼ŒC++ä¸­ç±»çš„é™æ€æˆå‘˜å˜é‡åœ¨ä½¿ç”¨ä¹‹å‰å¿…é¡»åœ¨ç±»çš„å¤–éƒ¨è¿›è¡Œåˆå§‹åŒ–æ‰å¯ä»¥ä½¿ç”¨ å•ä¾‹æ¨¡å¼çš„ç±»çš„æ¨¡ç‰ˆâ€”â€”æ‡’æ±‰æ¨¡å¼ æœ‰äº†ä¸Šé¢çš„ç»éªŒï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“ç»™å‡ºé¥¿æ±‰æ¨¡å¼çš„ç¬¬ä¸€ç‰ˆä»£ç ï¼š // é¥¿æ±‰æ¨¡å¼ // å®šä¹‰ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„ç±» class Singleton { public: // = delete ä»£è¡¨å‡½æ•°ç¦ç”¨, ä¹Ÿå¯ä»¥å°†å…¶è®¿é—®æƒé™è®¾ç½®ä¸ºç§æœ‰ Singleton(const Singleton \u0026obj) = delete; Singleton \u0026operator=(const Singleton \u0026obj) = delete; static Singleton *getInstance() { if (m_obj == nullptr) { m_obj = new Singleton; } return m_obj; } private: Singleton() = default; static Singleton *m_obj; }; Singleton *Singleton::m_obj = nullptr; ä¹Ÿå°±æ˜¯åœ¨getInstance()æ–¹æ³•ä¸­å¯¹ç§æœ‰æˆå‘˜å˜é‡è¿›è¡Œä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœæ˜¯ç©ºæŒ‡é’ˆé‚£ä¹ˆå°±è¯´æ˜è¿˜æ²¡æœ‰ä½¿ç”¨è¿‡å®ƒï¼Œéœ€è¦åˆ›å»ºï¼Œè€Œå¦‚æœä¸æ˜¯ç©ºæŒ‡é’ˆåˆ™è¯´æ˜å·²ç»ä½¿ç”¨è¿‡ï¼Œç›´æ¥è¿”å›ç§æœ‰æˆå‘˜å˜é‡å³å¯ã€‚ è¿™åœ¨å•çº¿ç¨‹ä¸‹è‡ªç„¶æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿›ä¸€æ­¥æ€è€ƒï¼Œè¿™ä¸ªå®ç°æ˜¯å¤šçº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹å¼å—ï¼Œå¾ˆæ˜¾ç„¶ä¸æ˜¯ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œåˆ™æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½ä¼šåˆ¤æ–­m_objæ˜¯ç©ºæŒ‡é’ˆï¼Œä¹Ÿå°±æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹å¯¹è±¡ï¼Œæ¢è¨€ä¹‹ï¼Œåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨è¿™ä¸ªå•ä¾‹å¯¹è±¡æ—¶ï¼Œæœ‰å¤šå°‘ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±ä¼šç”Ÿæˆå¤šå°‘ä¸ªå®ä¾‹å¯¹è±¡ã€‚è¿™æ˜æ˜¾ä¸é¢„æœŸä¸ç¬¦ã€‚ åŒæ—¶æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹ä¹‹å‰çš„æ‡’æ±‰æ¨¡å¼æœ‰æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¾ˆæ˜¾ç„¶æ²¡æœ‰ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨ä¹‹å‰å°±å·²ç»ç”Ÿæˆäº†å”¯ä¸€çš„å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±ä¸ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹è¦å¦‚ä½•ä¿®æ”¹é¥¿æ±‰æ¨¡å¼çš„ä»£ç ä½¿å®ƒæˆä¸ºçº¿ç¨‹å®‰å…¨çš„å®ç°ã€‚ åŒé‡æ£€æŸ¥é”å®š æƒ³è¦åƒé¥¿æ±‰æ¨¡å¼ä¸€æ ·æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå°±éœ€è¦ä¿è¯å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œè§£å†³å®ƒæœ€å¸¸ç”¨çš„åŠæ³•æ˜¯äº’æ–¥é”ï¼Œé€šè¿‡å°†åˆ›å»ºå•ä¾‹å¯¹è±¡çš„ä»£ç ä½¿ç”¨äº’æ–¥é”é”ä½å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä»£ç å¦‚ä¸‹ï¼š // é¥¿æ±‰æ¨¡å¼ // å®šä¹‰ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„ç±» class Singleton { public: // = delete ä»£è¡¨å‡½æ•°ç¦ç”¨, ä¹Ÿå¯ä»¥å°†å…¶è®¿é—®æƒé™è®¾ç½®ä¸ºç§æœ‰ Singleton(const Singleton \u0026obj) = delete; Singleton \u0026operator=(const Singleton \u0026obj) = delete; void test_print() { cout \u003c\u003c \"test success\" \u003c\u003c endl; } static Singleton *getInstance() { m_mutex.lock(); if (m_obj == nullptr) { m_obj = new Singleton; } m_mutex.unlock(); return m_obj; } private: Singleton() = default; static mutex m_mutex; static Singleton *m_obj; }; Singleton *Singleton::m_obj = nullptr; mutex Singleton::m_mutex; çœ‹ä¼¼è§£å†³äº†ï¼Œä½†ä¸Šé¢ä»£ç çš„15ï½19è¡Œè¢«äº’æ–¥é”é”ä½äº†ï¼Œè¿™å°±æ„å‘³ç€æ— è®ºå¤šå°‘ä¸ªçº¿ç¨‹ï¼Œåªè¦æƒ³è·å¾—è¿™ä¸ªå¯¹è±¡ï¼Œå°±åªèƒ½ä¸²è¡Œæ‰§è¡Œï¼Œè¿™æ‰§è¡Œæ•ˆç‡ç›¸æ¯”è¾ƒäºé¥¿æ±‰æ¨¡å¼å·®äº†åä¸‡å…«åƒé‡Œï¼Œå› æ­¤éœ€è¦å¯¹å®ƒè¿›è¡Œä¼˜åŒ–ï¼š // é¥¿æ±‰æ¨¡å¼ // å®šä¹‰ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„ç±» class Singleton { public: // = delete ä»£è¡¨å‡½æ•°ç¦ç”¨, ä¹Ÿå¯ä»¥å°†å…¶è®¿é—®æƒé™è®¾ç½®ä¸ºç§æœ‰ Singleton(const Singleton \u0026obj) = delete; Singleton \u0026operator=(const Singleton \u0026obj) = delete; void test_print() { cout \u003c\u003c \"test success\" \u003c\u003c endl; } static Singleton *getInstance() { if (m_obj == nullptr) { m_mutex.lock(); if (m_obj == nullptr) { m_obj = new Singleton; } m_mutex.unlock(); } return m_obj; } private: Singleton() = default; static mutex m_mut","date":"2023-02-21","objectID":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/:1:4","tags":["è®¾è®¡æ¨¡å¼","C/C++"],"title":"ä»C++çš„å•ä¾‹æ¨¡å¼åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æ„å»º","uri":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/"},{"categories":["è®¾è®¡æ¨¡å¼"],"content":"ä¸€ä¸ªåŸºäºå•ä¾‹æ¨¡å¼çš„ä»»åŠ¡é˜Ÿåˆ— æ¥ä¸‹æ¥å¯¹è¿™ä¸ªå•ä¾‹æ¨¡å¼è¿›è¡Œä¸€ä¸‹å®è·µï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—æ¥æ¥å—éœ€è¦å®Œæˆä»»åŠ¡å¹¶å®šæ—¶çš„å¤„ç†ï¼ŒåŒæ—¶è¿™ä¸ªä»»åŠ¡é˜Ÿåˆ—æ˜¯å…¨å±€å…±äº«çš„ï¼Œé‚£ä¹ˆä½¿ç”¨å•ä¾‹æ¨¡å¼æ¥è®¾è®¡è¯¥ä»»åŠ¡é˜Ÿåˆ—å°±åˆæƒ…åˆç†ã€‚ æˆ‘ä»¬å¯ä»¥é¢„å…ˆè®¾è®¡å¥½è¿™ä¸ªé˜Ÿåˆ—çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•å¦‚ä¸‹ï¼š å±æ€§ï¼š å­˜å‚¨ä»»åŠ¡çš„å®¹å™¨ï¼Œå› ä¸ºä»»åŠ¡æ˜¯å…ˆè¿›å…ˆå‡ºçš„(FIFO)ï¼Œå› æ­¤å¯ä»¥é€‰ç”¨STLä¸­çš„é˜Ÿåˆ—(queue) äº’æ–¥é”ï¼Œå¤šçº¿ç¨‹è®¿é—®è¯¥é˜Ÿåˆ—æ—¶åº”ä¿æŠ¤é˜Ÿåˆ—ä¸­çš„æ•°æ®çš„çº¿ç¨‹å®‰å…¨ æ–¹æ³•ï¼š é˜Ÿåˆ—åˆ¤ç©ºæ“ä½œ å‘é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªä»»åŠ¡ ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªä»»åŠ¡ ä»é˜Ÿåˆ—ä¸­åˆ é™¤ä¸€ä¸ªä»»åŠ¡ æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨é¥¿æ±‰æ¨¡å¼æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œä»£ç å¦‚ä¸‹ï¼š é¦–å…ˆæˆ‘ä»¬é¢„å…ˆå‡†å¤‡ä¸€ç»„ä»»åŠ¡ç±»ï¼Œå‡è®¾æœ‰ä¸¤ç§ä»»åŠ¡åˆ†åˆ«ä¸ºAå’ŒBï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š class Task { public: virtual void work() = 0; virtual std::string get_attribute() = 0; }; class Task_A : public Task { public: void work() override { std::cout \u003c\u003c \"å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡A\" \u003c\u003c std::endl; } std::string get_attribute() override { return \"Task A\"; } }; class Task_B : public Task { public: void work() override { std::cout \u003c\u003c \"å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡B\" \u003c\u003c std::endl; } std::string get_attribute() override { return \"Task B\"; } }; ä»»åŠ¡é˜Ÿåˆ—ä»£ç å®ç°å¦‚ä¸‹ï¼š class TaskQueue { public: TaskQueue(const TaskQueue \u0026t) = delete; TaskQueue \u0026operator=(const TaskQueue \u0026t) = delete; static TaskQueue *getTaskQueue() { static TaskQueue taskQueue; return \u0026taskQueue; } // é˜Ÿåˆ—åˆ¤ç©º bool empty() { std::lock_guard\u003cstd::mutex\u003e locker(m_mutex); return m_queue.empty(); } // æ·»åŠ ä»»åŠ¡ void push_task(Task *task) { std::lock_guard\u003cstd::mutex\u003e locker(m_mutex); m_queue.push(task); } // åˆ é™¤ä»»åŠ¡ bool pop_task() { std::lock_guard\u003cstd::mutex\u003e locker(m_mutex); if (m_queue.empty()) { return false; } m_queue.pop(); return true; } // è·å–é˜Ÿå¤´ä»»åŠ¡ Task *get_task() { std::lock_guard\u003cstd::mutex\u003e locker(m_mutex); if (m_queue.empty()) { return nullptr; } return m_queue.front(); } private: TaskQueue() = default; std::queue\u003cTask *\u003e m_queue; std::mutex m_mutex; }; æœ€ç»ˆæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š int main() { // ç”Ÿäº§è€…ï¼šåŸºæ•°æ¬¡ç”Ÿäº§Aä»»åŠ¡ï¼Œå¶æ•°æ¬¡ç”Ÿäº§Bä»»åŠ¡ std::thread t1([]() { auto q = TaskQueue::getTaskQueue(); for (int i = 1; i \u003c= 10; ++i) { if (i \u0026 1) { q-\u003epush_task(new Task_A); } else { q-\u003epush_task(new Task_B); } cout \u003c\u003c \"+++push task: \" \u003c\u003c i \u003c\u003c \", threadID: \" \u003c\u003c this_thread::get_id() \u003c\u003c endl; this_thread::sleep_for(chrono::milliseconds(500)); } }); // æ¶ˆè´¹è€… std::thread t2([]() { auto q = TaskQueue::getTaskQueue(); while (!q-\u003eempty()) { auto task = q-\u003eget_task(); if (task) { task-\u003ework(); q-\u003epop_task(); } this_thread::sleep_for(chrono::seconds(1)); } }); t1.join(); t2.join(); return 0; } ä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š push task: 1, threadID: 0x16f987000 å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡A push task: 2, threadID: 0x16f987000 å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡B push task: 3, threadID: 0x16f987000 push task: 4, threadID: 0x16f987000 å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡A push task: 5, threadID: 0x16f987000 push task: 6, threadID: 0x16f987000 å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡B push task: 7, threadID: 0x16f987000 push task: 8, threadID: 0x16f987000 å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡A push task: 9, threadID: 0x16f987000 push task: 10, threadID: 0x16f987000 å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡B å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡A å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡B å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡A å·²ç»æ‰§è¡Œå®Œæˆä»»åŠ¡B æ­£å¸¸æƒ…å†µçš„ä»»åŠ¡é˜Ÿåˆ—çš„workå‡½æ•°è‚¯å®šè¦å¤æ‚å¾ˆå¤šï¼Œè¿™é‡Œç”¨æ–‡æœ¬è¾“å‡ºæ›¿ä»£ ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„äº’æ–¥é”ä¿æŠ¤çš„æ˜¯é˜Ÿåˆ—çš„æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯ä»»åŠ¡ï¼‰ï¼Œä¹‹å‰å•ä¾‹ä¸­è¯´çš„çº¿ç¨‹å®‰å…¨æ˜¯ä¿éšœä¸€ä¸ªå•ä¾‹å¯¹è±¡åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œæ˜¯ä¸ä¸€æ ·çš„ ","date":"2023-02-21","objectID":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/:1:5","tags":["è®¾è®¡æ¨¡å¼","C/C++"],"title":"ä»C++çš„å•ä¾‹æ¨¡å¼åˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æ„å»º","uri":"/posts/%E4%BB%8Ec++%E7%9A%84%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%88%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E7%9A%84%E6%9E%84%E5%BB%BA/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"å‰ç¼€å’Œä¸å·®åˆ† å‰ç¼€å’Œä¸å·®åˆ†äº’ä¸ºé€†è¿ç®—ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ€æƒ³è€Œä¸æ˜¯ä¸€ç§æ¨¡ç‰ˆï¼Œå¯¹äºä¸€æ®µé—®é¢˜çš„æ±‚è§£æœ‰å¥‡æ•ˆ ","date":"2023-01-03","objectID":"/posts/%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:1:0","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"å‰ç¼€å’Œä¸å·®åˆ†ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"å‰ç¼€å’Œ ä¸€ç»´å‰ç¼€å’Œï¼šç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ¥æŸ¥è¯¢[l, r]ä¸­æ‰€æœ‰æ•°å­—çš„å’Œï¼Œä¸€å…±æŸ¥è¯¢mæ¬¡ #include \u003ciostream\u003e #include \u003ccstring\u003e #include \u003calgorithm\u003e #include \u003cvector\u003e using namespace std; int main() { int n, m; cin \u003e\u003e n \u003e\u003e m; vector\u003cint\u003e nums(n, 0); for (int i = 0; i \u003c n; ++i) cin \u003e\u003e nums[i]; nums.insert(nums.begin(), 0); vector\u003cint\u003e sums(n + 1, 0); for (int i = 1; i \u003c= n; ++i) { sums[i] = sums[i - 1] + nums[i]; } while (m--) { int l, r; cin \u003e\u003e l \u003e\u003e r; cout \u003c\u003c sums[r] - sums[l - 1] \u003c\u003c endl; } return 0; } äºŒç»´å‰ç¼€å’Œï¼šä¸ä¸€ç»´å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯è¡¨ç¤ºçš„å˜æˆä¸€å—åŒºåŸŸ[å·¦ä¸Š, å³ä¸‹]çš„çŸ©å½¢å†…éƒ¨æ‰€æœ‰å…ƒç´ çš„å’Œ #include \u003ciostream\u003e #include \u003ccstring\u003e #include \u003calgorithm\u003e #include \u003cvector\u003e using namespace std; // è·å–å‰ç¼€å’Œçš„æ¨¡ç‰ˆ int get_sum(vector\u003cvector\u003cint\u003e\u003e\u0026 sums, int x, int y) { int m = sums.size(), n = sums[0].size(); if (x \u003c 0 || y \u003c 0 || x \u003e= m || y \u003e= n) return 0; return sums[x][y]; } // æ±‚åŒºåŸŸå’Œçš„æ¨¡ç‰ˆ int get(vector\u003cvector\u003cint\u003e\u003e\u0026 sums, int x1, int y1, int x2, int y2) { return get_sum(sums, x2, y2) - get_sum(sums, x2, y1 - 1) - get_sum(sums, x1 - 1, y2) + get_sum(sums, x1 - 1, y1 - 1); } int main() { int m, n, q; cin \u003e\u003e m \u003e\u003e n \u003e\u003e q; vector\u003cvector\u003cint\u003e\u003e nums(m, vector\u003cint\u003e (n, 0)); for (int i = 0; i \u003c m; ++i) { for (int j = 0; j \u003c n; ++j) { cin \u003e\u003e nums[i][j]; } } // æ„é€ å‰ç¼€å’Œçš„æ¨¡ç‰ˆ vector\u003cvector\u003cint\u003e\u003e sums(m, vector\u003cint\u003e(n, 0)); for (int i = 0; i \u003c m; ++i) { for (int j = 0; j \u003c n; ++j) { sums[i][j] = get_sum(sums, i - 1, j) + get_sum(sums, i, j - 1) - get_sum(sums, i - 1, j - 1) + nums[i][j]; } } while (q--) { int x1, y1, x2, y2; cin \u003e\u003e x1 \u003e\u003e y1 \u003e\u003e x2 \u003e\u003e y2; // x1--, y1--, x2--, y2--; cout \u003c\u003c get(sums, x1, y1, x2, y2) \u003c\u003c endl; } return 0; } ","date":"2023-01-03","objectID":"/posts/%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:1:1","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"å‰ç¼€å’Œä¸å·®åˆ†ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"å·®åˆ† å¯¹äºæ•°ç»„$A_n = [a_1, a_2, a_3, â€¦ , a_n]$ï¼Œæ„é€ æ•°ç»„$B_n = [b_1, b_2, b_3, â€¦, b_n]$ä½¿å¾—$a_i = b_1 + b_2 + b_3 + â€¦ + b_i$ï¼Œæ¢è¨€ä¹‹ä½¿å¾—$A_n$æ•°ç»„æ˜¯$B_n$æ•°ç»„çš„å‰ç¼€å’Œ å¯¹äºä¸€ç»´æ•°ç»„çš„æ„é€ ï¼šï¼ˆæ„é€ æœ¬èº«æ²¡é‚£ä¹ˆé‡è¦ï¼Œç†è§£ä»–ä¿©çš„å…³ç³»å³å¯ï¼Œå› ä¸ºå¯¹äºæ‰€æœ‰çš„åŸå§‹æ•°ç»„éƒ½å¯ä»¥è®¤ä¸ºæœ¬æ¥æ˜¯0ï¼Œç„¶åé‡Œé¢çš„åˆå§‹å€¼æ˜¯å½±å“ï¼‰ $b_1 = a_1$ $b2 = a_2 - a_1$ $b_3 = a_3 - a_3$ â€¦ $b_4 = a_4 - a_3$ å¯¹äºè¿™æ ·çš„æ•°ç»„$B_n$å°±ç§°æ•°ç»„$B_n$æ˜¯æ•°ç»„$A_n$çš„å·®åˆ†ï¼Œå¤§å¤šæ•°æ—¶å€™æ˜¯é€šè¿‡æ•°ç»„$B_n$æ¥æ±‚æ•°ç»„$A_n$ï¼Œä¸€èˆ¬æ˜¯åˆ©ç”¨$B_n$å¯¹æ•°ç»„$A_n$çš„å½±å“æ¥è§£é¢˜ï¼Œæ¯”å¦‚å¯¹äºä¸€æ®µæ•°ç»„å¸Œæœ›åœ¨[l, r]è¿™ä¸ªåŒºé—´å†…æ‰€æœ‰çš„æ•°å­—åŠ ä¸ŠCï¼Œåˆ™å¯¹äºå·®åˆ†æ•°ç»„$B_n$å¯¹lè¿›è¡ŒåŠ Cæ“ä½œï¼Œè€Œå¯¹r + 1æ‰§è¡Œ-Cå†å¯¹å·®åˆ†æ•°ç»„æ±‚å‰ç¼€å’Œï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯å…¨éƒ¨åŠ ä¸Šäº†Cï¼Œä½¿ç”¨è¿™ä¸ªç®—æ³•å¯ä»¥å¯¹å¤šé‡å½±å“ä¸€èµ·æ±‚è§£ã€‚ #include \u003ciostream\u003e #include \u003ccstring\u003e #include \u003calgorithm\u003e #include \u003cvector\u003e using namespace std; int main() { int n, m; // nä¸ªæ•°å­—ï¼Œmè¡Œæ“ä½œ cin \u003e\u003e n \u003e\u003e m; vector\u003cint\u003e nums(n + 1, 0); vector\u003cint\u003e diff(n + 1, 0); for (int i = 1; i \u003c= n; ++i) { cin \u003e\u003e nums[i]; diff[i] += nums[i]; diff[i + 1] -= nums[i]; } // mè¡Œæ“ä½œï¼Œå¯¹[l, r]åŒºé—´å†…çš„æ‰€æœ‰æ•°å­—è¿›è¡ŒåŠ Cçš„æ“ä½œ while (m--) { int l, r, c; cin \u003e\u003e l \u003e\u003e r \u003e\u003e c; diff[l] += c; diff[r + 1] -= c; } for (int i = 1; i \u003c= n; ++i) { diff[i] += diff[i - 1]; cout \u003c\u003c diff[i] \u003c\u003c ' '; } cout \u003c\u003c endl; return 0; } å¯¹äºäºŒç»´æ•°ç»„æ¥è¯´ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ˜¯ç»™ä¸€ä¸ªå­çŸ©é˜µç»™ä¸Šä¸€ä¸ªå€¼ï¼ˆä¸€ä¸ªå½±å“ï¼‰ #include \u003ciostream\u003e #include \u003ccstring\u003e #include \u003calgorithm\u003e #include \u003cvector\u003e using namespace std; void insert(vector\u003cvector\u003cint\u003e\u003e\u0026 sums, int x1, int y1, int x2, int y2, int c) { sums[x1][y1] += c; sums[x1][y2 + 1] -= c; sums[x2 + 1][y1] -= c; sums[x2 + 1][y2 + 1] += c; } int main() { int m, n, q; cin \u003e\u003e m \u003e\u003e n \u003e\u003e q; vector\u003cvector\u003cint\u003e\u003e nums(m, vector\u003cint\u003e (n, 0)); vector\u003cvector\u003cint\u003e\u003e sums(m + 2, vector\u003cint\u003e (n + 2, 0)); for (int i = 0; i \u003c m; ++i) { for (int j = 0; j \u003c n; ++j) { cin \u003e\u003e nums[i][j]; insert(sums, i + 1, j + 1, i + 1, j + 1, nums[i][j]); } } while (q--) { int x1, y1, x2, y2, c; cin \u003e\u003e x1 \u003e\u003e y1 \u003e\u003e x2 \u003e\u003e y2 \u003e\u003e c; insert(sums, x1, y1, x2, y2, c); } for (int i = 1; i \u003c= m; ++i) { for (int j = 1; j \u003c= n; ++j) { sums[i][j] += sums[i][j - 1] + sums[i - 1][j] - sums[i - 1][j - 1]; cout \u003c\u003c sums[i][j] \u003c\u003c ' '; } cout \u003c\u003c endl; } return 0; } ","date":"2023-01-03","objectID":"/posts/%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:1:2","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"å‰ç¼€å’Œä¸å·®åˆ†ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["C/C++"],"content":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼ C++èµ·æºäºCè¯­è¨€ï¼Œå› æ­¤å…·æœ‰è®¸å¤šä¸Cç›¸åŒçš„ç‰¹æ€§ï¼Œæ¯”å¦‚æœ€é‡è¦çš„C++ä¸Céƒ½æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯æ¬¡åœ¨å£°æ˜ä¸€ä¸ªå˜é‡çš„æ—¶å€™éœ€è¦æ˜ç¡®è¯¥å˜é‡çš„ç±»å‹ï¼Œæ¯”å¦‚ï¼šint a = 1024;ï¼ŒCè¯­è¨€ç”±äºè¯­æ³•ç›¸å¯¹ç®€å•ï¼Œè¿™æ ·çš„å£°æ˜å¯¹äºç¨‹åºå‘˜å¹¶ä¸ä¼šé€ æˆå¤ªå¤§çš„è´Ÿæ‹…ï¼Œä½†éšç€C++çš„å‘å±•ï¼Œå°¤å…¶æ˜¯éšç€æ ‡å‡†åº“ä¸­å¯¹äºæ¨¡ç‰ˆä½¿ç”¨çš„æ¨å¹¿ï¼Œæ¯æ¬¡éƒ½è¦æ±‚å¯¹ç±»å‹å°±è¡Œæ˜ç¡®çš„æŒ‡å®šä¼šå¯¹ç¨‹åºå‘˜é€ æˆæå¤§çš„è´Ÿæ‹…ï¼Œæ¯”å¦‚å¯¹äºä¸€ä¸ªmapçš„è¿­ä»£å™¨ï¼Œå¦‚æœä¸ä½¿ç”¨ç±»å‹æ¨å¯¼ï¼Œåˆ™å¯èƒ½çš„å½¢å¼æ˜¯è¿™æ ·çš„ std::map\u003cint, std::string\u003e m = {{1, \"a\"}, {2, \"b\"}}; std::map\u003cint, std::string\u003e::const_iterator it = m.begin(); // çœ‹èµ·æ¥å°±å¥½ç´¯ï¼Œè€Œä¸”å¹¶ä¸ç›´è§‚ è€Œå¦‚æœä½¿ç”¨ç±»å‹æ¨å¯¼ï¼Œåˆ™ä¸Šè¿°ä»£ç å½¢å¼å¯ä»¥å˜ä¸ºï¼š std::map\u003cint, std::string\u003e m = {{1, \"a\"}, {2, \"b\"}}; auto it = m.begin(); å¯ä»¥çœ‹å‡ºæ¥ï¼Œå¯¹äºç°ä»£C++ä¸­çš„ä¸€äº›ç±»ï¼Œä½¿ç”¨ç¡®å®šçš„ç±»å‹å£°æ˜å³éº»çƒ¦è¿˜ä¸æ¸…æ™°ï¼Œåè€Œä½¿ç”¨autoå…³é”®å­—å£°æ˜å˜é‡ä¼šæ›´æ¸…æ™°ä¹Ÿæ›´ç®€å•ï¼Œæ¯”å¦‚å¯¹äºä¸Šè¿°çš„è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ä»–å°±æ˜¯mçš„å¼€å§‹çš„è¿­ä»£å™¨ï¼Œä½†å¦‚æœè¿›è¡Œç±»å‹å£°æ˜ï¼Œåè€Œä¸€å¼€å§‹å¹¶ä¸çŸ¥é“å®ƒè¦è¡¨è¿°çš„æ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¦é˜…è¯»å¥½é•¿å¥½é•¿çš„ä»£ç æ‰çŸ¥é“ï¼šå™¢ï¼Œè¿™æ˜¯ä¸ªè¿­ä»£å™¨ã€‚ è€Œäº‹å®ä¸Šï¼Œç±»å‹æ¨å¯¼å…¶å®å¹¶ä¸â€œç°ä»£â€ï¼ŒC++ ä¹‹çˆ¶ Bjarne Stroustrupï¼ˆBÂ·S ) æ—©åœ¨ C++ è¯ç”Ÿä¹‹åˆå°±è®¾è®¡å¹¶å®ç°äº†å®ƒï¼Œä½†å› ä¸ºä¸æ—©æœŸ C è¯­è¨€çš„è¯­ä¹‰æœ‰å†²çªï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æœ‰æ­£å¼ä½œä¸ºC++çš„è¯­è¨€ç‰¹æ€§ï¼Œè€ŒçŸ¥é“C99æ¶ˆé™¤äº†å…¼å®¹æ€§é—®é¢˜ï¼ŒC++11æ‰æ­£å¼å¼•å…¥ç±»å‹æ¨å¯¼ã€‚è€Œéšç€é€æ¸è¿›å…¥ç°ä»£C++çš„æ—¶ä»£ä¹‹åï¼Œç±»å‹æ¨å¯¼çš„åº”ç”¨æ„ˆåŠ å¹¿æ³›ï¼Œä»ç®€å•çš„autoåˆ°C++çš„æ¨¡ç‰ˆç¼–ç¨‹ï¼Œå†åˆ°C++14å¼•å…¥çš„decltypeï¼Œå› æ­¤å¯¹äºç±»å‹æ¨å¯¼è¿›è¡Œè¯¦ç»†çš„å­¦ä¹ æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚ ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:0:0","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["C/C++"],"content":"ç†è§£æ¨¡ç‰ˆçš„ç±»å‹æ¨å¯¼ autoå…³é”®å­—çš„å‡ºç°èµ·æºäºæ¨¡ç‰ˆï¼Œå¯ä»¥è¯´ï¼Œæ¨¡ç‰ˆæ˜¯autoçš„åŸºç¡€ï¼Œé¦–å…ˆæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹æ¨¡ç‰ˆçš„åŸºæœ¬å½¢å¼ï¼š // æ¨¡ç‰ˆå‡½æ•°çš„å£°æ˜ template\u003ctypename T\u003e void f(ParamType param); // æ¨¡ç‰ˆå‡½æ•°çš„è°ƒç”¨ f(expr); // é€šè¿‡æŸç§è¡¨è¾¾å¼è°ƒç”¨f åœ¨ç¼–è¯‘æœŸå†…ï¼Œç¼–è¯‘å™¨ä¼šé€šè¿‡exprè¿›è¡Œæ¨å¯¼ä¸¤ä¸ªç±»å‹ï¼šä¸€ä¸ªæ˜¯Tçš„ç±»å‹ï¼Œä¸€ä¸ªæ˜¯ParamTypeçš„ç±»å‹ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸¤ä¸ªç±»å‹å¤§å¤šæ•°çš„æ—¶å€™å¹¶ä¸ä¸€æ ·ï¼ˆå› ä¸ºå¤§å¤šæ•°æ—¶å€™ParamTypeä¸­ä¼šæœ‰å¯¹äºTçš„ä¸€äº›é™å®šï¼Œæ¯”å¦‚constæ¯”å¦‚\u0026ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºä¸‹é¢è¿™ä¸ªä¾‹å­Tå’ŒParamTypeå°±ä¸ç›¸åŒï¼š template\u003ctypename T\u003e void f(const T\u0026 param); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œparamçš„ç±»å‹å°±æ˜¯const T\u0026ï¼Œåœ¨è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚ä½¿ç”¨int x = 0; f(x);æ¥å¯¹è¿™ä¸ªä¾‹å­è¿›è¡Œè°ƒç”¨ï¼Œé‚£ä¹ˆTå°±ä¼šè¢«æ¨å¯¼ä¸ºintè€ŒParamTypeåˆ™è¢«æ¨å¯¼ä¸ºconst int\u0026ï¼Œåœ¨è¿›è¡Œç±»å‹æ¨å¯¼çš„æ—¶å€™ï¼Œæ¨¡ç‰ˆä¼šæ ¹æ®f(expr)ä¸­çš„exprçš„æƒ…å†µä»¥åŠ**ParamTypeçš„å½¢å¼**åˆ†åˆ«æ¨å¯¼å‡ºTçš„ç±»å‹ä»¥åŠParamTypeçš„ç±»å‹ã€‚ è¿™é‡Œï¼Œå°†å®ƒåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š ParamTypeå…·æœ‰æŒ‡é’ˆæˆ–è€…å¼•ç”¨å‹åˆ«ï¼Œä½†ä¸æ˜¯ä¸‡èƒ½å¼•ç”¨ ParamTypeæ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨ ParamTypeæ—¢éæŒ‡é’ˆä¹Ÿéå¼•ç”¨ ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:1:0","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["C/C++"],"content":"æƒ…å†µä¸€ï¼šParamTypeå…·æœ‰æŒ‡é’ˆæˆ–è€…å¼•ç”¨å‹åˆ«ï¼Œä½†ä¸æ˜¯ä¸‡èƒ½å¼•ç”¨ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¨¡ç‰ˆçš„ç±»å‹æ¨å¯¼è¿ä½œæœºåˆ¶å¦‚ä¸‹ï¼š è‹¥exprå…·æœ‰å¼•ç”¨å‹åˆ«ï¼Œå…ˆå°†å¼•ç”¨éƒ¨åˆ†å¿½ç•¥ ç„¶åå¯¹exprå’ŒParamTypeçš„å‹åˆ«æ‰§è¡Œæ¨¡å¼åŒ¹é…ï¼Œæœ€ç»ˆæ ¹æ®ç»“æœå†³å®šTçš„å‹åˆ« åœ¨å¦‚ä¸‹è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”¨ä¸‰ç§ä¸åŒçš„å˜é‡è¾“å…¥åˆ°fä¸­ï¼Œå¾—åˆ°çš„ç±»å‹æ¨å¯¼ç»“æœä¸ç›¸åŒï¼š template\u003ctypename T\u003e void f(T\u0026 param); // ç»™å‡ºä¸‰ä¸ªå˜é‡ int x = 0; // xæ˜¯intç±»å‹ const int x2 = x; // x2æ˜¯const intç±»å‹ const int\u0026 x3 = x; // x3æ˜¯const intçš„å¼•ç”¨ç±»å‹ // è¾“å…¥åˆ°fä¸­ f(x); // Tè¢«æ¨å¯¼ä¸ºintï¼ŒParamTypeè¢«æ¨å¯¼ä¸ºint\u0026 f(x2); // Tè¢«æ¨å¯¼ä¸ºconst intï¼ŒParamTypeè¢«æ¨å¯¼ä¸ºconst int\u0026 f(x3); // Tè¢«æ¨å¯¼ä¸ºconst intï¼ŒParamTypeè¢«æ¨å¯¼ä¸ºconst int\u0026 é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹å‡ æ¡ç»“è®ºï¼š åœ¨ParamTypeå…·æœ‰æŒ‡é’ˆæˆ–è€…å¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œç±»å‹æ¨å¯¼çš„è¿‡ç¨‹å…ˆæ‰¾åˆ°å¯¹åº”çš„exprçš„å½¢å¼ï¼Œæ ¹æ®exprçš„å½¢å¼æ¨å¯¼å‡ºæ¥Tçš„æ ¼å¼ï¼Œå†æ ¹æ®æ¨¡ç‰ˆä¸­expræ‰€å†™çš„æ ¼å¼æ¨å¯¼å‡ºparamTypeçš„ç±»å‹ åœ¨ä¸Šè¿°çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹è¦æ³¨æ„ï¼Œä¸€ä¸ªæ˜¯å‘T\u0026ç±»å‹çš„æ¨¡ç‰ˆä¼ å…¥constå¯¹è±¡æ˜¯å®‰å…¨çš„ï¼Œconstå±æ€§ä¼šè¢«æ¨å¯¼åˆ°Tçš„ç±»å‹ä¸­ï¼›å¦ä¸€ä¸ªå°±æ˜¯ä¼ å…¥çš„å˜é‡æœ¬èº«å°±æ˜¯å¼•ç”¨çš„è¯å®ƒçš„å¼•ç”¨æ€§ä¼šè¢«å¿½ç•¥ï¼ŒTä¸ä¼šè¢«æ¨å¯¼ä¸ºå¼•ç”¨ ä¸Šè¿°ä¾‹å­æ˜¯å·¦å€¼å¼•ç”¨å½¢å‚ï¼Œä½†å³å€¼å¼•ç”¨å½¢å‚çš„æ¨å¯¼ä¸å·¦å€¼å®Œå…¨ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ä¼ ç»™å³å€¼å¼•ç”¨å½¢å‚çš„å˜é‡åªèƒ½æ˜¯å³å€¼å¼•ç”¨å®å‚ï¼ˆä¸è¿‡è¿™ä¸ªé™åˆ¶å…¶å®è·Ÿç±»å‹æ¨å¯¼æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œè¿™æ˜¯å³å€¼çš„ç‰¹ç‚¹ï¼‰ ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:1:1","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["C/C++"],"content":"æƒ…å†µäºŒï¼šParamTypeæ˜¯ä¸ªä¸‡èƒ½å¼•ç”¨ å¯¹äºä¸‡èƒ½å¼•ç”¨ï¼Œæƒ…å†µè¡¨ç°å¦‚ä¸‹ï¼š å¦‚æœexpræ˜¯å·¦å€¼ï¼Œåˆ™Tå’ŒParamTypeä¼šè¢«æ¨å¯¼ä¸ºå·¦å€¼å¼•ç”¨ï¼Œè¦æ³¨æ„è¿™æ˜¯åœ¨æ¨¡ç‰ˆç±»å‹æ¨å¯¼ä¸­**Tä¼šè¢«æ¨å¯¼ä¸ºå¼•ç”¨çš„å”¯ä¸€æƒ…å†µ**ï¼Œå¦å¤–è™½ç„¶ParamTypeçš„å½¢å¼æ˜¯å³å€¼å¼•ç”¨è¯­æ³•ï¼Œä½†æœ€åæ¨å¯¼çš„ç»“æœæ˜¯å·¦å€¼å¼•ç”¨ï¼› å¦‚æœexpræ˜¯å³å€¼ï¼Œåˆ™åº”ç”¨æƒ…å†µä¸€çš„è§„åˆ™å³å¯ template\u003ctypename T\u003e void f(T\u0026\u0026 param); // paramç°åœ¨æ˜¯ä¸‡èƒ½å¼•ç”¨ // ç»™å‡ºä¸‰ä¸ªå˜é‡ int x = 0; // xæ˜¯intç±»å‹ const int x2 = x; // x2æ˜¯const intç±»å‹ const int\u0026 x3 = x; // x3æ˜¯const intçš„å¼•ç”¨ç±»å‹ // è¾“å…¥åˆ°fä¸­ f(x); // xæ˜¯å·¦å€¼ï¼ŒTè¢«æ¨å¯¼ä¸ºint\u0026ï¼ŒParamTypeè¢«æ¨å¯¼ä¸ºint\u0026 f(x2); // x2æ˜¯å·¦å€¼ï¼ŒTè¢«æ¨å¯¼ä¸ºconst int\u0026ï¼ŒParamTypeè¢«æ¨å¯¼ä¸ºconst int\u0026 f(x3); // x3æ˜¯å·¦å€¼å¼•ç”¨ï¼ŒTè¢«æ¨å¯¼ä¸ºconst int\u0026ï¼ŒParamTypeè¢«æ¨å¯¼ä¸ºconst int\u0026 f(0); // 0æ˜¯ä¸ªå³å€¼ï¼ŒTè¢«æ¨å¯¼ä¸ºint\u0026\u0026ï¼ŒParamTypeè¢«æ¨å¯¼ä¸ºint\u0026\u0026 ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:1:2","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["C/C++"],"content":"æƒ…å†µä¸‰ï¼šParamTypeæŒ‰å€¼ä¼ é€’ å½“ParamTypeæ—¢ä¸æ˜¯æŒ‡é’ˆä¹Ÿä¸æ˜¯å¼•ç”¨çš„æ—¶å€™ï¼Œé‚£å°±æ˜¯æŒ‰ç…§å€¼ä¼ é€’ï¼ŒæŒ‰ç…§å€¼ä¼ é€’å°±æ„å‘³ç€æ— è®ºæ€ä¹ˆä¼ é€’æœ€ç»ˆä¼ å…¥çš„éƒ½æ˜¯ä¸€ä¸ªå‰¯æœ¬ï¼Œæœ€ç»ˆæ¨å¯¼è§„åˆ™å¦‚ä¸‹ï¼š å¦‚æœexpræ˜¯å¼•ç”¨ï¼Œåˆ™å¿½ç•¥å¼•ç”¨çš„éƒ¨åˆ† å¿½ç•¥å¼•ç”¨æ€§è´¨ä¹‹åï¼Œå¦‚æœexpræ˜¯conståˆ™ä¹Ÿå¿½ç•¥constï¼Œå¦å¤–å¦‚æœæ˜¯volatileå¯¹è±¡ï¼Œä¹Ÿä¸€åŒå¿½ç•¥volatileæ€§è´¨ï¼›è¿™å°±å¯¼è‡´ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹ç‚¹ï¼šä¸èƒ½å› ä¸ºexpræ˜¯ä¸€ä¸ªå¸¸é‡åˆ™è®¤ä¸ºparamä¹Ÿæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå¸¸é‡çš„å‰¯æœ¬æ˜¯å¯ä»¥ä¿®æ”¹çš„ å¯¹äºæŒ‡é’ˆï¼Œè€ƒè™‘åˆ°å¸¸é‡æŒ‡é’ˆä¸æŒ‡é’ˆå¸¸é‡çš„ç‰¹æ®Šæ€§ï¼Œå¦‚æœparamçš„ç±»å‹æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œåˆ™ç±»å‹æ¨å¯¼çš„æ—¶å€™ä¼šå¿½ç•¥paramæŒ‡é’ˆæœ¬èº«çš„å¸¸é‡æ€§è€Œä¿ç•™æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å¸¸é‡æ€§ï¼Œæ¢å¥è¯è¯´å¸¸é‡æŒ‡é’ˆä¼šè¢«æ­£å¸¸æ¨å¯¼ï¼ŒæŒ‡é’ˆå¸¸é‡åˆ™ä¼šè¢«æ¨å¯¼ä¸ºæ™®é€šæŒ‡é’ˆ æ•°ç»„å®å‚ å¯¹äºæ•°ç»„å®å‚ï¼Œæƒ…å†µç•¥æœ‰ä¸åŒï¼Œåœ¨C/C++ä¸­æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’ä¼šæœ‰ç‚¹ç‰¹æ®Šï¼Œå› ä¸ºæ•°ç»„ä¼šé€€åŒ–ï¼ˆæ•°ç»„ä¼šå˜æˆé¦–å…ƒç´ çš„æŒ‡é’ˆç„¶åå†ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼‰ï¼Œçœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š const char str[] = \"hello, world\"; // strçš„ç±»å‹æ˜¯const char[13] const char* strToPtr = str; // æ•°ç»„é€€åŒ–æˆæŒ‡é’ˆ äº‹å®ä¸Šï¼Œstrå’ŒstrToPtrè¿™ä¸¤ä¸ªå˜é‡çš„ç±»å‹å¹¶ä¸ç»Ÿä¸€ï¼Œä½†èƒ½ç¼–è¯‘æˆåŠŸçš„åŸå› å°±åœ¨äºæ•°ç»„é€€åŒ–æˆäº†æŒ‡é’ˆç„¶åæŒ‡é’ˆå¯ä»¥ä¼ é€’ã€‚è€Œåœ¨æ¨¡ç‰ˆæ¨å¯¼ä¸­ï¼Œä¸èƒ½æŠŠä»–ä¿©å®Œå…¨çš„ç­‰ä»·ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§ï¼šå°½ç®¡å‡½æ•°æ— æ³•å£°æ˜çœŸæ­£çš„æ•°ç»„ç±»å‹çš„å½¢å‚ï¼Œä½†å´èƒ½å¤Ÿå°†å½¢å‚å£°æ˜ä¸ºæ•°ç»„çš„å¼•ç”¨ï¼Œæ¯”å¦‚å¯¹äºä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š template\u003ctypename T\u003e void f(T\u0026 param); f(str); // å‘fä¼ é€’ä¸€ä¸ªæ•°ç»„ è¿™ç§æƒ…å†µä¸‹ï¼ŒTä¼šè¢«æ¨å¯¼ä¸ºconst char [13]ï¼Œè€ŒParamTypeåˆ™ä¼šè¢«æ¨å¯¼ä¸ºconst char (\u0026)[13]ï¼Œè¿™é‡Œå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¨¡ç‰ˆç‰¹æ€§å»åšä¸€äº›é­”æ³•ğŸª„ï¼Œæ¯”å¦‚å¯ä»¥åœ¨ç¼–è¯‘å™¨ç¡®å®šæ•°ç»„çš„é•¿åº¦ã€‚ template\u003ctypename T, std::size_t N\u003e constexpr std::size_t arraySize(T (\u0026)[N]) noexcept { return N; } é€šè¿‡è¿™ç§è®¾è®¡ï¼Œå°±å¯ä»¥åœ¨ç¼–è¯‘å™¨ä½¿ç”¨ä¸€ä¸ªæ•°ç»„çš„å¤§å°æ¥è®¾å®šå¦ä¸€ä¸ªæ•°ç»„çš„å¤§å°ï¼Œæ¯”å¦‚ï¼š int nums[] = {1,2,3,4,5}; int nums2[arraySize(nums)]; // nums2çš„å¤§å°ä¼šä¸numsç›¸åŒ å‡½æ•°å®å‚ å¯¹äºå‡½æ•°è€Œè¨€ï¼Œå‡½æ•°ä¼ é€’ç»™ä¸€ä¸ªå½¢å‚ï¼Œå‡½æ•°ä¹Ÿä¼šé€€åŒ–ä¸ºæŒ‡é’ˆï¼Œå‡½æ•°çš„æ¨¡ç‰ˆæ¨å¯¼ç»“æœå¯ä»¥å‚è€ƒä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š template\u003ctypename T\u003e void f1(T param); template\u003ctypename T\u003e void f2(T\u0026 param); void func(int, int); // funcæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç±»å‹ä¸ºvoid (int, int) f1(func); // funcé€€åŒ–ä¸ºæŒ‡é’ˆï¼ŒTå’ŒParamTypeç±»å‹å‡æ¨å¯¼ä¸ºvoid (*)(int, int) f2(func); // funcæ˜¯å‡½æ•°å¼•ç”¨ï¼ŒTçš„ç±»å‹ä¸ºvoid (int, int)ï¼Œè€ŒParamTypeçš„ç±»å‹åˆ™ä¸ºvoid (\u0026)(int, int) æ¨¡ç‰ˆæ¨å¯¼æ€»ç»“ï¼š åœ¨æ¨¡ç‰ˆç±»å‹æ¨å¯¼çš„è¿‡ç¨‹ä¸­ï¼Œå…·æœ‰å¼•ç”¨ç±»å‹çš„å®å‚ä¼šè¢«å½“ä½œéå¼•ç”¨ç±»å‹æ¥å¤„ç†ï¼ˆå¼•ç”¨çš„å¿½ç•¥æ€§ï¼‰ å¯¹ä¸‡èƒ½å¼•ç”¨å½¢å‚è¿›è¡Œæ¨å¯¼æ—¶ï¼Œå·¦å€¼å®å‚ä¼šç‰¹æ®Šå¤„ç† å¯¹æŒ‰å€¼ä¼ é€’çš„å½¢å‚è¿›è¡Œæ¨å¯¼æ—¶ï¼Œconstå’Œvolatileä¼šè¢«å¿½ç•¥ åœ¨æ¨¡ç‰ˆç±»å‹æ¨å¯¼è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°æˆ–æ•°ç»„çš„å®å‚ä¼šé€€åŒ–ä¸ºå¯¹åº”çš„æŒ‡é’ˆï¼Œé™¤éå®ƒä»¬è¢«ç”¨æ¥åˆå§‹åŒ–å¼•ç”¨ ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:1:3","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["C/C++"],"content":"ç†è§£autoçš„ç±»å‹æ¨å¯¼ autoæ˜¯ç°ä»£C++ä¸­æœ€å¸¸ç”¨çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå†™ä¸Šå®ƒï¼Œå°±å¯ä»¥è®©ç¼–è¯‘å™¨å»è‡ªåŠ¨å¡«ä¸Šå®ƒåº”å…·æœ‰çš„ç±»å‹åç§°ï¼Œä¸¾å‡ ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼š auto i = 1024; // è‡ªåŠ¨æ¨å¯¼ä¸ºintç±»å‹ auto x = 1024.0; // è‡ªåŠ¨æ¨å¯¼ä¸ºdoubleç±»å‹ auto str = \"hello, world\"; // è‡ªåŠ¨æ¨å¯¼ä¸ºconst char*ç±»å‹ auto f = bind1st(std::less\u003cint\u003e(), 2); // è‡ªåŠ¨æ¨å¯¼å‡ºç±»å‹ï¼Œå…·ä½“æ˜¯å•¥ä¸çŸ¥é“ï¼Œåæ­£å¾ˆå¤æ‚ä¸å¥½å†™ å½“ç„¶autoä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒä¹Ÿä¼šæœ‰æ— æ³•æ¨å¯¼çš„æƒ…å†µå­˜åœ¨ï¼š std::map\u003cint, std::string\u003e mp = {{1,\"a\"}, {2,\"b\"}}; // è‡ªåŠ¨æ¨å¯¼ä¸å‡ºæ¥ // auto mp = {{1,\"a\"}, {2,\"b\"}}; // æŠ¥é”™ï¼šCannot deduce actual type for variable 'mp' with type 'auto' from initializer list auto iter = mp.begin(); // è‡ªåŠ¨æ¨å¯¼ä¸ºmapå†…éƒ¨çš„è¿­ä»£å™¨ç±»å‹ å½“å­˜åœ¨ä¸€å®šçš„æ­§ä¹‰çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼Œé¿å…è¿›è¡Œé”™è¯¯çš„æ¨å¯¼ï¼Œå°±æ¯”å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œå¦‚æœä¸åŠ ä»¥é™åˆ¶ï¼Œé‚£ä¹ˆæŠŠmpçš„ç±»å‹æ¨å¯¼ä¸ºstd::vector\u003cstd::pair\u003cint, std::string\u003e\u003e\u003eä¹Ÿæ˜¯æ¯«æ— é—®é¢˜çš„ï¼Œä½†å¦‚æœè¿™æ ·å­æ¨å¯¼äº†åé¢æ‰€æœ‰çš„ä»£ç éƒ½ä¼šä»¥ç¨‹åºå‘˜æ„æ–™ä¹‹å¤–çš„æ–¹å¼è¿›è¡Œï¼Œè¿™å°±ä¼šå¯¼è‡´å¾ˆå¤šè«åå…¶å¦™çš„é—®é¢˜ï¼Œå› æ­¤ï¼Œé€šè¿‡æœ‰æ­§ä¹‰ç›´æ¥ä¸æ¨å¯¼çš„æ–¹å¼ä¹Ÿè§„é¿äº†è®¸å¤šçš„é£é™©ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å°±å¯ä»¥éšæ„å»ç”¨autoäº†ï¼Œä½œä¸ºä¼˜ç§€çš„C++ç¨‹åºå‘˜ä»ç„¶éå¸¸æœ‰å¿…è¦äº†è§£ä¸€ä¸‹autoç±»å‹æ¨å¯¼çš„è§„åˆ™ã€‚ ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:2:0","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["C/C++"],"content":"autoç±»å‹æ¨å¯¼è§„åˆ™ ä»ä¸€å®šç¨‹åº¦ä¸Šæ¥è¯´ï¼Œç†è§£äº†æœ€å‰é¢æ‰€è®²çš„æ¨¡ç‰ˆç±»å‹æ¨å¯¼ä¸­çš„æƒ…å†µä¸€å°±åŸºæœ¬ä¸Šè¦†ç›–äº†autoç±»å‹æ¨å¯¼99%çš„è§„åˆ™äº†ï¼Œå› ä¸ºé™¤äº†ä¸€ç§æƒ…å†µä»¥å¤–ï¼Œautoçš„æ¨å¯¼è§„åˆ™ä¸æƒ…å†µä¸€çš„æ¨å¯¼è§„åˆ™å®Œå…¨ç›¸åŒã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹autoä¸æƒ…å†µä¸€ä¹‹é—´çš„è”ç³»ä»¥åŠå®ƒåœ¨ç‰¹æ®Šçš„æƒ…å†µä¸‹çš„æ¨å¯¼è§„åˆ™ã€‚ å¸¸è§„æƒ…å†µ åœ¨æ¨¡ç‰ˆæ¨å¯¼ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¾‹å­ï¼š template\u003ctypename T\u003e void f(ParamType param); // è°ƒç”¨ f(expr); // ä»¥æŸè¡¨è¾¾å¼æ¥è°ƒç”¨æ¨¡ç‰ˆå‡½æ•°ï¼Œè¿›è€Œæ¨æµ‹å‡ºTå’ŒParamTypeçš„ç±»å‹ è€Œå½“æŸå˜é‡ä½¿ç”¨autoè¿›è¡Œæ¨å¯¼æ—¶ï¼Œautoå°±ä¼šæ‰®æ¼”æ¨¡ç‰ˆä¸­Tçš„è¿™ä¸ªè§’è‰²ï¼Œè€Œå˜é‡çš„ç±»å‹ä¿®é¥°è¯ï¼ˆç‰¹å®šä¿®é¥°+autoï¼‰åˆ™æ‰®æ¼”äº†ParamTypeçš„è§’è‰²ï¼Œæ¯”å¦‚åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼š auto x = 1024; // xçš„ç±»å‹ä¿®é¥°è¯å°±æ˜¯autoæœ¬èº« const auto x2 = x; // xçš„ç±»å‹ä¿®é¥°è¯å°±æ˜¯const auto const auto\u0026 x3 = x2; // xçš„ç±»å‹ä¿®é¥°è¯å°±æ˜¯const auto\u0026 è€Œåœ¨æ¨å¯¼ä¸Šè¿°çš„å˜é‡ç±»å‹æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šåƒæ˜¯è¿›è¡Œäº†ä¸€æ¬¡æ¨¡ç‰ˆç¼–ç¨‹ä¸€æ ·ï¼Œä¼šå°†autoä¸ç±»å‹ä¿®é¥°è¯å¯¹åº”åˆ°æ¨¡ç‰ˆä¸­è¿›è¡Œç›¸åŒè§„åˆ™çš„ç±»å‹æ¨å¯¼ï¼Œå°±åƒå¦‚ä¸‹å±•ç¤ºçš„ä»£ç ä¸€æ ·ï¼š // æ³¨æ„ï¼šâš ï¸ä»…ä»…æ˜¯åƒè¿™é‡Œå±•ç¤ºçš„ä¸€æ ·ï¼Œå¹¶ä¸æ˜¯çœŸçš„è¿›è¡Œäº†è¿™ç§ç¼–è¯‘ template\u003ctypename T\u003e void func_for_x(T param); func_for_x(1024); // æ¨å¯¼å‡ºæ¥xçš„ç±»å‹æ˜¯int template\u003ctypename T\u003e void func_for_x2(const T param); func_for_x2(x); // æ¨å¯¼å‡ºæ¥x2çš„ç±»å‹æ˜¯const int template\u003ctypename T\u003e void func_for_x3(const T\u0026 param); func_for_x3(x2); // æ¨å¯¼å‡ºæ¥x3çš„ç±»å‹æ˜¯const int\u0026 æŒ‰ç…§æƒ…å†µä¸€ä¸­çš„æ¨å¯¼è§„åˆ™å¾ˆå®¹æ˜“å¾—å‡ºç»“æœï¼Œè¿™ä¸ªç»“æœè·Ÿæˆ‘ä»¬æ„Ÿæ€§é¢„æƒ³çš„ä¹Ÿæ˜¯ç›¸åŒçš„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å°†autoæ¨å¯¼ä¸æ¨¡ç‰ˆæ¨å¯¼ä¸­å¯¹ParamTypeåˆ†ç±»ç±»ä¼¼åœ°è¿›è¡Œä¸€ä¸‹åˆ†ç±»ï¼š ç±»å‹ä¿®é¥°è¯æ˜¯æŒ‡é’ˆæˆ–è€…å¼•ç”¨ï¼Œä½†ä¸æ˜¯ä¸‡èƒ½å¼•ç”¨ ç±»å‹ä¿®é¥°è¯æ˜¯ä¸‡èƒ½å¼•ç”¨ ç±»å‹ä¿®é¥°è¯å³éæŒ‡é’ˆä¹Ÿéå¼•ç”¨ ã€1ã€‘å’Œã€3ã€‘åœ¨ä¹‹å‰ä¾‹å­æœ‰è§è¿‡ï¼š auto x = 1024; // 3.éæŒ‡é’ˆä¹Ÿéå¼•ç”¨ const auto x2 = x; // 3.éæŒ‡é’ˆä¹Ÿéå¼•ç”¨ const auto\u0026 x3 = x2; // 1.æŒ‡é’ˆæˆ–å¼•ç”¨ä½†éä¸‡èƒ½å¼•ç”¨ å¯¹äºã€2ã€‘ï¼Œå…¶è¿ä½œæ–¹å¼ä¹Ÿç¬¦åˆæ„Ÿæ€§è®¤çŸ¥ï¼š auto\u0026\u0026 uref1 = x; // xæ˜¯intä¸”æ˜¯å·¦å€¼ï¼Œuref1ç±»å‹ä¸ºint\u0026 auto\u0026\u0026 uref2 = x2; // x2æ˜¯const intï¼Œä¹Ÿæ˜¯å·¦å€¼ï¼Œå› æ­¤uref2ç±»å‹ä¸ºconst int\u0026 auto\u0026\u0026 uref3 = x3; // x3æ˜¯const int\u0026ï¼Œä¹Ÿæ˜¯å·¦å€¼ï¼Œå› æ­¤uref3ç±»å‹ä¸ºconst int\u0026 auto\u0026\u0026 uref4 = 1024; // 1024æ˜¯intä¸”æ˜¯å³å€¼ï¼Œå› æ­¤uref4çš„ç±»å‹ä¸ºint\u0026\u0026 å¯¹äºCé£æ ¼çš„æ•°ç»„ä¼šé€€åŒ–æˆæŒ‡é’ˆè¿™ç§æƒ…å†µï¼Œautoä¹Ÿå®Œå…¨ç¬¦åˆæ¨¡ç‰ˆæ¨å¯¼ä¸­çš„è§„åˆ™ï¼š const char str[] = \"Hello, world\"; // strçš„ç±»å‹æ˜¯const char[13] auto arr1 = name; // arr1çš„ç±»å‹æ˜¯const char* auto\u0026 arr2 = name; // arr2çš„ç±»å‹æ˜¯const char (\u0026)[13] void somFunc(int, double); // someFuncæ˜¯å‡½æ•°ï¼Œç±»å‹ä¸ºvoid(int, double) auto func1 = someFunc; // func1çš„ç±»å‹ä¸ºvoid (*)(int, double) auto\u0026 func2 = someFunc; // func2çš„ç±»å‹ä¸ºvoid (\u0026)(int, double) ç‰¹æ®Šæƒ…å†µ æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹autoå¯èƒ½ä¼šå¯¼è‡´å‡ºé”™çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œåœ¨ä¼ ç»Ÿçš„C++98ä¸­ï¼Œå¦‚æœæˆ‘ä»¬è¦å£°æ˜ä¸€ä¸ªintå¹¶è¿›è¡Œåˆå§‹åŒ–ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹æ³•ï¼š int x = 27; // æœ€æ ‡å‡†çš„åšæ³•ï¼ŒCé£æ ¼ int x2(27); // C++é£æ ¼çš„åˆå§‹åŒ– è€Œåœ¨ç°ä»£C++ä¸­ï¼Œä»C++11å¼€å§‹ï¼Œä¸ºäº†æ”¯æŒç»Ÿä¸€åˆå§‹åŒ–ï¼ŒC++å¢åŠ äº†ä¸‹é¢çš„è¯­æ³•é€‰é¡¹ï¼š int x3 = {27}; int x4{27}; æˆªæ­¢ç›®å‰ä¸ºæ­¢ï¼Œå¯ä»¥ä½¿ç”¨å››ç§æ–¹å¼å¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œå¦‚æœæˆ‘ä»¬æŠŠintæ›¿æ¢æˆautoï¼Œé‚£ä¹ˆç»“æœå´ä¼šä¸æƒ³åƒä¸­ä¸ä¸€æ · auto x = 27; // æ²¡é—®é¢˜ï¼Œxæ˜¯intç±»å‹ auto x2(27); // æ²¡é—®é¢˜ï¼Œxæ˜¯intç±»å‹ auto x3 = {27}; // å‡ºç°é—®é¢˜ï¼Œx3ä¸æ˜¯intç±»å‹ auto x4{27}; // å‡ºç°é—®é¢˜ï¼Œx4ä¸æ˜¯intç±»å‹ ä½¿ç”¨C++98çš„è¯­æ³•è¿›è¡Œautoæ›¿æ¢ä¸ä¼šå­˜åœ¨é—®é¢˜ï¼Œä½†å¦‚æœä½¿ç”¨ç°ä»£C++ä¸­æ–°å¢çš„æ–¹æ³•åˆ™æ¨å¯¼å‡ºæ¥çš„ç»“æœä¼šæ˜¯std::initializer_list\u003cint\u003eï¼Œå¹¶ä¸”è¿™ä¸ªåˆ—è¡¨ä¸­æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå€¼ä¸º27 è¿™æ˜¯autoç±»å‹æ¨å¯¼ä¸­æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ç§æƒ…å†µï¼Œå½“ä½¿ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥æ—¶ï¼Œæ¨å¯¼æ‰€å±ç±»å‹å°±ä¼šå˜æˆstd::initializer_list åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±ä¼šå¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ ç±»å‹è¦æ±‚ç»Ÿä¸€ï¼Œå› ä¸ºstd::initializer_list\u003cT\u003eå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªæ¨¡ç‰ˆï¼Œå› æ­¤å¦‚æœå¤§æ‹¬å·ä¸­çš„å…ƒç´ ç±»å‹ä¸ä¸€è‡´ï¼Œå°±æ— æ³•æ¨å¯¼å‡ºTçš„ç±»å‹ã€‚ åŒæ—¶éœ€è¦å•ç‹¬è®°å¿†çš„ä¸€ç‚¹å°±æ˜¯ï¼Œåœ¨ç±»å‹æ¨å¯¼ä¸­std::initializer_listè¿™ä¸ªç±»å‹åªä¼šè¢«autoæ¨å¯¼ï¼Œæ¨¡ç‰ˆæ— æ³•æ¨å¯¼ï¼š auto x = {1, 2, 3}; // æ¨å¯¼æ²¡æœ‰é—®é¢˜ï¼Œxç±»å‹æ˜¯std::initializer_list\u003cint\u003e template\u003ctypename T\u003e void func(T param); f({1, 2, 3}); // æ¨å¯¼å¤±è´¥ï¼Œæ— æ³•æ¨å¯¼å‡ºTçš„ç±»å‹ void func2(std::vector\u003cint\u003e test); func2({1, 2, 3}); // å¯è¡Œï¼Œä¼šé€šè¿‡std::initializer_list\u003cint\u003eåˆå§‹åŒ–ä¸€ä¸ªstd::vector template\u003ctypename T\u003e void func3(std::initializer_list\u003cT\u003e list); func3({1, 2, 3}); // å¯è¡Œï¼Œç¡®å®šè¾“å…¥çš„ç±»å‹æ˜¯std::initializer_list\u003cT\u003eï¼Œæ¨å¯¼Tçš„ç±»å‹æ˜¯æ²¡æœ‰é—®é¢˜çš„ ä¸€äº›å…¨æ–°ç‰¹æ€§ C++11çš„ç‰¹æ€§å°±å…¨éƒ¨ç»“æŸäº†ï¼Œä½†åœ¨C++14ä¸­ï¼ŒC++å§”å‘˜ä¼šåˆèµ‹äºˆäº†autoæ›´å¤šçš„èƒ½åŠ› C++14å…è®¸ä½¿ç”¨autoæ¥è¯´æ˜å‡½æ•°è¿”å›å€¼éœ€è¦æ¨å¯¼ï¼š // å¯ä»¥æ¨å¯¼è¿”å›çš„ç±»å‹ï¼Œæ¨å¯¼ç»“æœä¸ºint auto func() { return 0; } // æ¨å¯¼è¿”å›çš„ç±»å‹å¤±è´¥ï¼Œè¿™é‡Œautoä¸ä¼šæ‰§è¡Œå®ƒçš„ç‰¹æ®Šæƒ…å†µï¼Œè€Œæ˜¯ä¸æ¨¡ç‰ˆæ¨å¯¼çš„ç»“æœç›¸åŒï¼Œéœ€è¦å•ç‹¬è®°å¿†æ¯”è¾ƒçƒ¦ auto func2() { return {1, 2, 3}; } C++14ä¸­lambdaè¡¨è¾¾å¼ä¹Ÿå…è®¸å½¢å‚ä¸­ç”¨åˆ°autoï¼ŒåŒæ—¶æ‰§è¡Œæ¨å¯¼çš„è§„åˆ™ä¹Ÿæ˜¯æŒ‰ç…§æ¨¡ç‰ˆæ¨å¯¼çš„è§„åˆ™æ¥çš„ï¼š std::vector\u003cint\u003e v; /* ... */ auto lambda1 = [\u0026v](const auto\u0026 value) {v.push_back(value);}; // æ²¡æœ‰é—®é¢˜ // lambda1çš„ç±»å‹æ¨å¯¼ä¸ºvoid (const int\u0026) const // valueçš„ç±»å‹æ¨å¯¼ä¸ºconst int\u0026 /* ... */ auto lambda2 = [\u0026v](const auto\u0026 value) {v = value;}; // é‡ç½®vçš„å‡½æ•° lambda2({1, 2, 3}); // ç±»å‹æ¨å¯¼å¤±è´¥ï¼Œæ— æ³•æ¨å¯¼å‡º{1, 2, 3}çš„ç±»å‹ ä»¥ä¸Šå°±æ˜¯autoçš„å…¨éƒ¨å†…å®¹å•¦ï¼Œç„¶åæœ€åæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹C++çš„æ–°ç‰¹æ€§ï¼šdecltype ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:2:1","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["C/C++"],"content":"ç†è§£delctypeçš„ç±»å‹æ¨å¯¼ delctypeæ˜¯ç”¨æ¥è·å¾—æŸä¸ªå˜é‡å…¶ç±»å‹çš„æ–¹æ³•ï¼Œä½†å¯¹äºè¿™ä¸ªæ–¹æ³•ä½¿ç”¨çš„æ—¶å€™è¦æ…é‡ï¼Œè™½ç„¶å¤§å¤šæ•°æ—¶å€™éƒ½å¯ä»¥è·å¾—æ­£ç¡®çš„ç»“æœï¼Œä½†æœ‰æ—¶å€™è·å¾—çš„ç»“æœä¹Ÿä¼šæœ‰ç‚¹è®©äººè¿·æƒ‘ä¸å¤ªæ­£ç¡®ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥å…·ä½“çœ‹çœ‹delctypeçš„è¿è¡Œè§„åˆ™ã€‚ ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:3:0","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["C/C++"],"content":"delctypeçš„ä¸€èˆ¬æƒ…å†µ å’Œæ¨¡ç‰ˆä»¥åŠautoçš„ç±»å‹æ¨å¯¼è¿‡ç¨‹ç›¸åï¼Œdelctypeä¸å¤ªå¯ä»¥å½’å±åˆ°ç±»å‹æ¨å¯¼ä¸­å»ï¼Œå®ƒæ›´åƒæ˜¯é¹¦é¹‰å­¦èˆŒï¼Œè¿”å›ç»™å®šçš„åå­—æˆ–è¡¨è¾¾å¼çš„ç¡®åˆ‡ç±»å‹ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨ã€ŠEffective Modern C++ã€‹ä¸­çš„ä¾‹å­ï¼š const int i = 0; // decltype(i) æ˜¯const int bool f(const Widget\u0026 w); // decltype(w) æ˜¯ const Widget\u0026 // decltype(f) æ˜¯ bool(const Widget\u0026) struct Point { int x, y; // decltype(Point::x) æ˜¯ int }; // decltype(Point::y) æ˜¯ int Widget w; // decltype(w) æ˜¯ Widget if (f(w)) â€¦ // decltype(f(w)) æ˜¯ bool template\u003ctypename T\u003e class vector { // std::vectorçš„ç®€åŒ–ç‰ˆ public: â€¦ T\u0026 operator[](std::size_t index); â€¦ }; vector\u003cint\u003e v; // decltype(v) æ˜¯ vector\u003cint\u003e â€¦ if (v[0] == 0) // decltype(v[0]) æ˜¯ int\u0026 â€¦ C++11ä¸­ï¼Œdecltypeçš„ä¸»è¦ç”¨é€”å¤§æ¦‚å°±åœ¨äºå£°æ˜é‚£äº›è¿”å›å€¼ç±»å‹ä¾èµ–äºå½¢å‚ç±»å‹çš„å‡½æ•°æ¨¡ç‰ˆ ä¸¾ä¸ªä¾‹å­ï¼ŒåŒæ—¶ä¹Ÿè¡¥å……ä¸€ä¸ªautoçš„ç”¨æ³•ï¼Œè¿™ä¸ªautoä¸ç±»å‹æ¨å¯¼å°±æ²¡æœ‰å…³ç³»ï¼Œåªæ˜¯ä¸ºäº†ç¬¦åˆè¿”å›å€¼ç±»å‹å°¾åºè¯­æ³•è§„åˆ™ï¼Œè¿™ç§è¯­æ³•ä½¿å¾—è¿”å›å€¼åœ¨å½¢å‚åˆ—è¡¨ä¹‹åï¼Œå®ƒçš„å¥½å¤„å°±åœ¨äºå¯ä»¥é…åˆdecltypeæ¥ä½¿ç”¨æ¨¡ç‰ˆæ¨å¯¼ä¸­å½¢å‚çš„ç±»å‹ç»“æœä½œä¸ºè¿”å›ç±»å‹ï¼š template\u003ctypename Container, typename Index\u003e auto process(Container\u0026 c, Index i) -\u003e decltype(c[i]) { /* å¤„ç†é€»è¾‘ */ return c[i]; } è€Œåˆ°C++14ä¸­åï¼Œè¿™ä¸ªè¯­æ³•å˜å¾—æ›´åŠ ç®€å•äº†ï¼Œå¯ä»¥å»æ‰å°¾åºçš„éƒ¨åˆ†ï¼š template\u003ctypename Container, typename Index\u003e // é”™è¯¯ç‰ˆæœ¬ï¼šå› ä¸ºæ¨¡ç‰ˆæ¨å¯¼ä¸­ï¼Œåˆå§‹åŒ–è¡¨è¾¾çš„å¼•ç”¨æ€§ä¼šè¢«å¿½ç•¥ï¼Œè¿”å›çš„ç±»å‹ä¼šæ˜¯intè€Œä¸æ˜¯æˆ‘ä»¬æœŸå¾…çš„int\u0026 auto process(Container\u0026 c, Index i) { /* å¤„ç†é€»è¾‘ */ return c[i]; } // C++14ä¸­ä½¿ç”¨decltype(auto)è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯autoæŒ‡å®šäº†æƒ³è¦å®æ–½è‡ªåŠ¨æ¨å¯¼è¿”å›ç±»å‹ï¼Œç„¶ådecltypeè¡¨æ˜ä½¿ç”¨çš„è§„åˆ™æ˜¯decltypeçš„æ¨å¯¼è§„åˆ™ // ä¿®è®¢ç‰ˆæœ¬â¬‡ï¸ template\u003ctypename Container, typename Index\u003e decltype(auto) process(Container\u0026 c, Index i) { /* å¤„ç†é€»è¾‘ */ return c[i]; // è¿”å›ç±»å‹æ˜¯int\u0026 } // decltype(auto)è¿™ç§æ–¹å¼ä¹Ÿå¯ä»¥åœ¨æ™®é€šè¯­å¥ä¸­ä½¿ç”¨ int t = 1; const int\u0026 t2 = t; auto t3 = t2; // t3æ˜¯autoç±»å‹æ¨å¯¼ï¼Œæ˜¯intç±»å‹ decltype(auto) t4 = t2; // t4æ˜¯decltypeç±»å‹æ¨å¯¼ï¼Œæ˜¯const int\u0026ç±»å‹ ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:3:1","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["C/C++"],"content":"decltypeçš„ç‰¹æ®Šæƒ…å†µ ä¸»è¦è€ƒè™‘ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œé¦–å…ˆå†å›å¿†ä¸€ä¸‹decltypeçš„å·¥ä½œæ–¹å¼ï¼Œåœ¨decltypeåé¢çš„æ‹¬å·ä¸­å¡«å…¥å˜é‡åç§°ï¼Œç„¶åä¼šæ ¹æ®è¿™ä¸ªå˜é‡çš„å®šä¹‰è¿”å›ä¸€ä¸ªç±»å‹ï¼Œä½†è¿™ä¸ªå˜é‡çš„åç§°å…¶å®æ˜¯æœ‰ä¸€å®šå¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜çš„ã€‚ ä¸»è¦æ˜¯å› ä¸ºï¼Œdecltype(x)ä¸­çš„xæ˜¯ä¸€ä¸ªå˜é‡åç§°ï¼Œè€Œxå’Œ(x)åœ¨æˆ‘ä»¬çš„æ„Ÿæ€§è®¤çŸ¥ä¸­åº”è¯¥æ˜¯ç›¸åŒï¼ŒåŒæ—¶åœ¨C++ä¸­(x)ä¹Ÿè¢«å®šä¹‰ä¸ºä¸€ä¸ªå·¦å€¼ï¼Œå› æ­¤ä¹Ÿå°±æ”¯æŒdecltype((x))è¿™ç§å†™æ³•ï¼Œè¿™å°±ä¼šå¯¼è‡´å‡ºé”™ï¼Œå› ä¸ºxå’Œ(x)å…¶å®æ˜¯ä¸åŒçš„ï¼š int x = 1024; decltype(x); // è¿”å›ç»“æœæ˜¯intï¼Œç¬¦åˆé¢„æœŸ decltype((x)); // æ¨å¯¼çš„æ˜¯(x)çš„ç±»å‹ï¼Œæœ€ç»ˆæ¨å¯¼ç»“æœæ˜¯int\u0026ï¼Œä¸ç¬¦åˆé¢„æœŸï¼Œä¸€å®šè¦è§„é¿è¿™ä¸ªé—®é¢˜ åŒ…æ‹¬åœ¨ä½¿ç”¨decltype(auto)æ—¶ï¼Œä¹Ÿä¸€å®šè¦æ³¨æ„è¿™ä¸ªé—®é¢˜ decltype(auto) f1() { int x = 1024; /* ... */ return x; } decltype(auto) f2() { int x = 1024; /* ... */ return (x); // !!!éå¸¸å±é™©âš ï¸ï¼Œæœ€ç»ˆè¿”å›çš„æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡çš„å¼•ç”¨ï¼Œå½“å»ä½¿ç”¨çš„æ—¶å€™ä¼šé€ æˆUB } ","date":"2022-12-14","objectID":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/:3:2","tags":["C++è¯­æ³•"],"title":"ç°ä»£C++ä¸­çš„ç±»å‹æ¨å¯¼","uri":"/posts/%E7%8E%B0%E4%BB%A3c++%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E5%AF%BC/"},{"categories":["Linux"],"content":"Linuxä¸­çš„ä¿¡å·é‡ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:0:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"ä¿¡å·é‡çš„æ¦‚å¿µ ä¿¡å·é‡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºåè°ƒå¤šä¸ªè¿›ç¨‹ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºçˆ¶å­è¿›ç¨‹ï¼‰æˆ–å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«æ•°æ®å¯¹è±¡çš„è¯»/å†™ã€‚å®ƒä¸ä»¥ä¼ é€æ•°æ®ä¸ºç›®çš„ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸¤ç§ä½œç”¨ï¼š ç”¨æ¥ä¿æŠ¤å…±äº«èµ„æºï¼ˆå…±äº«å†…å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€socketè¿æ¥æ± ã€æ•°æ®åº“è¿æ¥æ± ç­‰ï¼‰ï¼Œä¿è¯å…±äº«èµ„æºåœ¨ä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹ç‹¬äº«ï¼Œç±»ä¼¼äºäº’æ–¥é”çš„æ“ä½œ ç”¨æ¥å®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼Œå…¶ä¸­ç”Ÿäº§è€…æ¯ç”Ÿäº§ä¸€ä¸ªå¯¹è±¡å¯¹ä¿¡å·é‡+1ï¼Œæ¶ˆè´¹è€…æ¯æ¶ˆè´¹ä¸€ä¸ªå¯¹è±¡å¯¹ä¿¡å·é‡-1ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥è¢«æ¶ˆè´¹çš„å¯¹è±¡åˆ™é˜»å¡ç­‰å¾… ä¿¡å·é‡æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œåªå…è®¸è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰å¯¹å®ƒè¿›è¡Œç­‰å¾…ä¿¡å·å’Œå‘é€ä¿¡å·æ“ä½œã€‚æœ€ç®€å•çš„ä¿¡å·é‡æ˜¯å–å€¼0å’Œ1çš„äºŒå…ƒä¿¡å·é‡ï¼Œè¿™æ˜¯ä¿¡å·é‡æœ€å¸¸è§çš„å½¢å¼ã€‚ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:1:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"Linuxä¸­çš„ä¿¡å·é‡ä½¿ç”¨ åœ¨Linuxä¸­ï¼Œä¿¡å·é‡æœ‰ç€ä¸¤ç§å®ç°ï¼šã€Œä¼ ç»Ÿçš„Systm Vä¿¡å·é‡ã€å’Œã€ŒPOSIXä¿¡å·é‡ã€ å¯¹äºè¿™ä¸¤ç§ä¿¡å·é‡åœ¨ç³»ç»Ÿæ‰€æä¾›çš„å‡½æ•°ä¸­å¾ˆå®¹æ˜“è¿›è¡ŒåŒºåˆ†ï¼š æ‰€æœ‰çš„Systm Vä¿¡å·é‡çš„å‡½æ•°åä¸­æ²¡æœ‰ä¸‹åˆ’çº¿ï¼Œä¾‹å¦‚semget()è€Œä¸æ˜¯sem_get() ç›¸å¯¹åº”çš„ï¼Œæ‰€æœ‰çš„POSIXä¿¡å·é‡å‡½æ•°éƒ½æœ‰ä¸‹åˆ’çº¿ å¦å¤–ï¼Œå¯¹äºPOSIXä¿¡å·é‡ï¼Œå¯ä»¥æœ‰å‘½åçš„ä¿¡å·é‡ï¼Œä¾‹å¦‚ä¿¡å·é‡æœ‰ä¸€ä¸ªæ–‡ä»¶å…³è”ä»–ä»¬ æ¯”å¦‚åœ¨ä¸‹é¢å¯¹ç…§è¡¨ä¸­çš„POSIXæœ€åä¸‰ä¸ªå‡½æ•°å°±æ˜¯ç”¨æ¥å…³é—­ã€æ‰“å¼€ã€åˆ é™¤è¿™æ ·ä¸€ä¸ªå‘½åçš„ä¿¡å·é‡ï¼Œè€Œsem_destroy()å’Œsem_init()ä»…ä»…ä¾›éå‘½åä¿¡å·é‡ä½¿ç”¨ Systm V POSIX semctl() sem_getvalue() semget() sem_post() semop() sem_timedwait() sem_trywait() sem_wait() sem_destroy() sem_init() sem_close() sem_open() sem_unlink() å¼•ç”¨ä¸€ä¸‹ç½‘ä¸Šå¯¹äºè¿™ä¸¤è€…ä½¿ç”¨æ—¶çš„ç»“è®ºï¼š POSIXä¿¡å·é‡æ¥æºäºPOSIXæŠ€æœ¯è§„èŒƒçš„å®æ—¶æ‰©å±•æ–¹æ¡ˆ(POSIX Realtime Extension)ï¼Œå¸¸ç”¨äºçº¿ç¨‹ï¼ˆä½†å…¶æœ‰åä¿¡å·é‡ä¹Ÿå¯ç”¨äºè¿›ç¨‹ï¼‰ï¼›system vä¿¡å·é‡ï¼Œå¸¸ç”¨äºè¿›ç¨‹çš„åŒæ­¥ã€‚ è¿™ä¸¤è€…éå¸¸ç›¸è¿‘ï¼Œä½†å®ƒä»¬ä½¿ç”¨çš„å‡½æ•°è°ƒç”¨å„ä¸ç›¸åŒã€‚å‰ä¸€ç§çš„å¤´æ–‡ä»¶ä¸ºsemaphore.hï¼Œå‡½æ•°è°ƒç”¨ä¸ºsem_init()ï¼Œsem_wait()ï¼Œsem_post()ï¼Œsem_destory()ç­‰ç­‰ã€‚åä¸€ç§å¤´æ–‡ä»¶ä¸ºsys/sem.hï¼Œå‡½æ•°è°ƒç”¨ä¸ºsemctl()ï¼Œsemget()ï¼Œsemop()ç­‰å‡½æ•° ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:2:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"System Vä¿¡å·é‡çš„ä½¿ç”¨ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:3:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"å¤´æ–‡ä»¶ #include \u003csys/types.h\u003e #include \u003csys/ipc.h\u003e #include \u003csys/sem.h\u003e ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:3:1","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"semgetå‡½æ•° ä½œç”¨ï¼šå¾—åˆ°ä¸€ä¸ªä¿¡å·é‡é›†æ ‡è¯†ç¬¦æˆ–åˆ›å»ºä¸€ä¸ªä¿¡å·é‡é›†å¯¹è±¡å¹¶è¿”å›ä¿¡å·é‡é›†æ ‡è¯†ç¬¦ å‡½æ•°åŸå‹ï¼š int semget(key_t key, int nsems, int semflg); å‚æ•°ï¼š keyæ˜¯ä¿¡å·é‡çš„é”®å€¼ï¼Œï¼ˆç±»å‹å®šä¹‰ï¼štypedef unsigned int key_tï¼‰ï¼Œæ˜¯ä¿¡å·é‡åœ¨ç³»ç»Ÿä¸­çš„ç¼–å·ï¼Œä¸åŒä¿¡å·é‡çš„ç¼–å·ä¸èƒ½ç›¸åŒï¼Œè¿™ä¸€ç‚¹ç”±ç¨‹åºå‘˜ä¿è¯ã€‚keyç”¨åå…­è¿›åˆ¶è¡¨ç¤ºæ¯”è¾ƒå¥½ï¼Œä¾¿äºæŸ¥çœ‹å’Œç®¡ç† nsemsæ˜¯åˆ›å»ºä¿¡å·é‡é›†ä¸­ä¿¡å·é‡çš„ä¸ªæ•°ï¼Œè¯¥å‚æ•°åªåœ¨åˆ›å»ºä¿¡å·é‡é›†æ—¶æœ‰æ•ˆï¼Œå…¶ä»–æƒ…å†µå¡«1å³å¯ semflagæ˜¯ä¸€ç»„æ ‡å¿—ï¼Œå¦‚æœå¸Œæœ›ä¿¡å·é‡ä¸å­˜åœ¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„ä¿¡å·é‡ï¼Œå¯ä»¥å’Œå€¼IPC_CREATåšæŒ‰ä½æˆ–æ“ä½œã€‚å¦‚æœæ²¡æœ‰è®¾ç½®IPC_CREATæ ‡å¿—å¹¶ä¸”ä¿¡å·é‡ä¸å­˜åœ¨ï¼Œå°±ä¼šè¿”é”™è¯¯ï¼ˆerrnoçš„å€¼ä¸º2ï¼ŒNo such file or directoryï¼‰ã€‚ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›ä¿¡å·é‡é›†çš„æ ‡è¯† å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errno é”™è¯¯ä»£ç ï¼š EACCESSï¼šæ²¡æœ‰æƒé™ EEXISTï¼šä¿¡å·é‡é›†å·²ç»å­˜åœ¨ï¼Œæ— æ³•åˆ›å»º EIDRMï¼šä¿¡å·é‡é›†å·²ç»åˆ é™¤ ENOENTï¼šä¿¡å·é‡é›†ä¸å­˜åœ¨ï¼ŒåŒæ—¶semflgæ²¡æœ‰è®¾ç½®IPC_CREATæ ‡å¿— ENOMEMï¼šæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜åˆ›å»ºæ–°çš„ä¿¡å·é‡é›† ENOSPCï¼šè¶…å‡ºé™åˆ¶ å¦‚æœsemgetåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ä¿¡å·é‡é›†å¯¹è±¡ï¼Œåˆ™semid_dsç»“æ„æˆå‘˜å˜é‡çš„å€¼è®¾ç½®å¦‚ä¸‹ï¼š sem_otimeè®¾ç½®ä¸º0 sem_ctimeè®¾ç½®ä¸ºå½“å‰æ—¶é—´ msg_qbytesè®¾æˆç³»ç»Ÿçš„é™åˆ¶å€¼ sem_nsemsè®¾ç½®ä¸ºnsemså‚æ•°çš„æ•°å€¼ semflgçš„è¯»å†™æƒé™å†™å…¥sem_perm.modeä¸­ sem_permç»“æ„çš„uidå’Œcuidæˆå‘˜è¢«è®¾ç½®æˆå½“å‰è¿›ç¨‹çš„æœ‰æ•ˆç”¨æˆ·IDï¼Œgidå’Œcuidæˆå‘˜è¢«è®¾ç½®æˆå½“å‰è¿›ç¨‹çš„æœ‰æ•ˆç»„ID ç¤ºä¾‹ä»£ç ï¼š // è·å–é”®å€¼ä¸º0x5000çš„ä¿¡å·é‡ï¼Œå¦‚æœè¯¥ä¿¡å·é‡ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºå®ƒï¼Œä»£ç å¦‚ä¸‹ï¼š int semid=semget(0x5000,1,0640|IPC_CREAT); // è·å–é”®å€¼ä¸º0x5000çš„ä¿¡å·é‡ï¼Œå¦‚æœè¯¥ä¿¡å·é‡ä¸å­˜åœ¨ï¼Œè¿”å›-1ï¼Œerrnoçš„å€¼è¢«è®¾ç½®ä¸º2ï¼Œä»£ç å¦‚ä¸‹ï¼š int semid= semget(0x5000,1,0640); ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:3:2","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"semctlå‡½æ•° ä½œç”¨ï¼šæ§åˆ¶ä¿¡å·é‡ï¼ˆå¸¸ç”¨äºè®¾ç½®ä¿¡å·é‡çš„åˆå§‹å€¼å’Œé”€æ¯ä¿¡å·é‡ï¼‰ å‡½æ•°åŸå‹ï¼š int semctl(int semid, int sem_num, int command, ...); å‚æ•°ï¼š semidæ˜¯ç”±semgetå‡½æ•°è¿”å›çš„ä¿¡å·é‡æ ‡è¯† sem_numæ˜¯ä¿¡å·é‡é›†æ•°ç»„ä¸Šçš„ä¸‹æ ‡ï¼Œè¡¨ç¤ºæŸä¸€ä¸ªä¿¡å·é‡ï¼Œå¡«0 å‚æ•°cmdæ˜¯å¯¹ä¿¡å·é‡æ“ä½œçš„å‘½ä»¤ç§ç±»ï¼Œå¸¸ç”¨çš„æœ‰ä»¥ä¸‹ä¸¤ä¸ªï¼š IPC_RMIDï¼šé”€æ¯ä¿¡å·é‡ï¼Œä¸éœ€è¦ç¬¬å››ä¸ªå‚æ•°ï¼› SETVALï¼šåˆå§‹åŒ–ä¿¡å·é‡çš„å€¼ï¼ˆä¿¡å·é‡æˆåŠŸåˆ›å»ºåï¼Œéœ€è¦è®¾ç½®åˆå§‹å€¼ï¼‰ï¼Œè¿™ä¸ªå€¼ç”±ç¬¬å››ä¸ªå‚æ•°å†³å®šã€‚ç¬¬å››å‚æ•°æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„è”åˆä½“ï¼Œè”åˆä½“ç»“æ„å¦‚ä¸‹ï¼š // ç”¨äºä¿¡å·ç¯æ“ä½œçš„å…±åŒä½“ã€‚ union semun { int val; struct semid_ds *buf; unsigned short *arry; }; è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›å€¼æ ¹æ®æ“ä½œçš„ä¸åŒè¿”å›ä¸åŒçš„å€¼ï¼Œå…·ä½“æŸ¥çœ‹æ‰‹å†Œ å¤±è´¥ï¼šè¿”å›-1 ç¤ºä¾‹ä»£ç ï¼š // é”€æ¯ä¿¡å·é‡ semctl(semid,0,IPC_RMID); // åˆå§‹åŒ–ä¿¡å·é‡çš„å€¼ä¸º1ï¼Œä¿¡å·é‡å¯ç”¨ union semun sem_union; sem_union.val = 1; semctl(semid,0,SETVAL,sem_union); ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:3:3","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"semopå‡½æ•° ä½œç”¨ï¼šå¯¹ä¿¡å·é‡é›†æ ‡è¯†ç¬¦ä¸ºsemidä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªä¿¡å·é‡è¿›è¡ŒPæ“ä½œæˆ–Væ“ä½œ Væ“ä½œï¼šæŠŠä¿¡å·é‡çš„å€¼+1ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿç§°ä¹‹ä¸ºé‡Šæ”¾é” Pæ“ä½œï¼šç­‰å¾…ä¿¡å·é‡çš„å€¼å¤§äº1ï¼Œå¦‚æœç­‰å¾…æˆåŠŸï¼Œç«‹å³æŠŠä¿¡å·é‡çš„å€¼-1ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿç§°ä¹‹ä¸ºç­‰å¾…é” å‡½æ•°åŸå‹ï¼š int semop(int semid, struct sembuf *sops, unsigned nsops); å‚æ•°ï¼š semidï¼šç”±semgetå‡½æ•°è¿”å›çš„ä¿¡å·é‡æ ‡è¯† nsopsï¼šæ“ä½œä¿¡å·é‡çš„ä¸ªæ•°ï¼Œå³sopsç»“æ„å˜é‡çš„ä¸ªæ•°ï¼Œè®¾ç½®å®ƒçš„ä¸º1ï¼ˆåªå¯¹ä¸€ä¸ªä¿¡å·é‡çš„æ“ä½œï¼‰ sopsæ˜¯ä¸€ä¸ªæŒ‡å‘è¿›è¡Œæ“ä½œçš„ä¿¡å·é‡é›†ç»“æ„ä½“æ•°ç»„çš„é¦–åœ°å€çš„æŒ‡é’ˆï¼Œæ­¤ç»“æ„ç»“æ„å¦‚ä¸‹ï¼š struct sembuf { short sem_num; short sem_op; // ã€‚ short sem_flg; }; struct sembuf { unsigned short int sem_num; // ä¿¡å·é‡é›†çš„ä¸ªæ•°ï¼Œå•ä¸ªä¿¡å·é‡è®¾ç½®ä¸º0 short int sem_op; // å¤§äºé›¶åˆ™è¿›è¡ŒVæ“ä½œ+å¯¹åº”å€¼ï¼Œå°äºé›¶åˆ™è¿›è¡ŒPæ“ä½œ-å¯¹åº”å€¼ï¼Œå¦‚æœå‰©ä½™é‡ä¸å¤Ÿå‡åˆ™ä¼šé˜»å¡ç­‰å¾…ï¼› short int sem_flg; // æŠŠæ­¤æ ‡å¿—è®¾ç½®ä¸ºSEM_UNDOï¼Œæ“ä½œç³»ç»Ÿå°†è·Ÿè¸ªè¿™ä¸ªä¿¡å·é‡ã€‚ // å¦‚æœå½“å‰è¿›ç¨‹é€€å‡ºæ—¶æ²¡æœ‰é‡Šæ”¾ä¿¡å·é‡ï¼Œæ“ä½œç³»ç»Ÿå°†é‡Šæ”¾ä¿¡å·é‡ï¼Œé¿å…èµ„æºè¢«æ­»é”ã€‚ }; è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›ä¿¡å·é‡é›†çš„æ ‡è¯†ç¬¦ å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errno é”™è¯¯ä»£ç ï¼š E2BIGï¼šä¸€æ¬¡å¯¹ä¿¡å·é‡ä¸ªæ•°çš„æ“ä½œè¶…è¿‡äº†ç³»ç»Ÿé™åˆ¶ EACCESSï¼šæƒé™ä¸å¤Ÿ EAGAINï¼šä½¿ç”¨äº†IPC_NOWAITï¼Œä½†æ“ä½œä¸èƒ½ç»§ç»­è¿›è¡Œ EFAULTï¼šsopsæŒ‡å‘çš„åœ°å€æ— æ•ˆ EIDRMï¼šä¿¡å·é‡é›†å·²ç»åˆ é™¤ EINTRï¼šå½“ç¡çœ æ—¶æ¥æ”¶åˆ°å…¶ä»–ä¿¡å· EINVALï¼šä¿¡å·é‡é›†ä¸å­˜åœ¨,æˆ–è€…semidæ— æ•ˆ ENOMEMï¼šä½¿ç”¨äº†SEM_UNDOï¼Œä½†æ— è¶³å¤Ÿçš„å†…å­˜åˆ›å»ºæ‰€éœ€çš„æ•°æ®ç»“æ„ ERANGEï¼šä¿¡å·é‡å€¼è¶…å‡ºèŒƒå›´ ç¤ºä¾‹ä»£ç ï¼š // ç­‰å¾…ä¿¡å·é‡çš„å€¼å¤§äº0ï¼Œå¦‚æœç­‰å¾…æˆåŠŸï¼Œç«‹å³æŠŠä¿¡å·é‡çš„å€¼å‡1ï¼› struct sembuf sem_b; sem_b.sem_num = 0; sem_b.sem_op = -1; sem_b.sem_flg = SEM_UNDO; semop(sem_id, \u0026sem_b, 1); // å°†ä¿¡å·é‡çš„å€¼+1 struct sembuf sem_b; sem_b.sem_num = 0; sem_b.sem_op = 1; sem_b.sem_flg = SEM_UNDO; semop(sem_id, \u0026sem_b, 1); ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:3:4","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"å…¶ä»–æ“ä½œå‘½ä»¤ ç”¨ipcs -så¯ä»¥æŸ¥çœ‹ç³»ç»Ÿçš„ä¿¡å·é‡ï¼Œå†…å®¹æœ‰é”®å€¼ï¼ˆkeyï¼‰ï¼Œä¿¡å·é‡ç¼–å·ï¼ˆsemidï¼‰ï¼Œåˆ›å»ºè€…ï¼ˆownerï¼‰ï¼Œæƒé™ï¼ˆpermsï¼‰ï¼Œä¿¡å·é‡æ•°ï¼ˆnsemsï¼‰ âœ c ipcs -s --------- ä¿¡å·é‡æ•°ç»„ ----------- é”® semid æ‹¥æœ‰è€… æƒé™ nsems ç”¨ipcrm sem + ä¿¡å·é‡ç¼–å·ï¼Œå¯ä»¥æ‰‹å·¥åˆ é™¤ä¿¡å·é‡ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:3:5","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"POSIXä¿¡å·é‡çš„ä½¿ç”¨ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"å¤´æ–‡ä»¶ #include \u003csemaphore.h\u003e ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:1","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"ä¿¡å·é‡çš„ç±»å‹â€”â€”sem_t typedef int sem_t; ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:2","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"sem_initå‡½æ•° ä½œç”¨ï¼šåˆå§‹åŒ–ä¿¡å·é‡ å‡½æ•°åŸå‹ï¼š int sem_init(sem_t *sem, int pshared, unsigned int value); å‚æ•°ï¼š sem : ä¿¡å·é‡å˜é‡çš„åœ°å€ pshared : 0 ç”¨åœ¨çº¿ç¨‹é—´ ï¼Œé0ç”¨åœ¨è¿›ç¨‹é—´ value : ä¿¡å·é‡ä¸­åˆå§‹åŒ–çš„å€¼ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›0 å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errno é”™è¯¯ä»£ç ï¼š EINVALï¼šè®¾å®šçš„å€¼è¶…è¿‡SEM_VALUE_MAX ENOSYSï¼š psharedéé›¶ï¼Œä½†ç³»ç»Ÿä¸æ”¯æŒè¿›ç¨‹å…±äº« ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:3","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"sem_destroyå‡½æ•° ä½œç”¨ï¼šé‡Šæ”¾æŒ‡å‘çš„åœ°å€å¤„çš„æ— åä¿¡å·é‡èµ„æºï¼ˆåªèƒ½é‡Šæ”¾ç”±sem_initåˆå§‹åŒ–çš„ä¿¡å·é‡ï¼‰ å‡½æ•°åŸå‹ï¼š int sem_destroy(sem_t *sem); å‚æ•°ï¼š semï¼šsem_initå‡½æ•°ä¸­åˆå§‹åŒ–çš„ä¿¡å·é‡åœ°å€ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›0 å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errno é”™è¯¯ä»£ç ï¼š EINVALï¼š semä¸æ˜¯æœ‰æ•ˆçš„ä¿¡å·é‡ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:4","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"sem_waitå‡½æ•° ä½œç”¨ï¼šå¯¹ä¿¡å·é‡åŠ é”ï¼Œè°ƒç”¨ä¸€æ¬¡å¯¹ä¿¡å·é‡çš„å€¼-1ï¼Œå¦‚æœå€¼ä¸º0ï¼Œå°±é˜»å¡ï¼ˆä¹Ÿå°±æ˜¯Pæ“ä½œï¼‰ å‡½æ•°åŸå‹ï¼š int sem_wait(sem_t *sem); å‚æ•°ï¼š semï¼šsem_initå‡½æ•°ä¸­åˆå§‹åŒ–çš„ä¿¡å·é‡åœ°å€ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›0 å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errno é”™è¯¯ä»£ç  é”™è¯¯ç å¦‚ä¸‹ï¼š EINTRï¼š å‘¼å«è¢«ä¿¡å·å¤„ç†ç¨‹åºæ‰“æ–­ EINVAL ï¼šsemä¸æ˜¯æœ‰æ•ˆçš„ä¿¡å·é‡ ETIMEDOUTï¼šè¶…æ—¶ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:5","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"sem_trywaitå‡½æ•° ä½œç”¨ï¼šä¸sem_waitç›¸åŒï¼Œä½†ä¸é˜»å¡ç­‰å¾…ï¼Œå¦‚æœä¸èƒ½æ‰§è¡Œåˆ™ç›´æ¥è¿”å›é”™è¯¯ å‡½æ•°åŸå‹ï¼š int sem_trywait(sem_t *sem); å‚æ•°ï¼š semï¼šsem_initå‡½æ•°ä¸­åˆå§‹åŒ–çš„ä¿¡å·é‡åœ°å€ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›0 å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errno é”™è¯¯ä»£ç ä¸ºEAGAIN ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:6","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"sem_timedwaitå‡½æ•° ä½œç”¨ï¼šä¸sem_waitå‡½æ•°ç›¸åŒï¼Œä½†é˜»å¡æ—¶é—´æœ‰é™åˆ¶ï¼Œå¦‚æœè¶…è¿‡è®¾å®šé˜»å¡æ—¶é—´ä»ä¸èƒ½æ‰§è¡Œåˆ™è¿”å›é”™è¯¯ å‡½æ•°åŸå‹ï¼š int sem_timedwait(sem_t *sem, const struct timespec *abs_timeout); å‚æ•°ï¼š semï¼šsem_initå‡½æ•°ä¸­åˆå§‹åŒ–çš„ä¿¡å·é‡åœ°å€ abs_timeoutï¼štimespecç±»å‹çš„æŒ‡é’ˆï¼Œé‡Œé¢å¡«å……çš„æ•°æ®æ˜¯é™åˆ¶çš„é˜»å¡æ—¶é—´ï¼Œtimespecç»“æ„å¦‚ä¸‹ï¼š struct timespec { time_t tv_sec; /* Seconds */ long tv_nsec; /* Nanoseconds [0 .. 999999999] */ }; è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›0 å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errno é”™è¯¯ä»£ç ï¼Œå¦‚æœæ˜¯è¶…æ—¶åˆ™è®¾ç½®ä¸ºETIMEDOUT ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:7","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"sem_postå‡½æ•° ä½œç”¨ï¼šå¯¹ä¿¡å·é‡è§£é”ï¼Œè°ƒç”¨ä¸€æ¬¡å¯¹ä¿¡å·é‡çš„å€¼+1 å‡½æ•°åŸå‹ï¼š int sem_post(sem_t *sem); å‚æ•°ï¼š semï¼šsem_initå‡½æ•°ä¸­åˆå§‹åŒ–çš„ä¿¡å·é‡åœ°å€ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›0 å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errno é”™è¯¯ä»£ç  é”™è¯¯ç ï¼š EINVALï¼šsemä¸æ˜¯æœ‰æ•ˆçš„ä¿¡å·é‡ EOVERFLOWï¼šä¿¡å·é‡çš„æœ€å¤§å…è®¸å€¼å°†è¢«è¶…è¿‡ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:8","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"sem_getvalueå‡½æ•° ä½œç”¨ï¼šè·å–ä¿¡å·é‡å½“å‰çš„å€¼ï¼Œå¹¶å°†è¿™ä¸ªå€¼ä¿å­˜åˆ°å‚æ•°ä¸­çš„åœ°å€ä¸­ å‡½æ•°åŸå‹ï¼š int sem_getvalue(sem_t *sem, int *sval); ä½¿ç”¨éœ€é“¾æ¥pthreadåº“ å‚æ•°ï¼š semï¼šsem_initå‡½æ•°ä¸­åˆå§‹åŒ–çš„ä¿¡å·é‡åœ°å€ svalï¼šå­˜å‚¨ä¿¡å·å€¼çš„åœ°å€ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›0 å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errno é”™è¯¯ä»£ç EINVAL (semä¸æ˜¯æœ‰æ•ˆçš„ä¿¡å·é‡) ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:9","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"ç¤ºä¾‹ç¨‹åº ä½¿ç”¨å¤šçº¿ç¨‹å®Œæˆç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ #include \u003cstdio.h\u003e #include \u003cpthread.h\u003e #include \u003cstdlib.h\u003e #include \u003cunistd.h\u003e #include \u003csemaphore.h\u003e // åˆ›å»ºä¸€ä¸ªäº’æ–¥é‡ pthread_mutex_t mutex; // åˆ›å»ºä¸¤ä¸ªä¿¡å·é‡ sem_t psem; sem_t csem; struct Node{ int num; struct Node *next; }; // å¤´ç»“ç‚¹ struct Node * head = NULL; void * producer(void * arg) { // ä¸æ–­çš„åˆ›å»ºæ–°çš„èŠ‚ç‚¹ï¼Œæ·»åŠ åˆ°é“¾è¡¨ä¸­ while(1) { sem_wait(\u0026psem); pthread_mutex_lock(\u0026mutex); struct Node * newNode = (struct Node *)malloc(sizeof(struct Node)); newNode-\u003enext = head; head = newNode; newNode-\u003enum = rand() % 1000; printf(\"add node, num : %d, tid : %ld\\n\", newNode-\u003enum, pthread_self()); pthread_mutex_unlock(\u0026mutex); sem_post(\u0026csem); } return NULL; } void * customer(void * arg) { while(1) { sem_wait(\u0026csem); pthread_mutex_lock(\u0026mutex); // ä¿å­˜å¤´ç»“ç‚¹çš„æŒ‡é’ˆ struct Node * tmp = head; head = head-\u003enext; printf(\"del node, num : %d, tid : %ld\\n\", tmp-\u003enum, pthread_self()); free(tmp); pthread_mutex_unlock(\u0026mutex); sem_post(\u0026psem); } return NULL; } int main() { pthread_mutex_init(\u0026mutex, NULL); sem_init(\u0026psem, 0, 8); sem_init(\u0026csem, 0, 0); // åˆ›å»º5ä¸ªç”Ÿäº§è€…çº¿ç¨‹ï¼Œå’Œ5ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ pthread_t ptids[5], ctids[5]; for(int i = 0; i \u003c 5; i++) { pthread_create(\u0026ptids[i], NULL, producer, NULL); pthread_create(\u0026ctids[i], NULL, customer, NULL); } for(int i = 0; i \u003c 5; i++) { pthread_detach(ptids[i]); pthread_detach(ctids[i]); } while(1) { sleep(10); } pthread_mutex_destroy(\u0026mutex); pthread_exit(NULL); return 0; } ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/:4:10","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·é‡","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7%E9%87%8F/"},{"categories":["Linux"],"content":"Linuxä¸­çš„å…±äº«å†…å­˜ å…ˆç®€å•å†™å†™è¿™é‡Œï¼Œåé¢æœ‰æ—¶é—´æ…¢æ…¢æ·±æŒ– ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:0:0","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"å…±äº«å†…å­˜æ˜¯å•¥ è¿™é‡Œæ‘˜æŠ„ä¸€ä¸‹ç»´åŸºç™¾ç§‘ï¼š å…±äº«å†…å­˜ï¼ˆshared memoryï¼‰æŒ‡åœ¨å¤šå¤„ç†å™¨çš„è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œå¯ä»¥è¢«ä¸åŒä¸­å¤®å¤„ç†å™¨è®¿é—®çš„å¤§å®¹é‡å†…å­˜ã€‚ç”±äºå¤šä¸ªCPUéœ€è¦å¿«é€Ÿè®¿é—®å­˜å‚¨å™¨ï¼Œè¿™æ ·å°±è¦å¯¹å­˜å‚¨å™¨è¿›è¡Œç¼“å­˜ã€‚ç”±äºå…¶ä»–å¤„ç†å™¨å¯èƒ½ä¹Ÿè¦å­˜å–ï¼Œä»»ä¸€ç¼“å­˜æ•°æ®æ›´æ–°åï¼Œå…±äº«å†…å­˜å°±éœ€è¦ç«‹å³æ›´æ–°ï¼Œå¦åˆ™ä¸åŒå¤„ç†å™¨å¯èƒ½ç”¨åˆ°ä¸åŒçš„æ•°æ®ï¼ˆå‚è§ç¼“å­˜ä¸€è‡´å’Œå†…å­˜ä¸€è‡´ï¼‰ã€‚ ç®€å•æ¥è¯´ï¼Œå…±äº«å†…å­˜ï¼ˆShared Memoryï¼‰å°±æ˜¯å…è®¸å¤šä¸ªè¿›ç¨‹è®¿é—®åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œæ˜¯åœ¨å¤šä¸ªè¿›ç¨‹ä¹‹é—´å…±äº«å’Œä¼ é€’æ•°æ®æœ€é«˜æ•ˆçš„æ–¹å¼ã€‚ æ“ä½œç³»ç»Ÿå°†ä¸åŒè¿›ç¨‹ä¹‹é—´å…±äº«å†…å­˜å®‰æ’ä¸ºåŒä¸€æ®µç‰©ç†å†…å­˜ï¼Œè¿›ç¨‹å¯ä»¥å°†å…±äº«å†…å­˜è¿æ¥åˆ°å®ƒä»¬è‡ªå·±çš„åœ°å€ç©ºé—´ä¸­ï¼Œå¦‚æœæŸä¸ªè¿›ç¨‹ä¿®æ”¹äº†å…±äº«å†…å­˜ä¸­çš„æ•°æ®ï¼Œå…¶å®ƒçš„è¿›ç¨‹è¯»åˆ°çš„æ•°æ®ä¹Ÿå°†ä¼šæ”¹å˜ã€‚ æ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹ï¼šå…±äº«å†…å­˜å¹¶æœªæä¾›é”æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æŸä¸€ä¸ªè¿›ç¨‹å¯¹å…±äº«å†…å­˜çš„è¿›è¡Œè¯»å†™çš„æ—¶å€™ï¼Œä¸ä¼šé˜»æ­¢å…¶å®ƒçš„è¿›ç¨‹å¯¹å®ƒçš„è¯»å†™ï¼ˆå¦‚æœè¦å¯¹å…±äº«å†…å­˜çš„è¯»/å†™åŠ é”ï¼Œå¯ä»¥ä½¿ç”¨ä¿¡å·é‡ï¼‰ã€‚ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:1:0","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"ç›¸å…³å‡½æ•° ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:2:0","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"å¤´æ–‡ä»¶ åœ¨Linuxä¸­å¯¹äºå…±äº«å†…å­˜çš„æ“ä½œé¦–å…ˆè¦åŒ…å«å¤´æ–‡ä»¶ï¼š #include \u003csys/ipc.h\u003e #include \u003csys/shm.h\u003e ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:2:1","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"åˆ›å»ºæˆ–è€…è·å–å…±äº«å†…å­˜â€”â€”shmgetå‡½æ•° ä½œç”¨ï¼šåˆ›å»ºä¸€æ®µå…±äº«å†…å­˜æˆ–è€…è¯»å–å·²ç»å­˜åœ¨çš„å…±äº«å†…å­˜ å‡½æ•°åŸå‹ï¼š int shmget(key_t key, size_t size, int shmflg); å‚æ•°ï¼š keyï¼šå…±äº«å†…å­˜çš„é”®å€¼ï¼Œæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œtypedef unsigned int key_tï¼Œæ˜¯å…±äº«å†…å­˜åœ¨ç³»ç»Ÿä¸­çš„ç¼–å·ï¼Œä¸åŒå…±äº«å†…å­˜çš„ç¼–å·ä¸èƒ½ç›¸åŒï¼Œè¿™ä¸€ç‚¹ç”±ç¨‹åºå‘˜ä¿è¯ï¼Œä¸ªäººç»éªŒä¹‹è°ˆï¼Œkeyç”¨åå…­è¿›åˆ¶è¡¨ç¤ºæ¯”è¾ƒå¥½ï¼Œå› ä¸ºä¸€èˆ¬åœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹æ—¶æ˜¾ç¤ºçš„ä¹Ÿæ˜¯åå…­è¿›åˆ¶ï¼Œç”¨åå…­è¿›åˆ¶è®¾ç½®æ¯”è¾ƒç›´è§‚ä¹Ÿæ–¹ä¾¿ç®¡ç†ã€‚ sizeï¼šå¾…åˆ›å»ºçš„å…±äº«å†…å­˜çš„å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ shmflgï¼šå…±äº«å†…å­˜çš„è®¿é—®æƒé™ï¼Œä¸æ–‡ä»¶çš„æƒé™ä¸€æ ·ï¼Œ0666|IPC_CREATè¡¨ç¤ºå…¨éƒ¨ç”¨æˆ·å¯¹å®ƒå¯è¯»å†™ï¼Œå¦‚æœå…±äº«å†…å­˜ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜ è¿”å›å€¼ï¼š æˆåŠŸï¼šå°†è¿”å›æœ‰æ•ˆçš„å…±äº«å†…å­˜æ ‡è¯†ç¬¦ å¤±è´¥æˆ–é”™è¯¯æ—¶ï¼Œè¿”å›-1ï¼Œå¹¶è®¾ç½®errnoä»¥æŒ‡ç¤ºé”™è¯¯ã€‚ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:2:2","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"è¿æ¥å…±äº«å†…å­˜â€”â€”shmatå‡½æ•° ä½œç”¨ï¼šæŠŠå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ å‡½æ•°åŸå‹ï¼š void *shmat(int shm_id, const void *shm_addr, int shmflg); å‚æ•°ï¼š shm_idæ˜¯ç”±shmgetå‡½æ•°è¿”å›çš„å…±äº«å†…å­˜æ ‡è¯† å‚æ•°shm_addræŒ‡å®šå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹ä¸­çš„åœ°å€ä½ç½®ï¼Œé€šå¸¸ä¸ºç©ºï¼Œè¡¨ç¤ºè®©ç³»ç»Ÿæ¥é€‰æ‹©å…±äº«å†…å­˜çš„åœ°å€ å‚æ•°shm_flgæ˜¯ä¸€ç»„æ ‡å¿—ä½ï¼Œé€šå¸¸ä¸º0ã€‚ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›ä¸€ä¸ªæŒ‡å‘å…±äº«å†…å­˜ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æŒ‡é’ˆ å¤±è´¥ï¼šè¿”å›(void*) -1ï¼Œå¹¶è®¾ç½®errnoä»¥æŒ‡ç¤ºé”™è¯¯çš„åŸå›  ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:2:3","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"åˆ†ç¦»å…±äº«å†…å­˜â€”â€”shmdtå‡½æ•° ä½œç”¨ï¼šå°†å…±äº«å†…å­˜ä»å½“å‰è¿›ç¨‹ä¸­åˆ†ç¦»ï¼Œç›¸å½“äºshmatå‡½æ•°çš„åæ“ä½œ å‡½æ•°åŸå‹ï¼š int shmdt(const void *shmaddr); å‚æ•°ï¼š shmaddrï¼šæ˜¯shmatå‡½æ•°è¿”å›çš„åœ°å€ è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›0 å¤±è´¥ï¼šè¿”å›-1ï¼Œå¹¶è®¾ç½®errnoä»¥æŒ‡ç¤ºé”™è¯¯çš„åŸå›  ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:2:4","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"åˆ é™¤å…±äº«å†…å­˜â€”â€”shmctlå‡½æ•° ä½œç”¨ï¼šæ§åˆ¶å…±äº«å†…å­˜ï¼Œè¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œshmctlä¸ä»…å¯ä»¥åˆ é™¤å…±äº«å†…å­˜ï¼Œè¿˜å¯ä»¥åšå…¶ä»–äº‹æƒ…ï¼Œä½†åˆ é™¤æ˜¯è¿™ä¸ªå‡½æ•°æœ€ä¸»è¦ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„åŠŸèƒ½ å‡½æ•°åŸå‹ï¼š int shmctl(int shm_id, int command, struct shmid_ds *buf); å‚æ•°(åˆ é™¤)ï¼š shm_idæ˜¯shmgetå‡½æ•°è¿”å›çš„å…±äº«å†…å­˜æ ‡è¯†ç¬¦ commandå¡«IPC_RMID bufå¡«0 è¿”å›å€¼ï¼š åˆ é™¤æˆåŠŸè¿”å›0ï¼ˆå…¶ä»–æœ‰éƒ¨åˆ†æ“ä½œä¸æ˜¯ï¼Œè¯¦æƒ…çœ‹manæ‰‹å†Œï¼‰ å¤±è´¥è¿”å›-1ï¼Œå¹¶ä¼šè®¾ç½®å¯¹åº”errno å¦å¤–ï¼šç”¨rootåˆ›å»ºçš„å…±äº«å†…å­˜ï¼Œä¸ç®¡åˆ›å»ºçš„æƒé™æ˜¯ä»€ä¹ˆï¼Œæ™®é€šç”¨æˆ·æ— æ³•åˆ é™¤ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:2:5","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"å…¶ä»–å‘½ä»¤æ“ä½œ ç”¨ipcs -må¯ä»¥æŸ¥çœ‹ç³»ç»Ÿçš„å…±äº«å†…å­˜ï¼Œå†…å®¹æœ‰é”®å€¼ï¼ˆkeyï¼‰ï¼Œå…±äº«å†…å­˜ç¼–å·ï¼ˆshmidï¼‰ï¼Œåˆ›å»ºè€…ï¼ˆownerï¼‰ï¼Œæƒé™ï¼ˆpermsï¼‰ï¼Œå¤§å°ï¼ˆbytesï¼‰ âœ c git:(main) âœ— ipcs -m ------------ å…±äº«å†…å­˜æ®µ -------------- é”® shmid æ‹¥æœ‰è€… æƒé™ å­—èŠ‚ è¿æ¥æ•° çŠ¶æ€ 0x00000000 4 sugar 600 524288 2 ç›®æ ‡ 0x00000000 7 sugar 600 524288 2 ç›®æ ‡ 0x00000000 11 sugar 600 4194304 2 ç›®æ ‡ 0x00000000 12 sugar 600 524288 2 ç›®æ ‡ 0x00005005 13 sugar 640 56 0 ç”¨ipcrm -må…±äº«å†…å­˜ç¼–å·ï¼Œå¯ä»¥æ‰‹å·¥åˆ é™¤å…±äº«å†…å­˜ âœ c git:(main) âœ— ipcrm -m 13 âœ c git:(main) âœ— ipcs -m ------------ å…±äº«å†…å­˜æ®µ -------------- é”® shmid æ‹¥æœ‰è€… æƒé™ å­—èŠ‚ è¿æ¥æ•° çŠ¶æ€ 0x00000000 4 sugar 600 524288 2 ç›®æ ‡ 0x00000000 7 sugar 600 524288 2 ç›®æ ‡ 0x00000000 11 sugar 600 4194304 2 ç›®æ ‡ 0x00000000 12 sugar 600 524288 2 ç›®æ ‡ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:3:0","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"è¡¥å……ä¸€ä¸ªå°demo ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:4:0","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"ç¨‹åºAåˆ›å»ºå…±äº«å†…å­˜å¹¶å†™å…¥ ä»£ç ï¼š #include \u003cstring.h\u003e #include \u003csys/ipc.h\u003e #include \u003csys/shm.h\u003e #include \u003ciostream\u003e struct st_pid { int pid; char name[51]; }; int main(int argc, char* argv[]) { int shmid; if ((shmid = shmget(0x5005, sizeof (st_pid), 0640 | IPC_CREAT)) == -1) { printf(\"shmget failed\\n\"); return -1; } st_pid* stpid = nullptr; if ((stpid = (st_pid*)shmat(shmid, nullptr, 0)) == (void*)-1) { printf(\"shmat failed\\n\"); return -1; } stpid-\u003epid = 10010; strcpy(stpid-\u003ename, \"JOJO\"); return 0; } æ‰§è¡Œç»“æœï¼š âœ c git:(main) âœ— ipcs -m ------------ å…±äº«å†…å­˜æ®µ -------------- é”® shmid æ‹¥æœ‰è€… æƒé™ å­—èŠ‚ è¿æ¥æ•° çŠ¶æ€ 0x00000000 4 sugar 600 524288 2 ç›®æ ‡ 0x00000000 7 sugar 600 524288 2 ç›®æ ‡ 0x00000000 11 sugar 600 4194304 2 ç›®æ ‡ 0x00000000 12 sugar 600 524288 2 ç›®æ ‡ 0x00005005 14 sugar 640 56 0 ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:4:1","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"ç¨‹åºBè¯»å–å…±äº«å†…å­˜å¹¶è¯»å‡º ä»£ç ï¼š #include \u003cstdlib.h\u003e #include \u003ciostream\u003e #include \u003cunistd.h\u003e #include \u003csys/ipc.h\u003e #include \u003csys/shm.h\u003e struct st_pid { int pid; char name[51]; }; int main() { int shmid; if ((shmid = shmget(0x00005005, sizeof(st_pid), 0640 | IPC_CREAT)) == -1) { printf(\"shmget failed\\n\"); return -1; } st_pid* test2 = nullptr; if ((test2 = (st_pid*)shmat(shmid, nullptr, 0)) == (void*)-1) { printf(\"shmat failed\\n\"); return -1; } printf(\"name: %s\\n\", test2-\u003ename); printf(\"pid: %d\\n\", test2-\u003epid); if (shmctl(shmid, IPC_RMID, nullptr) == -1) { printf(\"åˆ é™¤å¤±è´¥\\n\"); return -1; } return 0; } æ‰§è¡Œç»“æœï¼š name: JOJO pid: 10010 âœ c git:(main) âœ— ipcs -m ------------ å…±äº«å†…å­˜æ®µ -------------- é”® shmid æ‹¥æœ‰è€… æƒé™ å­—èŠ‚ è¿æ¥æ•° çŠ¶æ€ 0x00000000 4 sugar 600 524288 2 ç›®æ ‡ 0x00000000 7 sugar 600 524288 2 ç›®æ ‡ 0x00000000 11 sugar 600 4194304 2 ç›®æ ‡ 0x00000000 12 sugar 600 524288 2 ç›®æ ‡ ","date":"2022-09-03","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/:4:2","tags":["Linux"],"title":"Linuxä¸­çš„å…±äº«å†…å­˜","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/"},{"categories":["Linux"],"content":"Linuxä¸­çš„ä¿¡å· ç®€å•è®²è®²Linuxä¸­çš„ä¿¡å· ","date":"2022-09-02","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/:0:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/"},{"categories":["Linux"],"content":"ä¿¡å·çš„æ¦‚å¿µ ä¿¡å·ï¼ˆsignalï¼‰æ˜¯è½¯ä»¶ä¸­æ–­ï¼Œæ˜¯è¿›ç¨‹ä¹‹é—´ç›¸äº’ä¼ é€’æ¶ˆæ¯çš„ä¸€ç§æ–¹æ³•ï¼Œç”¨äºé€šçŸ¥è¿›ç¨‹å‘ç”Ÿäº†äº‹ä»¶ï¼Œä½†æ˜¯ï¼Œä¸èƒ½ç»™è¿›ç¨‹ä¼ é€’ä»»ä½•æ•°æ®ã€‚ ä¿¡å·äº§ç”Ÿçš„åŸå› æœ‰è®¸å¤šç§ï¼Œåœ¨Linuxä¸­å¯ä»¥ä½¿ç”¨killæˆ–è€…killallå‘½ä»¤å‘é€ç‰¹å®šä¿¡å· ","date":"2022-09-02","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/:1:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/"},{"categories":["Linux"],"content":"ä¿¡å·çš„ç±»å‹ Linuxä¸‹å¸¸è§çš„ä¿¡å·å¦‚ä¸‹ï¼Œå…¶ä¸­åŠ ç²—çš„éœ€è¦é‡ç‚¹å…³æ³¨ é»˜è®¤å¤„ç†åŠ¨ä½œï¼š A ç¼ºçœçš„åŠ¨ä½œæ˜¯ç»ˆæ­¢è¿›ç¨‹ã€‚ B ç¼ºçœçš„åŠ¨ä½œæ˜¯å¿½ç•¥æ­¤ä¿¡å·ï¼Œå°†è¯¥ä¿¡å·ä¸¢å¼ƒï¼Œä¸åšå¤„ç†ã€‚ C ç¼ºçœçš„åŠ¨ä½œæ˜¯ç»ˆæ­¢è¿›ç¨‹å¹¶è¿›è¡Œå†…æ ¸æ˜ åƒè½¬å‚¨ï¼ˆcore dumpï¼‰ï¼Œå†…æ ¸æ˜ åƒè½¬å‚¨æ˜¯æŒ‡å°†è¿›ç¨‹æ•°æ®åœ¨å†…å­˜çš„æ˜ åƒå’Œè¿›ç¨‹åœ¨å†…æ ¸ç»“æ„ä¸­çš„éƒ¨åˆ†å†…å®¹ä»¥ä¸€å®šæ ¼å¼è½¬å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶ä¸”è¿›ç¨‹é€€å‡ºæ‰§è¡Œï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ä¸ºç¨‹åºå‘˜ æä¾›äº†æ–¹ä¾¿ï¼Œä½¿å¾—ä»–ä»¬å¯ä»¥å¾—åˆ°è¿›ç¨‹å½“æ—¶æ‰§è¡Œæ—¶çš„æ•°æ®å€¼ï¼Œå…è®¸ä»–ä»¬ç¡®å®šè½¬å‚¨çš„åŸå› ï¼Œå¹¶ä¸”å¯ä»¥è°ƒè¯•ä»–ä»¬çš„ç¨‹åºã€‚ D ç¼ºçœçš„åŠ¨ä½œæ˜¯åœæ­¢è¿›ç¨‹ï¼Œè¿›å…¥åœæ­¢çŠ¶æ€çš„ç¨‹åºè¿˜èƒ½é‡æ–°ç»§ç»­ï¼Œä¸€èˆ¬æ˜¯åœ¨è°ƒè¯•çš„è¿‡ç¨‹ä¸­ã€‚ E ä¿¡å·ä¸èƒ½è¢«æ•è·ã€‚ F ä¿¡å·ä¸èƒ½è¢«å¿½ç•¥ã€‚ ä¿¡å·å ä¿¡å·å€¼ é»˜è®¤å¤„ç†åŠ¨ä½œ å‘å‡ºä¿¡å·çš„åŸå›  SIGHUP 1 A ç»ˆç«¯æŒ‚èµ·æˆ–è€…æ§åˆ¶è¿›ç¨‹ç»ˆæ­¢ SIGINT 2 A é”®ç›˜ä¸­æ–­Ctrl+c SIGQUIT 3 C é”®ç›˜çš„é€€å‡ºé”®è¢«æŒ‰ä¸‹ SIGILL 4 C éæ³•æŒ‡ä»¤ SIGABRT 6 C ç”±abort(3)å‘å‡ºçš„é€€å‡ºæŒ‡ä»¤ SIGFPE 8 C æµ®ç‚¹å¼‚å¸¸ SIGKILL 9 AEF é‡‡ç”¨kill -9 è¿›ç¨‹ç¼–å· å¼ºåˆ¶æ€æ­»ç¨‹åº SIGSEGV 11 C æ— æ•ˆçš„å†…å­˜å¼•ç”¨ SIGPIPE 13 A ç®¡é“ç ´è£‚ï¼Œå†™ä¸€ä¸ªæ²¡æœ‰è¯»ç«¯å£çš„ç®¡é“ã€‚ SIGALRM 14 A ç”±alarm()å‘å‡ºçš„ä¿¡å· SIGTERM 15 A é‡‡ç”¨â€œkill è¿›ç¨‹ç¼–å·â€æˆ–â€œkillallç¨‹åºåâ€é€šçŸ¥ç¨‹åºã€‚ SIGUSR1 10 A ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å·1 SIGUSR2 12 A ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å·2 SIGCHLD 17 B å­è¿›ç¨‹ç»“æŸä¿¡å· SIGCONT 18 è¿›ç¨‹ç»§ç»­ï¼ˆæ›¾è¢«åœæ­¢çš„è¿›ç¨‹ï¼‰ SIGSTOP 19 DEF ç»ˆæ­¢è¿›ç¨‹ SIGTSTP 20 D æ§åˆ¶ç»ˆç«¯ï¼ˆttyï¼‰ä¸ŠæŒ‰ä¸‹åœæ­¢é”® SIGTTIN 21 D åå°è¿›ç¨‹ä¼å›¾ä»æ§åˆ¶ç»ˆç«¯è¯» SIGTTOU 22 D åå°è¿›ç¨‹ä¼å›¾ä»æ§åˆ¶ç»ˆç«¯å†™ ","date":"2022-09-02","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/:2:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/"},{"categories":["Linux"],"content":"ä¿¡å·çš„å¤„ç† ä¸€èˆ¬è€Œè¨€ï¼Œè¿›ç¨‹å¯¹ä¿¡å·çš„å¤„ç†æ–¹æ³•æœ‰ä¸‰ç§ï¼š å¯¹è¯¥ä¿¡å·çš„å¤„ç†é‡‡ç”¨ç³»ç»Ÿçš„é»˜è®¤æ“ä½œï¼Œå¤§éƒ¨åˆ†çš„ä¿¡å·çš„é»˜è®¤æ“ä½œæ˜¯ç»ˆæ­¢è¿›ç¨‹ è®¾ç½®ä¸­æ–­çš„å¤„ç†å‡½æ•°ï¼Œæ”¶åˆ°ä¿¡å·åï¼Œç”±è¯¥å‡½æ•°æ¥å¤„ç† å¿½ç•¥æŸä¸ªä¿¡å·ï¼Œå¯¹è¯¥ä¿¡å·ä¸åšä»»ä½•å¤„ç†ï¼Œå°±åƒæœªå‘ç”Ÿè¿‡ä¸€æ · // signalå‡½æ•°å¯ä»¥ç”¨æ¥è®¾ç½®ç¨‹åºå¯¹ä¿¡å·çš„å¤„ç†æ–¹å¼ #include \u003csignal.h\u003e typedef void (*sighandler_t)(int); sighandler_t signal(int signum, sighandler_t handler); // signumè¡¨ç¤ºä¿¡å·çš„ç¼–å· // å‚æ•°handlerè¡¨ç¤ºå¯¹äºä¿¡å·çš„å¤„ç†æ–¹å¼ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µ // - SIG_DFLï¼šsignal.h é¢„åˆ¶çš„å®å®šä¹‰ï¼Œç”¨äºæ¢å¤ä¿¡å·çš„å¤„ç†æ–¹å¼ä¸ºé»˜è®¤å¤„ç†æ–¹å¼ // - ä¸€ä¸ªè‡ªå®šä¹‰çš„ä¿¡å·å¤„ç†å‡½æ•° handlerï¼Œæ‰§è¡Œå‡½æ•°å†…å®¹ // - SIG_IGNï¼šå¿½ç•¥å‚æ•°signumæ‰€æŒ‡ä»£çš„ä¿¡å· ","date":"2022-09-02","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/:3:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/"},{"categories":["Linux"],"content":"ä¿¡å·çš„ä½œç”¨ ä¿¡å·çš„ä½œç”¨é¡¾åæ€ä¹‰ï¼Œç»™å‡ºä¸€ä¸ªä¸€ä¸ªä¿¡å·ï¼Œèµ·åˆ°ä¸€ä¸ªé€šçŸ¥çš„ä½œç”¨è¡¨ç¤ºå‘ç”Ÿäº†æŸä»¶äº‹æƒ…ï¼Œè¿™é‡Œè¦æ³¨æ„å®ƒåªèµ·åˆ°é€šçŸ¥ï¼Œä¸èµ·åˆ°å‘ŠçŸ¥å…·ä½“ä¿¡æ¯ æ¯”å¦‚è¯´ï¼š æœåŠ¡ç¨‹åºè¿è¡Œåœ¨åå°ï¼Œå¦‚æœæƒ³è®©ä¸­æ­¢å®ƒï¼Œæ€æ‰ä¸æ˜¯ä¸ªå¥½åŠæ³•ï¼Œå› ä¸ºç¨‹åºè¢«æ€çš„æ—¶å€™ï¼Œç¨‹åºçªç„¶æ­»äº¡ï¼Œæ²¡æœ‰å®‰æ’å–„åå·¥ä½œã€‚ å¦‚æœå‘æœåŠ¡ç¨‹åºå‘é€ä¸€ä¸ªä¿¡å·ï¼ŒæœåŠ¡ç¨‹åºæ”¶åˆ°è¿™ä¸ªä¿¡å·åï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­ç¼–å†™å–„åçš„ä»£ç ï¼Œç¨‹åºå°±å¯ä»¥æœ‰è®¡åˆ’çš„é€€å‡ºã€‚ å†æ¯”å¦‚è¯´ï¼š å‘æœåŠ¡ç¨‹åºå‘é€0çš„ä¿¡å·ï¼Œå¯ä»¥æ£€æµ‹ç¨‹åºæ˜¯å¦å­˜æ´»ã€‚ ","date":"2022-09-02","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/:4:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/"},{"categories":["Linux"],"content":"ä¿¡å·åº”ç”¨ç¤ºä¾‹ ","date":"2022-09-02","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/:5:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/"},{"categories":["Linux"],"content":"å±è”½ä¿¡å· ä¸€èˆ¬åœ¨éœ€è¦ç¼–è¾‘ä¸€ä¸ªæœåŠ¡å™¨ç¨‹åºçš„æ—¶å€™ï¼Œä¼šå…ˆå°†æ‰€æœ‰çš„ä¿¡å·è¿›è¡Œå±è”½ï¼Œé˜²æ­¢è¿è¡ŒæœŸé—´ç¨‹åºè¢«ä¸€äº›é¢„æœŸä¹‹å¤–çš„ä¿¡å·å¹²æ‰° for (int i = 1; i \u003c 65; ++i) { signal(i, SIG_IGN); } ","date":"2022-09-02","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/:5:1","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/"},{"categories":["Linux"],"content":"é’ˆå¯¹ç‰¹å®šä¿¡å·è‡ªè¡Œè®¾å®šå¤„ç†æ–¹å¼ æ¯”å¦‚é’ˆå¯¹ctrl + Cä»¥åŠkill + è¿›ç¨‹å·æˆ–è€…killall + è¿›ç¨‹åè¿™ç§ç›®çš„æ˜¯ä¸­æ–­è¿›ç¨‹çš„ä¿¡å·ã€‚ å…¶ä¸­ctrl + Cå‘é€çš„ä¿¡å·æ˜¯SIGINTä¿¡å·ï¼Œç¼–å·ä¸º2ï¼›kill + è¿›ç¨‹å·æˆ–è€…killall + è¿›ç¨‹åå‘é€çš„ä¿¡å·æ˜¯SIGTERMä¿¡å·ï¼Œç¼–å·ä¸º15 âš ï¸ï¼šå¦å¤–è¿˜æœ‰ä¸€ç§æ–¹å¼ä¼šä¸­æ–­ç¨‹åºï¼Œå³é€šè¿‡kill -9 è¿›ç¨‹å·çš„æ–¹å¼å‘é€ç¼–å·ä¸º9çš„ä¿¡å·ï¼Œæ­¤ä¿¡å·ä¸èƒ½è¢«æ•è·ä¹Ÿä¸èƒ½è¢«å¿½ç•¥ï¼Œå½“å‘é€è¿™ä¸ªä¿¡å·æ—¶ç¨‹åºä¼šç›´æ¥åœæ­¢è¿è¡Œï¼Œæ˜¯å¼ºåˆ¶å…³é—­è¿›ç¨‹çš„ä¸€ç§æªæ–½ è®¾ç½®SIGINTå’ŒSIGTERMä¸¤ä¸ªä¿¡å·çš„å¤„ç†å‡½æ•°ï¼Œè¿™ä¸¤ä¸ªä¿¡å·å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå‡½æ•°çš„ä»£ç æ˜¯åœ¨ç¨‹åºè¿è¡Œç»“æŸå‰é‡Šæ”¾èµ„æºï¼Œå¢å¼ºç¨‹åºçš„å¥å£®æ€§ï¼Œå®Œæ•´ç¨‹åºå¦‚ä¸‹ï¼š #include \u003ciostream\u003e #include \u003csignal.h\u003e void EXIT(int sig) { printf(\"æ”¶åˆ°äº†ä¿¡å·%d, å³å°†é€€å‡º\\n\", sig); /** è¿™é‡Œåº”è¯¥å¡«å……ç¨‹åºçš„èµ„æºé‡Šæ”¾ä»£ç  * * */ exit(0); // è¿›ç¨‹é€€å‡º } int main(int argc, char** argv) { for (int i = 1; i \u003c 65; ++i) { signal(i, SIG_IGN); } signal(SIGINT, EXIT); signal(SIGTERM, EXIT); while (true) { printf(\"æ¨¡æ‹Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ï¼Œæ¯æ¬¡ä»»åŠ¡ä¸¤ç§’é’Ÿ\\n\"); sleep(2); } return 0; } ","date":"2022-09-02","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/:5:2","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/"},{"categories":["Linux"],"content":"å‘é€ä¿¡å· Linuxæ“ä½œç³»ç»Ÿæä¾›äº†killå’Œkillallå‘½ä»¤å‘ç¨‹åºå‘é€ä¿¡å·ï¼ŒCè¯­è¨€ä¹Ÿæä¾›äº†ç›¸å¯¹åº”çš„åº“å‡½æ•°ï¼Œç”¨äºåœ¨ç¨‹åºä¸­å‘å…¶å®ƒè¿›ç¨‹æˆ–è€…çº¿ç¨‹å‘é€ä¿¡å·ã€‚ #include \u003csys/types.h\u003e #include \u003csignal.h\u003e int kill(pid_t pid, int sig); è¿™é‡Œsigå‚æ•°ä¸ä¹‹å‰ç»ˆç«¯å‘é€çš„sigç¼–å·ç›¸åŒï¼Œè¦æ³¨æ„ä¸€ä¸‹å‚æ•°pidä¸€å…±ä¼šæœ‰ä¸‰ç§æƒ…å†µï¼š pid\u003e0å°†ä¿¡å·ä¼ ç»™è¿›ç¨‹å·ä¸ºpidçš„è¿›ç¨‹ pid=0å°†ä¿¡å·ä¼ ç»™å’Œç›®å‰è¿›ç¨‹ç›¸åŒè¿›ç¨‹ç»„çš„æ‰€æœ‰è¿›ç¨‹ï¼Œå¸¸ç”¨äºçˆ¶è¿›ç¨‹ç»™å­è¿›ç¨‹å‘é€ä¿¡å·ï¼Œæ³¨æ„ï¼Œå‘é€ä¿¡å·è€…è¿›ç¨‹ä¹Ÿä¼šæ”¶åˆ°è‡ªå·±å‘å‡ºçš„ä¿¡å· pid=-1å°†ä¿¡å·å¹¿æ’­ä¼ é€ç»™ç³»ç»Ÿå†…æ‰€æœ‰çš„è¿›ç¨‹ï¼Œä¾‹å¦‚ç³»ç»Ÿå…³æœºæ—¶ï¼Œä¼šå‘æ‰€æœ‰çš„ç™»å½•çª—å£å¹¿æ’­å…³æœºä¿¡æ¯ è¿”å›å€¼è¯´æ˜ï¼š æˆåŠŸæ‰§è¡Œæ—¶ï¼Œè¿”å›0ï¼› å¤±è´¥è¿”å›-1ï¼Œerrnoè¢«è®¾ä¸ºä»¥ä¸‹çš„æŸä¸ªå€¼ï¼š EINVALï¼šæŒ‡å®šçš„ä¿¡å·ç æ— æ•ˆï¼ˆå‚æ•° sig ä¸åˆæ³•ï¼‰ EPERMï¼šæƒé™ä¸å¤Ÿæ— æ³•ä¼ é€ä¿¡å·ç»™æŒ‡å®šè¿›ç¨‹ ESRCHï¼šå‚æ•° pid æ‰€æŒ‡å®šçš„è¿›ç¨‹æˆ–è¿›ç¨‹ç»„ä¸å­˜åœ¨ ","date":"2022-09-02","objectID":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/:6:0","tags":["Linux"],"title":"Linuxä¸­çš„ä¿¡å·","uri":"/posts/linux%E4%B8%AD%E7%9A%84%E4%BF%A1%E5%8F%B7/"},{"categories":["C/C++"],"content":"C++çš„æŒ‡é’ˆ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:0:0","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"æŒ‡é’ˆçš„æ¦‚å¿µ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:1:0","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"C++ä¸­å†…å­˜å•å…ƒå†…å®¹ä¸åœ°å€ å†…å­˜ç”±å¾ˆå¤šå†…å­˜å•å…ƒç»„æˆï¼Œè¿™äº›å†…å­˜å•å…ƒç”¨äºå­˜æ”¾å„ç§ç±»å‹çš„æ•°æ® è®¡ç®—æœºå¯¹å†…å­˜ä¸­çš„æ¯ä¸ªå†…å­˜å•å…ƒéƒ½è¿›è¡Œäº†ç¼–å·ï¼Œè¿™ä¸ªç¼–å·å°±ç§°ä¸ºå†…å­˜åœ°å€ï¼Œåœ°å€å†³å®šäº†å†…å­˜å•å…ƒåœ¨å†…å­˜ä¸­çš„ä½ç½® è®°ä½è¿™äº›å•å…ƒåœ°å€ä¸æ–¹ä¾¿ï¼Œäºæ˜¯C++çš„ç¼–è¯‘å™¨å°±å…è®¸é€šè¿‡è®¾ç½®å˜é‡çš„æ–¹å¼æ¥è®¿é—®è¿™äº›å†…å­˜åœ°å€ï¼Œè€Œè¿™ä¸ªå˜é‡å°±æ˜¯æŒ‡é’ˆ ä¸¾ä¾‹ï¼š int a = 5; int* ptr = \u0026a; // æ­¤æ—¶ptrå­˜å‚¨çš„å˜é‡å†…å®¹å°±æ˜¯açš„åœ°å€ï¼Œé€šè¿‡ptrå¯ä»¥é—´æ¥è®¿é—®a ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:1:1","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"æŒ‡é’ˆçš„å®šä¹‰ä¸é—´æ¥è®¿é—®æ“ä½œ æŒ‡é’ˆå®šä¹‰çš„åŸºæœ¬å½¢å¼ï¼šæŒ‡é’ˆæœ¬èº«å°±æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåªä¸è¿‡å®ƒå­˜å‚¨çš„å†…å®¹æ˜¯åœ°å€ã€‚å¯¹äºç±»å‹Tï¼ŒT* ptr å°±æ˜¯åœ¨å®šä¹‰ä¸€ä¸ªæŒ‡å‘ç±»å‹ä¸ºTçš„æŒ‡é’ˆptrï¼Œè¿™ä¸ªptrå°±å¯ä»¥å­˜å‚¨ã€Œç±»å‹ä¸ºTçš„å˜é‡çš„åœ°å€ã€ é€šè¿‡ä¸€ä¸ªæŒ‡é’ˆè®¿é—®å®ƒæ‰€æŒ‡å‘åœ°å€çš„è¿‡ç¨‹ç§°ä¸ºé—´æ¥è®¿é—®æˆ–è€…å¼•ç”¨æŒ‡é’ˆï¼Œè€Œè¿™ä¸ªç”¨äºæ‰§è¡Œé—´æ¥è®¿é—®çš„æ“ä½œç¬¦å°±æ˜¯å•ç›®è¿ç®—ç¬¦* ä¾‹å¦‚ï¼šstd::cout \u003c\u003c *ptr \u003c\u003c std::endl;å°±å¯ä»¥æ‰“å°å‡ºæ¥ptræ‰€æŒ‡å‘çš„å€¼ï¼ˆä½¿ç”¨std::cout \u003c\u003c ptr \u003c\u003c std::endl;å¯ä»¥æ‰“å°å‡ºæ¥ptrå­˜å‚¨çš„åœ°å€ï¼‰ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:1:2","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"å·¦å€¼ä¸å³å€¼ ä¸€ä¸ªå°æ¡ˆä¾‹ï¼š int main() { // å®šä¹‰ä¸€ä¸ªæ•°ç»„ char str1[] = {\"Hello, world\"}; char* str2 = \"Hello, world\"; str2 = str1; // str1 = str2; // è¿™ä¸€è¡Œå¦‚æœä¸æ³¨é‡Šä¼šæŠ¥é”™ return 0; } ä¸Šé¢è¿™ä¸ªå°demoä¸­ï¼Œstr2å¯ä»¥èµ‹å€¼ä¸ºstr1ï¼Œä½†æ˜¯str1å¹¶ä¸å¯ä»¥è¢«str2èµ‹å€¼ï¼Œæ¢è¨€ä¹‹æŒ‡é’ˆå˜é‡çš„å€¼å…è®¸æ”¹å˜è€Œæ•°ç»„å˜é‡çš„å€¼ä¸å¯ä»¥æ”¹å˜ï¼Œè™½ç„¶åœ¨ä½¿ç”¨çš„æ—¶å€™str1å’Œstr2åŒºåˆ«ä¸å¤§ï¼Œä½†åœ¨èµ‹å€¼ä¸Šä»–ä¿©æˆªç„¶ä¸åŒï¼Œè¿™å°±æ˜¯å·¦å€¼ä¸å³å€¼ã€‚ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:2:0","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"æ¦‚å¿µ è¿™é‡Œä¸æ·±ç©¶åŸç†ï¼Œç®€å•ä»å·¥ç¨‹çš„è§’åº¦ä¸Šæ¥è§£è¯»ä¸€ä¸‹å·¦å€¼ä¸å³å€¼ å·¦å€¼å³å¯ä»¥æ”¾åˆ°èµ‹å€¼è¿ç®—ç¬¦=å·¦è¾¹çš„å€¼ï¼ŒåŒ…æ‹¬è®¾å®šå¥½çš„å˜é‡ã€æŒ‡é’ˆç­‰ï¼ˆå·¦å€¼ä¹Ÿå¯ä»¥æ”¾åˆ°=å³è¾¹ï¼‰ å³å€¼å³åªèƒ½æ”¾åˆ°èµ‹å€¼è¿ç®—ç¬¦=å³è¾¹çš„å€¼ï¼Œå®ƒä¸€èˆ¬æ˜¯ä¸€ä¸ªæ•°æ®çš„æœ¬èº«ï¼Œä¸èƒ½å–åˆ°æœ¬èº«çš„åœ°å€ï¼ŒåŒ…æ‹¬å­—é¢å€¼å¸¸é‡ã€æ•°å€¼å¸¸é‡ç­‰ï¼ˆå³å€¼åªèƒ½æ”¾åˆ°=å³è¾¹ï¼‰ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:2:1","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"å…·ä½“åˆ†æ å·¦å€¼æœ€å¸¸è§çš„æƒ…å†µå¦‚å‡½æ•°å’Œæ•°æ®æˆå‘˜çš„åå­— å³å€¼æ˜¯æ²¡æœ‰æ ‡è¯†ç¬¦ã€ä¸å¯ä»¥å–åœ°å€çš„è¡¨è¾¾å¼ï¼Œä¸€èˆ¬ä¹Ÿç§°ä¸ºä¸´æ—¶å¯¹è±¡ æ¯”å¦‚a = b + cï¼Œå¯ä»¥é€šè¿‡\u0026aæ¥å–açš„åœ°å€ä½†ä¸å¯ä»¥\u0026(b + c)æ¥å–(b + c)çš„åœ°å€ï¼Œè¿™é‡Œçš„aå°±æ˜¯å·¦å€¼ï¼Œè€Œ(b + c)å°±æ˜¯å³å€¼ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:2:2","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"Cä¸­çš„æŒ‡é’ˆ è¿™é‡Œå…ˆç®€å•å¼•å…¥ä¸€ä¸‹Cä¸­çš„æŒ‡é’ˆä»¥åŠå…¶ç‰¹ç‚¹ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:3:0","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"ä¸€èˆ¬ç±»å‹çš„æŒ‡é’ˆT* è¿™é‡Œçš„TæŒ‡çš„æ˜¯ä»»ä½•ä¸€ç§ç±»å‹ï¼Œæ¯”å¦‚int*æŒ‡çš„å°±æ˜¯intç±»å‹çš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªç›¸åº”ç±»å‹çš„å¯¹è±¡ï¼Œå­˜å‚¨çš„å†…å®¹å°±æ˜¯å…¶åœ°å€ è¿™ä¸ªç±»å‹ä¹ŸåŒ…æ‹¬å‡½æ•°ç±»å‹ï¼Œå½“å¯¹åº”çš„ç±»å‹æ˜¯å‡½æ•°æ—¶ï¼Œå®ƒä¹Ÿå°±è¢«ç§°ä¸ºå‡½æ•°æŒ‡é’ˆ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:3:1","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"æŒ‡é’ˆæ•°ç»„ æŒ‡é’ˆæ•°ç»„é¦–å…ˆæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶é‡Œé¢å­˜å‚¨çš„å˜é‡æ˜¯æŒ‡é’ˆï¼Œä¸€èˆ¬çš„æ•°ç»„å®šä¹‰æ—¶å¦‚int a[]ï¼Œå¯¹äºæŒ‡é’ˆç±»å‹ä¹Ÿä¸€æ ·ï¼Œå®šä¹‰ä¸€ç»„æŒ‡é’ˆæ•°ç»„å½¢å¦‚T* a[] ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:3:2","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"æ•°ç»„æŒ‡é’ˆ æ•°ç»„æŒ‡é’ˆä¸æŒ‡é’ˆæ•°ç»„æ˜¯ç›¸åçš„æ¦‚å¿µï¼Œæ•°ç»„æŒ‡é’ˆé¦–å…ˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œåªæ˜¯è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„ç±»å‹æ˜¯æ•°ç»„ï¼Œæ¯”å¦‚T(*b)[] å…¶å®å¯ä»¥ç†è§£ä¸ºï¼š[]çš„ä¼˜å…ˆçº§æ¯”*é«˜ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:3:3","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"constä¸æŒ‡é’ˆ constä¸æŒ‡é’ˆçœŸçš„çˆ±æ¨çº ç¼ ï¼Œconstå’Œpointerçš„å‰åé¡ºåºä¸åŒå°±ä¼šå¯¼è‡´å…¶è¡¨è¾¾çš„æ„æ€ä¸åŒï¼Œæ€»ä½“ä¸Šåˆ†ä¸ºä¸¤ç±»ï¼š const pointerï¼šå¸¸é‡æŒ‡é’ˆï¼Œå½¢å¼ä¸ºconst T* ptrï¼Œå¸¸é‡æŒ‡é’ˆè¡¨ç¤ºçš„æ˜¯è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå³æŒ‡å‘çš„å¯¹è±¡æœ¬èº«ä¸å¯ä»¥ä¿®æ”¹ï¼Œä½†æŒ‡é’ˆå¯ä»¥æ›´æ¢åœ°å€ï¼ˆä¹Ÿå³å¯ä»¥æ›´æ¢æŒ‡å‘çš„å¯¹è±¡ï¼‰ pointer to constï¼šæŒ‡é’ˆå¸¸é‡ï¼Œå½¢å¼ä¸ºT* const ptrï¼ŒæŒ‡é’ˆå¸¸é‡è¡¨ç¤ºçš„æ˜¯è¿™ä¸ªæŒ‡é’ˆæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå³æŒ‡é’ˆæ‰€å­˜å‚¨çš„åœ°å€ä¸å¯ä»¥æ”¹å˜ï¼ˆæŒ‡å‘çš„å¯¹è±¡ä¸å¯ä»¥å˜æ›´ï¼‰ï¼Œä½†æŒ‡å‘çš„å¯¹è±¡æœ¬èº«å¯ä»¥æ›´æ”¹å…¶å€¼ å·²ç»åœ¨ä¸Šé¢çš„ä»‹ç»ä¸­é€éœ²å‡ºæ¥äº†ä¸€ç§é€Ÿè®°æ–¹å¼ï¼Œå³æŒ‰ç…§constä¸*å‡ºç°çš„é¡ºåºæ¥åˆ¤æ–­ï¼Œconståœ¨å‰å°±å…ˆå¿µå¸¸é‡ï¼Œ*åœ¨å‰å°±å…ˆå¿µæŒ‡é’ˆï¼ŒåŒæ—¶æŒ‰ç…§é¡ºåºå»ç†è§£ï¼Œå¸¸é‡æŒ‡é’ˆâ€”â€”ç±»ä¼¼äºã€Œå­—ç¬¦ä¸²æŒ‡é’ˆã€ã€ã€Œæ•°ç»„æŒ‡é’ˆã€å³å®ƒæŒ‡å‘çš„æ˜¯å¸¸é‡ï¼›è€ŒæŒ‡é’ˆå¸¸é‡â€”â€”åˆ™ç›´æ¥æŒ‰ç…§é¡ºåºè¯»å³å¯ã€ŒæŒ‡é’ˆæ˜¯å¸¸é‡ã€ã€‚ è¿™é‡Œä¸ªäººæ¨èå°½å¯èƒ½é¿å…ä½¿ç”¨æŒ‡é’ˆå¸¸é‡ï¼Œå› ä¸ºå®ƒæœ¬èº«ç¡®å®æœ‰äº›åäººç±»ï¼Œåœ¨ä»£ç ä¸­ä¼šå¾ˆå®¹æ˜“é™ä½å¯è¯»æ€§ï¼Œé™¤éå¿…é¡»ä½¿ç”¨ï¼Œå¦åˆ™åº”å½“é¿å… ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:3:4","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆ å³ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒå­˜å‚¨çš„åœ°å€æ‰€å¯¹åº”çš„å¯¹è±¡è¿˜æ˜¯ä¸€ä¸ªåœ°å€ï¼Œå½¢å¦‚T** ptr int a = 123; int* b = \u0026a; int** c = \u0026b; ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:3:5","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"é‡æŒ‡é’ˆä¸æ‚¬ç©ºæŒ‡é’ˆ é‡æŒ‡é’ˆæ˜¯æœªåˆå§‹åŒ–çš„æŒ‡é’ˆï¼Œè¿™ç§æŒ‡é’ˆå†…å­˜å‚¨çš„åœ°å€å€¼æ˜¯æœªå®šä¹‰çš„ï¼Œä¼šå­˜åœ¨ä¸¤ç§æƒ…å†µï¼š è®¿é—®çš„åœ°å€æ˜¯æ— æ•ˆçš„ï¼šä¼šæŠ¥é”™ï¼Œè¿›ç¨‹ä¼šç»ˆæ­¢ è®¿é—®çš„åœ°å€æ˜¯æœ‰æ•ˆçš„ï¼šä½†å¹¶ä¸çŸ¥é“è®¿é—®çš„æ˜¯å“ªé‡Œçš„åœ°å€ï¼Œé€ æˆç¨‹åºæ··ä¹± è§£å†³åŠæ³•ï¼šåªè¦å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆå°±è¦å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œæ¯”å¦‚ç›´æ¥èµ‹å€¼ä¸ºnullptrï¼Œåœ¨å…·ä½“ä½¿ç”¨æ—¶å†å¯¹å…¶èµ‹å®é™…çš„åœ°å€ æ‚¬ç©ºæŒ‡é’ˆæ˜¯æŒ‡é’ˆæ‰€æŒ‡çš„å¯¹è±¡å·²è¢«é‡Šæ”¾æ‰çš„æŒ‡é’ˆï¼Œå¯¹å…¶è®¿é—®ä¹Ÿä¼šå­˜åœ¨ä¸é‡æŒ‡é’ˆç›¸ä¼¼çš„ä¸¤ç§æƒ…å†µ è§£å†³åŠæ³•ï¼šå½“ææ„å¯¹è±¡çš„æ—¶å€™ï¼Œå°†æŒ‡å‘å…¶çš„æŒ‡é’ˆè®¾ç½®ä¸ºnullptrï¼Œå½“ç„¶è¿™æ ·å­å¹¶ä¸ä¸€å®šæ€»æ˜¯å¯é ï¼Œæœ€å¥½è¿˜æ˜¯é€šè¿‡RAIIçš„æ–¹å¼æ¥ç®¡ç†æŒ‡é’ˆï¼Œå½“ææ„å‡½æ•°æ‰§è¡Œæ—¶è‡ªåŠ¨æ‰§è¡Œè®¾ç½®ä¸ºnullptrçš„è¡Œä¸ºï¼Œæ¯”å¦‚ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ âš ï¸ï¼šè¿™é‡Œç»™åˆ°çš„æç¤ºå°±æ˜¯å½“ç”¨æŒ‡é’ˆè¿›è¡Œé—´æ¥è®¿é—®æ—¶ï¼Œä¸€å®šè¦éå¸¸éå¸¸å°å¿ƒï¼Œç¡®ä¿å…¶åœ°å€æœ‰æ„ä¹‰å†å»ä½¿ç”¨ â—ï¸ï¼šå¦å¤–ï¼Œå†å²ä»£ç ä¸­ä¸€èˆ¬ä½¿ç”¨NULLæ¥è¡¨ç¤ºç©ºæŒ‡é’ˆï¼Œä½†è¿™ä¸ªæœ¬è´¨ä¸Šæ˜¯0ï¼Œæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä»ç„¶å­˜åœ¨ç€ä¸€å®šçš„é—®é¢˜ï¼Œå› æ­¤åœ¨C++11ä¸­æ¨å‡ºäº†nullptrè¡¨ç¤ºç©ºæŒ‡é’ˆï¼Œnullptræ— ä»»ä½•å®é™…å«ä¹‰ï¼Œåªè¡¨ç¤ºæŒ‡é’ˆä¸ºç©ºï¼Œç°ä»£C++ç¨‹åºåº”å°½å¯èƒ½ä½¿ç”¨nullptr ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:3:6","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"C++çš„èµ„æºç®¡ç†æ–¹å¼â€”â€”RAII ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:4:0","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"RAII(Resource Acquisition Is Initialization): C++æ‰€ç‰¹æœ‰çš„èµ„æºç®¡ç†æ–¹å¼ï¼ˆéƒ¨åˆ†è¯­è¨€å¦‚Dã€Rustä¹Ÿé‡‡çº³äº†RAIIï¼‰ï¼Œä¸»æµè¯­è¨€ä¸­å”¯ä¸€ä¸€ä¸ªä¾èµ–RAIIæ¥åšèµ„æºç®¡ç†çš„ RAIIä¾æ‰˜äºæ ˆå’Œææ„å‡½æ•°ï¼Œæ¥å¯¹æ‰€æœ‰çš„èµ„æºâ€”â€”åŒ…æ‹¬å †å†…å­˜è¿›è¡Œç®¡ç†ã€‚é€šè¿‡ä½¿ç”¨RAIIï¼Œä½¿å¾—C++ä¸éœ€è¦ç±»ä¼¼äºJAVAçš„åƒåœ¾å›æ”¶æœºåˆ¶ä¹Ÿå¯ä»¥æœ‰æ•ˆçš„ç®¡ç†å†…å­˜åˆ†é…é‡Šæ”¾é—®é¢˜ã€‚ RAIIæ¯”è¾ƒæˆç†Ÿçš„ä»£è¡¨ï¼šæ™ºèƒ½æŒ‡é’ˆï¼ˆunique_ptrã€shared_ptrï¼‰ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:4:1","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"å†…å­˜æ³„æ¼ ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼š ç¨‹åºä¸­é€šè¿‡åŠ¨æ€åˆ†é…ï¼ˆnewï¼‰çš„å †å†…å­˜ç”±äºæŸç§åŸå› å¯¼è‡´ç¨‹åºæœªé‡Šæ”¾æˆ–æ— æ³•é‡Šæ”¾ç›¸åº”èµ„æºè€Œå¯¼è‡´çš„å†…å­˜èµ„æºæµªè´¹çš„æƒ…å†µç§°ä¸ºå†…å­˜æ³„æ¼ï¼Œå†…å­˜æ³„æ¼ä¼šå¯¼è‡´ç¨‹åºè¿è¡ŒæœŸé—´å¯ç”¨å†…å­˜çš„å‡å°‘ï¼Œä¸¥é‡è€…å¯ä»¥å¯¼è‡´ç¨‹åºçš„è¿è¡Œé€Ÿåº¦å‡ç¼“ç”šè‡³å´©æºƒ å‘ç”ŸåŸå› å’Œæ’æŸ¥æ–¹æ³•ï¼š å†…å­˜æ³„æ¼ä¸»è¦å‘ç”Ÿåœ¨å †å†…å­˜åˆ†é…æ–¹å¼ä¸­ï¼Œå³â€œé…ç½®äº†å†…å­˜åï¼Œæ‰€æœ‰æŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆéƒ½é—å¤±äº†â€ï¼Œæ²¡æœ‰åƒåœ¾å›æ”¶æœºåˆ¶æ—¶è¿™å—å†…å­˜å°±å†ä¹Ÿæ— æ³•å½’è¿˜ç»™ç³»ç»Ÿ å†…å­˜æ³„æ¼å±äºç¨‹åºè¿è¡Œçš„é—®é¢˜ï¼Œæ— æ³•åœ¨ç¼–è¯‘æœŸé—´æ’æŸ¥ï¼Œåªèƒ½é€šè¿‡ä»£ç æ£€æŸ¥ä»¥åŠè¿è¡ŒæœŸé—´å†…å­˜æ£€æµ‹å·¥å…·è¿›è¡Œè¯Šæ–­å’Œåˆ¤åˆ« è§£å†³åŠæ³•ï¼šé€šè¿‡RAIIå¯¹å†…å­˜è¿›è¡Œç®¡ç†ï¼Œä¸€ä¸ªç±»æ„é€ çš„æ—¶å€™è¿›è¡Œå†…å­˜ç”³è¯·ï¼Œåœ¨ææ„çš„æ—¶å€™è¿›è¡Œå†…å­˜é‡Šæ”¾ï¼Œç”±äºä¸€ä¸ªå˜é‡æœ‰å…¶ä½œç”¨åŸŸï¼Œå½“ç¦»å¼€ä½œç”¨åŸŸèŒƒå›´æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œä¹Ÿå°±ä¼šè‡ªåŠ¨è¿›è¡Œå†…å­˜é‡Šæ”¾äº†ï¼ˆå…¸å‹çš„åšæ³•æ˜¯ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆæ¥å¯¹å…¶è¿›è¡Œç®¡ç†ï¼‰ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:4:2","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"æ™ºèƒ½æŒ‡é’ˆ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:5:0","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"æ¯”æ™®é€šæŒ‡é’ˆæ›´å®‰å…¨çš„è§£å†³æ–¹æ¡ˆ ä¹‹å‰ä»‹ç»äº†æ™®é€šæŒ‡é’ˆå¯èƒ½ä¼šå‡ºç°çš„é—®é¢˜ï¼Œå¯¹äºè¿™äº›é—®é¢˜ï¼Œç°ä»£C++ä¸€èˆ¬æœ‰ä¸¤ç§å…¸å‹æ–¹æ¡ˆï¼š ä½¿ç”¨æ›´å®‰å…¨çš„æŒ‡é’ˆâ€”â€”æ™ºèƒ½æŒ‡é’ˆ ä¸ä½¿ç”¨æŒ‡é’ˆï¼Œç”¨æ›´å®‰å…¨çš„æ–¹å¼â€”â€”ä½¿ç”¨å¼•ç”¨çš„æ–¹å¼ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:5:1","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"C++ä¸­çš„æ™ºèƒ½æŒ‡é’ˆ C++ç›®å‰ä¸€å…±æ¨å‡ºäº†å…±å››ç§æ™ºèƒ½æŒ‡é’ˆï¼Œåˆ†åˆ«æ˜¯unique_ptrã€shared_ptrã€weak_pträ»¥åŠå·²ç»åœ¨C++11ä¸­è¢«å¼ƒç”¨ï¼ˆdeprecatedï¼‰çš„auto_ptrï¼ˆåœ¨C++17ä¸­å·²ç»æ­£å¼è¢«åˆ é™¤ï¼‰ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:5:2","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"auto_ptr é¦–å…ˆæ¥çœ‹ä¸€ä¸‹auto_ptrï¼Œå®ƒæ˜¯æœ€æ—©çš„æ™ºèƒ½æŒ‡é’ˆï¼Œå¯ä»¥æ¯”è¾ƒå®¹æ˜“çš„çœ‹å‡ºæ¥æ™ºèƒ½æŒ‡é’ˆçš„ä½œç”¨ä¸æ€æƒ³ï¼Œåç»­çš„æ™ºèƒ½æŒ‡é’ˆæœ¬è´¨ä¸Šéƒ½æ˜¯å°†auto_ptrè¿›è¡Œå®Œå–„ä¸å»¶ä¼¸ã€‚ åŸºæœ¬ç‰¹æ€§ï¼šé¦–å…ˆauto_pträ½¿ç”¨æ–¹æ³•è·ŸæŒ‡é’ˆä¸€æ ·ï¼Œå†…éƒ¨ä¹Ÿç›¸å½“äºå­˜å‚¨ç€ä¸€ä¸ªåœ°å€ï¼Œä½†å¯¹äºnew expressionè·å¾—çš„å¯¹è±¡ä¸éœ€è¦åƒæ™®é€šçš„newçš„å¯¹è±¡ä¸€æ ·deleteå»é”€æ¯å¯¹è±¡è€Œæ˜¯åœ¨auto_ptrå¯¹è±¡é”€æ¯æ—¶ï¼Œå®ƒæ‰€ç®¡ç†çš„å¯¹è±¡ä¹Ÿä¼šè¢«è‡ªåŠ¨deleteæ‰ï¼Œè¿™é‡Œè¿˜æ˜¯æ¯”è¾ƒæŠ½è±¡çš„ï¼Œä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šåœ¨ä¸€ä¸ªå‡½æ•°ç‰‡æ®µä¸­å¦‚æœéœ€è¦newä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä½¿ç”¨æ™®é€šæŒ‡é’ˆå’Œæ™ºèƒ½æŒ‡é’ˆçš„è¡¨ç°å¦‚ä¸‹ï¼š // æ™®é€šæŒ‡é’ˆ if (xxx) { test_class* ptr = new test_class(); ... delete ptr; } // æ™ºèƒ½æŒ‡é’ˆ if (xxx) { auto_ptr\u003ctest_class\u003e ptr2 (new test_class()); ... } å¯ä»¥çœ‹å‡ºæ¥ï¼Œå½“ä½¿ç”¨æ™®é€šæŒ‡é’ˆçš„æ—¶å€™ï¼Œåœ¨ç¦»å¼€ä½œç”¨åŸŸä¹‹å‰éœ€è¦å…ˆdeleteï¼Œè€Œä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆåˆ™ä¸ç”¨ï¼Œè¿™æ˜¯å› ä¸ºæ™ºèƒ½æŒ‡é’ˆç¦»å¼€ä½œç”¨åŸŸæ—¶ä¼šè¢«é”€æ¯ï¼Œè€Œæ™ºèƒ½æŒ‡é’ˆè¢«é”€æ¯æ—¶ä¼šè‡ªåŠ¨deleteæ‰å®ƒçš„å¯¹è±¡ã€‚ æ‰€æœ‰æƒè½¬ç§»ï¼šå¦‚æœå°†auto_pträ¼ é€’ç»™å¦å¤–çš„æ™ºèƒ½æŒ‡é’ˆï¼ŒåŸæ¥çš„æŒ‡é’ˆå°±ä¸å†æ‹¥æœ‰è¿™ä¸ªå¯¹è±¡äº†ï¼Œåœ¨æ‹·è´/èµ‹å€¼çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‰¥å¤ºæŒ‡é’ˆå¯¹åŸå¯¹è±¡çš„å†…å­˜éƒ½æ§åˆ¶æƒï¼Œæ§åˆ¶æƒè½¬äº¤ç»™æ–°å¯¹è±¡ï¼Œå†å°†åŸå¯¹è±¡çš„æŒ‡é’ˆç½®ä¸ºnullptrï¼Œä¸ºäº†æ›´å¥½å±•ç¤ºè¿™ä¸ªç‰¹ç‚¹ä»¥åŠå…¶å¯èƒ½å­˜åœ¨çš„éšæ‚£ï¼Œçœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªä¾‹å­ #include \u003ciostream\u003e #include \u003cstring\u003e #include \u003cmemory\u003e using namespace std; class Test { public: explicit Test(string str) : str(std::move(str)) { printf(\"æ„é€ æˆåŠŸ\\n\"); } ~Test() { printf(\"ææ„æˆåŠŸ\\n\"); } public: void print() { cout \u003c\u003c str \u003c\u003c endl; } private: string str; }; int main() { auto_ptr\u003cTest\u003e strs[3] = { auto_ptr\u003cTest\u003e(new Test(\"C\")), auto_ptr\u003cTest\u003e(new Test(\"C++\")), auto_ptr\u003cTest\u003e(new Test(\"Java\")) }; cout \u003c\u003c \"------first loop------\" \u003c\u003c endl; for (auto\u0026 str_ptr : strs) { str_ptr-\u003eprint(); } strs[1]-\u003eprint(); cout \u003c\u003c \"------second loop------\" \u003c\u003c endl; for (auto str_ptr : strs) { str_ptr-\u003eprint(); } strs[1]-\u003eprint(); printf(\"è¿è¡Œç»“æŸ\\n\"); return 0; } è¿è¡Œç»“æœå¦‚ä¸‹ï¼š æ„é€ æˆåŠŸ æ„é€ æˆåŠŸ æ„é€ æˆåŠŸ ------first loop------ C C++ Java C++ ------second loop------ C ææ„æˆåŠŸ C++ ææ„æˆåŠŸ Java ææ„æˆåŠŸ è¿›ç¨‹å·²ç»“æŸ,é€€å‡ºä»£ç 139 (interrupted by signal 11: SIGSEGV) å¯ä»¥çœ‹åˆ°ï¼Œfirst loopå¯ä»¥æ‰“å°å‡ºC++ï¼Œè€Œsecond loopå¹¶æ²¡æœ‰èƒ½å¤Ÿæ‰“å°å‡ºC++ï¼Œè¿™ä¸ªå°±æ˜¯å› ä¸ºæ‰€æœ‰æƒçš„è½¬ç§»ï¼Œç¬¬ä¸€ä¸ªå¾ªç¯ä¸­ä½¿ç”¨çš„æ˜¯å¼•ç”¨çš„æ–¹å¼ï¼Œå› æ­¤å¹¶æ²¡æœ‰å‘ç”Ÿæ‰€æœ‰æƒçš„è½¬ç§»ï¼Œå› æ­¤å¾ªç¯ç»“æŸå†æ¬¡è®¿é—®æ²¡æœ‰é—®é¢˜ï¼Œè€Œç¬¬äºŒä¸ªå¾ªç¯ä½¿ç”¨çš„æ˜¯å€¼æ‹·è´çš„æ–¹å¼ï¼Œè¿™å°±å¯¼è‡´äº†æ¯ä¸€æ¬¡ä½¿ç”¨éƒ½ä¼šä½¿å¾—ä¹‹å‰çš„auto_ptræŸå¤±æ‰è‡ªå·±çš„æ‰€æœ‰æƒï¼Œè€Œæ¯ä¸€è½®å¾ªç¯åˆä¼šå› ä¸ºè¿™ä¸ªé—®é¢˜å¯¼è‡´newçš„å¯¹è±¡è¢«ç›´æ¥é‡Šæ”¾æ‰ï¼Œè¿›è€Œåœ¨ç¬¬äºŒæ¬¡å¾ªç¯ç»“æŸçš„æ—¶å€™å†å»è®¿é—®è¿™ä¸ªæŒ‡é’ˆï¼Œå¯¼è‡´äº†crashè¢«ä¿¡å·ä¸­æ–­äº†ï¼Œè¿™å°±æ„å‘³ç€auto_ptrå…¶å®å¹¶ä¸å®‰å…¨ã€‚ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:5:3","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"unique_ptr åœ¨åˆšåˆšçš„auto_pträ¸­ï¼Œæ™ºèƒ½æŒ‡é’ˆä¸å¯¹è±¡æœ‰ç€å¼ºè€¦åˆå…³ç³»ï¼Œå¦‚æœå‡ºç°äº†æ‹·è´æ™ºèƒ½æŒ‡é’ˆå°±å¾ˆæœ‰å¯èƒ½ä¼šå‡ºç°ä¹‹å‰æ‰€è®²è¿°çš„é—®é¢˜ï¼Œå¹¶ä¸æƒ³é‡Šæ”¾æ‰è¿™ä¸ªå…ƒç´ ä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¾ˆå¯èƒ½åœ¨æ²¡æœ‰å¯Ÿè§‰çš„è¿‡ç¨‹ä¸­å°±å®Œæˆäº†é‡Šæ”¾ï¼Œå¯¼è‡´åç»­ç¨‹åºé”™è¯¯ã€‚ä¸ºäº†æ”¹è¿›auto_pträ¹Ÿå°±æå‡ºäº†unique_ptrã€‚ unique_ptrçš„æ‰€æœ‰æƒæ˜¯ä¸“å±æ‰€æœ‰æƒï¼Œæ‰€ä»¥unique_ptrç®¡ç†çš„å†…å­˜ï¼Œæ™ºèƒ½è¢«ä¸€ä¸ªå¯¹è±¡æ‰€æŒæœ‰ï¼ŒåŒæ—¶ä¸æ”¯æŒæ‹·è´å’Œèµ‹å€¼ ç§»åŠ¨è¯­ä¹‰ï¼šunique_ptrç¦æ­¢äº†æ‹·è´è¯­ä¹‰ï¼Œä½†æœ‰æ—¶ä¹Ÿéœ€è¦èƒ½å¤Ÿè½¬ç§»æ‰€æœ‰æƒï¼Œäºæ˜¯æä¾›äº†ç§»åŠ¨è¯­ä¹‰ï¼Œä¹Ÿå³å¯ä»¥ä½¿ç”¨std::move()è¯­å¥è¿›è¡Œè½¬ç§»æ‰€æœ‰æƒã€‚æ¥ä¸‹æ¥å…·ä½“çœ‹ä¸€ä¸‹ï¼Œé¦–å…ˆåŒæ ·æ˜¯ä¹‹å‰çš„ä¾‹å­ï¼Œå°†auto_ptræ›´æ¢ä¸ºunique_ptrï¼š #include \u003ciostream\u003e #include \u003cstring\u003e #include \u003cmemory\u003e using namespace std; class Test { public: explicit Test(string str) : str(std::move(str)) { printf(\"æ„é€ æˆåŠŸ\\n\"); } ~Test() { printf(\"ææ„æˆåŠŸ\\n\"); } public: void print() { cout \u003c\u003c str \u003c\u003c endl; } private: string str; }; int main() { unique_ptr\u003cTest\u003e strs[3] = { unique_ptr\u003cTest\u003e(new Test(\"C\")), unique_ptr\u003cTest\u003e(new Test(\"C++\")), unique_ptr\u003cTest\u003e(new Test(\"Java\")) }; cout \u003c\u003c \"------first loop------\" \u003c\u003c endl; for (auto\u0026 str_ptr : strs) { str_ptr-\u003eprint(); } strs[1]-\u003eprint(); cout \u003c\u003c \"------second loop------\" \u003c\u003c endl; for (auto str_ptr : strs) { str_ptr-\u003eprint(); } strs[1]-\u003eprint(); printf(\"è¿è¡Œç»“æŸ\\n\"); return 0; } å¦‚æœè¿™ä¸ªæ—¶å€™è¿›è¡Œç¼–è¯‘ï¼Œä¼šå‘ç°ç¨‹åºç¼–è¯‘ä¼šæŠ¥é”™ï¼ŒæŠ¥é”™å†…å®¹åœ¨for (auto str_ptr : strs)ï¼ŒæŠ¥é”™ä¿¡æ¯ä¸ºï¼šCall to implicitly-deleted copy constructor of 'unique_ptr\u003cTest\u003e'ï¼Œä¹Ÿå°±æ˜¯è¯´unique_pträ¸æ”¯æŒé€šè¿‡æ‹·è´æ¥æ„é€ ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å°±ä¸å¯ä»¥ç»§ç»­ä½¿ç”¨ä¹‹å‰çš„æ–¹å¼æ¥è¿›è¡Œè®¿é—®äº†ï¼Œå¦‚æœç¡®å®šè¦ç§»åŠ¨èµ°æ‰€æœ‰æƒï¼Œé‚£ä¹ˆå°±è¦æ˜¾ç¤ºçš„ä½¿ç”¨std::move()è¿›è¡Œè½¬ç§»ï¼Œä»£ç å¦‚ä¸‹ï¼š #include \u003ciostream\u003e #include \u003cstring\u003e #include \u003cmemory\u003e using namespace std; class Test { public: explicit Test(string str) : str(std::move(str)) { printf(\"æ„é€ æˆåŠŸ\\n\"); } ~Test() { printf(\"ææ„æˆåŠŸ\\n\"); } public: void print() { cout \u003c\u003c str \u003c\u003c endl; } private: string str; }; int main() { unique_ptr\u003cTest\u003e strs[3] = { unique_ptr\u003cTest\u003e(new Test(\"C\")), unique_ptr\u003cTest\u003e(new Test(\"C++\")), unique_ptr\u003cTest\u003e(new Test(\"Java\")) }; cout \u003c\u003c \"------first loop------\" \u003c\u003c endl; for (auto\u0026 str_ptr : strs) { str_ptr-\u003eprint(); } strs[1]-\u003eprint(); cout \u003c\u003c \"------second loop------\" \u003c\u003c endl; for (auto\u0026 str_ptr : strs) { auto tmp = std::move(str_ptr); tmp-\u003eprint(); } if (strs[1] != nullptr) { strs[1]-\u003eprint(); } printf(\"è¿è¡Œç»“æŸ\\n\"); return 0; } é€šè¿‡æ˜ç¡®çš„ç§»åŠ¨è¯­ä¹‰ç§»åŠ¨èµ°æ‰€æœ‰æƒï¼Œç„¶åè¿›è¡Œä½¿ç”¨ï¼Œææ„ï¼Œå½“ä½¿ç”¨æ˜ç¡®çš„ç§»åŠ¨è¯­ä¹‰æ—¶å°±å¯ä»¥é¿å…ç¨‹åºå‘˜çš„å¤±è¯¯å¯¼è‡´å¯¹è±¡è¢«é‡Šæ”¾ã€‚å¦å¤–ï¼Œunique_pträ¹Ÿæ”¯æŒäº†ä¸nullptrè¿›è¡Œæ¯”è¾ƒï¼Œè¿™ä¸€ç‚¹ä¹Ÿæ˜¯auto_ptræ²¡æœ‰çš„ï¼Œç›¸æ¯”ä¹‹ä¸‹ä¹Ÿå°±æ›´å®‰å…¨ï¼Œå¦å¤–ï¼Œåœ¨C++11ä¸­æ›´åŠ æå€¡ä½¿ç”¨å·¥å‚æ¨¡å¼çš„å·¥å‚å‡½æ•°æ¥ç”Ÿäº§æ™ºèƒ½æŒ‡é’ˆï¼Œå› æ­¤åœ¨ç¬¬ä¸€æ®µç”Ÿæˆunique_ptrçš„å‡½æ•°é‚£é‡Œï¼Œå°†ä»£ç æ›´æ”¹ä¸ºï¼š unique_ptr\u003cTest\u003e strs[3] = { std::make_unique\u003cTest\u003e(\"C\"), std::make_unique\u003cTest\u003e(\"C++\"), std::make_unique\u003cTest\u003e(\"Java\") }; å¸¸ç”¨çš„unique_ptræ–¹æ³•ï¼š ptr.get()ï¼šç”¨äºè·å–åŸå§‹æŒ‡é’ˆï¼Œå› ä¸ºå†å²çš„åŒ…è¢±é—®é¢˜ï¼Œå¾ˆå¤šæ—¶å€™C++å¹¶ä¸èƒ½å®Œå…¨ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œå¯¹äºéœ€è¦ä½¿ç”¨CæŒ‡é’ˆçš„æ—¶å€™é€šè¿‡get()æ–¹æ³•å°±å¯ä»¥ä½¿ç”¨æ™®é€šæŒ‡é’ˆäº† ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:5:4","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"shared_pträ¸weak_ptr ä¸è®ºæ˜¯auto_ptrè¿˜æ˜¯unique_ptrï¼Œæœ¬è´¨ä¸Šå…¶å®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½åªå…è®¸ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆæ¥è®¿é—®ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸å…è®¸å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆæ¥è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½†å¦‚æœæƒ³åƒæ™®é€šæŒ‡é’ˆä¸€æ ·å»ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œé‚£ä¹ˆå°±å¿…é¡»å…è®¸å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆæ¥è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ä¹Ÿå°±æœ‰äº†shared_ptr è§£å†³æ–¹æ³•ï¼šé€šè¿‡ã€Œå¼•ç”¨è®¡æ•°ã€æœºåˆ¶ä½¿å¾—å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¼•ç”¨è®¡æ•°å°±æ˜¯å½“æœ‰ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆæŒ‡å‘è¯¥å¯¹è±¡æ—¶ï¼Œå¼•ç”¨è®¡æ•°åŠ 1ï¼Œå½“ä¸€ä¸ªæ™ºèƒ½å¯¹è±¡è¢«é”€æ¯æ—¶å¼•ç”¨è®¡æ•°å‡1ï¼Œå½“å¼•ç”¨è®¡æ•°å‡å°åˆ°0æ—¶ä¼šé‡Šæ”¾å¯¹è±¡èµ„æºç„¶åæ‰§è¡Œå¯¹åº”çš„ææ„å‡½æ•°ã€‚ï¼ˆå½“ç„¶å¼•å…¥ã€Œå¼•ç”¨è®¡æ•°ã€ä¼šå­˜åœ¨ä¸€å®šçš„é¢å¤–å¼€é”€ï¼Œä½†ç›¸æ¯”è¾ƒäºå®ƒçš„ä¼˜åŠ¿å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œé™¤ééå¸¸æ˜ç¡®ä¸ä½¿ç”¨shared_pträ¼šæ›´å¥½ï¼Œå¦åˆ™ä½¿ç”¨shared_pträ¸€å®šä¸æ˜¯ä¸€ä»¶åäº‹æƒ…ï¼‰ å¼•ç”¨è®¡æ•°çš„é—®é¢˜â€”â€”å¾ªç¯å¼•ç”¨ï¼š èµ·å› ï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸¤ä¸ªç±»ä¸­ï¼ŒAä¸­å«æœ‰ç±»å‹Bçš„shared_ptrï¼ŒBä¸­å«æœ‰ç±»å‹Açš„shared_ptr è¿™æ—¶ä½¿ç”¨åˆ†åˆ«newä¸€ä¸ªç±»å‹ä¸ºAå’ŒBçš„å¯¹è±¡Aå’Œå¯¹è±¡Bï¼Œå¹¶ä½¿ç”¨ptr AæŒ‡å‘å¯¹è±¡Aï¼ŒptrBæŒ‡å‘å¯¹è±¡Bï¼Œæ­¤æ—¶å¯¹è±¡Açš„æŒ‡é’ˆæŒ‡å‘å¯¹è±¡Bï¼Œæ­¤æ—¶å¯¹è±¡Bçš„æŒ‡é’ˆæŒ‡å‘å¯¹è±¡Aã€‚å½“ptrAä½¿ç”¨ç»“æŸæ—¶ï¼ŒptrAé‡Šæ”¾ï¼Œå¯¹è±¡Açš„å¼•ç”¨è®¡æ•°-1ï¼Œä½†å› ä¸ºå¯¹è±¡Bä»ç„¶æŒæœ‰å¯¹è±¡Açš„æ™ºèƒ½æŒ‡é’ˆï¼Œæ‰€ä»¥å¼•ç”¨è®¡æ•°å¤§äº0ï¼Œä¹Ÿå°±ä¸ä¼šææ„å¯¹è±¡Aï¼›æ¥ä¸‹æ¥ptrBä¹Ÿä½¿ç”¨ç»“æŸï¼Œå¯¹è±¡Bçš„å¼•ç”¨è®¡æ•°-1ï¼Œä½†å› ä¸ºä¹‹å‰å¯¹è±¡Aå¹¶æ²¡æœ‰è¢«ææ„ï¼Œå› æ­¤å¯¹è±¡Bçš„å¼•ç”¨è®¡æ•°ä¹Ÿä»ç„¶å¤§äº0ï¼Œå› æ­¤å¯¹è±¡Bä¹Ÿæ²¡æœ‰è¢«ææ„ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒptrAå’ŒptrBéƒ½è¢«é‡Šæ”¾äº†ï¼Œä½†å¯¹è±¡Aå’Œå¯¹è±¡Béƒ½æ²¡æœ‰è¢«ææ„ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰å…¶ä»–æŒ‡é’ˆæŒ‡å‘ä»–ä»¬ï¼Œæ¢è¨€ä¹‹ï¼Œå·²ç»å‘ç”Ÿäº†å†…å­˜æ³„æ¼ï¼Œå› ä¸ºå¯¹è±¡Aå’Œå¯¹è±¡Bä¸å¯èƒ½å†è¢«ææ„ã€‚ è§£å†³æ–¹æ³•ï¼šä½¿ç”¨weak_ptr weak_ptrè¢«è®¾è®¡ç”¨æ¥å’Œshared_pträ¸€èµ·ä½¿ç”¨ï¼Œå®ƒå·¥ä½œåœ¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå¯¹äºå®ƒæŒ‡å‘çš„å¯¹è±¡æ˜¯ä¸€ç§å¼±å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥è·å¾—èµ„æºçš„è§‚æµ‹æƒï¼Œåƒæ—è§‚è€…ä¸€æ ·è§‚å¯Ÿèµ„æºçš„ä½¿ç”¨æƒ…å†µï¼Œä½†æ˜¯å¼±å¼•ç”¨å°±ä»£è¡¨ç€å®ƒä¸ä¼šå¢åŠ shared_ptrçš„å¼•ç”¨è®¡æ•°ï¼Œå½“è¢«è§‚å¯Ÿçš„shared_ptrå¤±æ•ˆä¹‹åï¼Œç›¸åº”çš„weak_pträ¹Ÿå°±å¤±æ•ˆäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè™šçº¿ä»£è¡¨è§‚å¯Ÿï¼Œä¸å¢åŠ å¼•ç”¨è®¡æ•° ä»£ç ç¤ºä¾‹ï¼š ä¸ä½¿ç”¨weak_ptrï¼š #include \u003ciostream\u003e #include \u003cmemory\u003e #include \u003cstring\u003e #include \u003cmemory\u003e using namespace std; class B; class A { public: A(shared_ptr\u003cB\u003e ptr = nullptr) : ptr(ptr) { printf(\"Aæ„é€ å®Œæˆ\\n\"); } ~A() { printf(\"Aææ„å®Œæˆ\\n\"); } shared_ptr\u003cB\u003e ptr; }; class B { public: B(shared_ptr\u003cA\u003e ptr = nullptr) : ptr(ptr) { printf(\"Bæ„é€ å®Œæˆ\\n\"); } ~B() { printf(\"Bææ„å®Œæˆ\\n\"); } shared_ptr\u003cA\u003e ptr; }; int main() { auto ptrA = make_shared\u003cA\u003e(); auto ptrB = make_shared\u003cB\u003e(ptrA); ptrA-\u003eptr = ptrB; } æ­¤æ—¶ï¼ŒptrAå’ŒptrBå‡ºç°äº†ç›¸äº’å¼•ç”¨ï¼Œç¨‹åºç»“æœä¸ºï¼š Aæ„é€ å®Œæˆ Bæ„é€ å®Œæˆ å¯ä»¥çœ‹å‡ºæ¥å¹¶æ²¡æœ‰å‘ç”Ÿææ„ï¼Œæ­¤æ—¶å¦‚æœå°†æœ€åä¸€è¡Œä»£ç å»æ‰ï¼Œå³ptrAçš„pträ¸ºnullptr #include \u003ciostream\u003e #include \u003cmemory\u003e #include \u003cstring\u003e #include \u003cmemory\u003e using namespace std; class B; class A { public: A(shared_ptr\u003cB\u003e ptr = nullptr) : ptr(ptr) { printf(\"Aæ„é€ å®Œæˆ\\n\"); } ~A() { printf(\"Aææ„å®Œæˆ\\n\"); } shared_ptr\u003cB\u003e ptr; }; class B { public: B(shared_ptr\u003cA\u003e ptr = nullptr) : ptr(ptr) { printf(\"Bæ„é€ å®Œæˆ\\n\"); } ~B() { printf(\"Bææ„å®Œæˆ\\n\"); } shared_ptr\u003cA\u003e ptr; }; int main() { auto ptrA = make_shared\u003cA\u003e(); auto ptrB = make_shared\u003cB\u003e(ptrA); // ptrA-\u003eptr = ptrB; } æ­¤æ—¶ç»“æœä¸ºï¼š Aæ„é€ å®Œæˆ Bæ„é€ å®Œæˆ Bææ„å®Œæˆ Aææ„å®Œæˆ å¯ä»¥æ¨æ–­å‡ºæ¥ï¼Œåªè¦ä¸€æ–¹ä¸æŒæœ‰å¦ä¸€æ–¹çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆå°±å¯ä»¥æ­£å¸¸ææ„ï¼Œè€Œè¿™ä¹Ÿå°±æ˜¯weak_ptrçš„åŸºæœ¬åŸç†ï¼ŒåŒæ—¶å†èµ‹äºˆå…¶è§‚å¯Ÿè€…çš„èº«ä»½ï¼Œä½¿å¾—å…¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ç›¸å¯¹åº”çš„æŒ‡é’ˆã€‚ ä½¿ç”¨weak_ptr: #include \u003ciostream\u003e #include \u003cmemory\u003e #include \u003cstring\u003e #include \u003cmemory\u003e using namespace std; class B; class A { public: A(shared_ptr\u003cB\u003e ptr = nullptr) : ptr(ptr) { printf(\"Aæ„é€ å®Œæˆ\\n\"); } ~A() { printf(\"Aææ„å®Œæˆ\\n\"); } shared_ptr\u003cB\u003e ptr; }; class B { public: B(shared_ptr\u003cA\u003e ptr = nullptr) : ptr(ptr) { printf(\"Bæ„é€ å®Œæˆ\\n\"); } ~B() { printf(\"Bææ„å®Œæˆ\\n\"); } weak_ptr\u003cA\u003e ptr; }; int main() { auto ptrA = make_shared\u003cA\u003e(); auto ptrB = make_shared\u003cB\u003e(ptrA); ptrA-\u003eptr = ptrB; } è¿™é‡Œåªéœ€è¦å°†Bä¸­çš„ptræŒ‡é’ˆæ›´æ”¹ä¸ºweak_ptrç±»å‹å³å¯ä»¥å®Œæˆå®éªŒï¼Œå®éªŒç»“æœå¦‚ä¸‹ï¼š Aæ„é€ å®Œæˆ Bæ„é€ å®Œæˆ Aææ„å®Œæˆ Bææ„å®Œæˆ è¿™é‡Œæœ‰ä¸¤ä¸ªåœ°æ–¹è¦æ³¨æ„ï¼š ç±»å‹Bçš„æ„é€ å‡½æ•°å…¶å®æ˜¯è¿ç”¨äº†éšå¼è½¬æ¢ï¼Œå¦å¤–ä¸€æ–¹é¢ä¹Ÿå¯ä»¥ç†è§£ä¸ºweak_ptræ˜¯é€šè¿‡shared_ptræ„é€ çš„ï¼Œå®ƒä¸å¯ä»¥ç”±æ™®é€šæŒ‡é’ˆæ„é€ ï¼Œè¦ç‰¢è®°å®ƒæ˜¯ä¸€ä¸ªshared_ptrçš„è§‚å¯Ÿè€… è¿™é‡Œå®éªŒç»“æœçš„ææ„é¡ºåºå’Œä¹‹å‰å°†Açš„ptrç½®ç©ºçš„ææ„é¡ºåºæ˜¯ç›¸åçš„ï¼Œè¿™é‡Œæ˜¯å› ä¸ºç½®ç©ºæ—¶çš„ptrAè¢«é‡Šæ”¾æ—¶ï¼ŒBä¸­è¿˜æŒæœ‰Açš„æ™ºèƒ½æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯è¯´å¼•ç”¨è®¡æ•°ä¸ä¸º0æ‰€ä»¥ä¸€å®šæ˜¯å…ˆææ„Bå†ææ„Aï¼›è€Œä½¿ç”¨weak_ptræ—¶æ­£å¥½ç›¸åï¼ŒBä¸­ç›¸å½“äºæ²¡æŒæœ‰Açš„æŒ‡é’ˆè€ŒAä¸­æŒæœ‰äº†Bçš„shared_ptrï¼Œæ‰€ä»¥ä¸€å®šæ˜¯å…ˆææ„Aå†ææ„B shared_ptrå¸¸ç”¨å‡½æ•°ï¼š ptr.use_count()ï¼šè¿”å›shared_ptrå½“å‰æŒ‡å‘å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œè¿˜æ˜¯åˆšåˆšçš„ä¾‹å­ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä½¿ç”¨weak_ptrå’Œä¸ä½¿ç”¨weak_ptråœ¨å¼•ç”¨è®¡æ•°ä¸Šçš„åŒºåˆ«ï¼š int main() { auto ptrA = make_shared\u003cA\u003e(); auto ptrB = make_shared\u003cB\u003e(ptrA); ptrA-\u003eptr = ptrB; cout \u003c\u003c ptrA.use_count() \u003c\u003c endl; } ä¸ä½¿ç”¨weak_ptræ‰§è¡Œç»“æœï¼š Aæ„é€ å®Œæˆ Bæ„é€ å®Œæˆ 2 Aææ„å®Œæˆ Bææ„å®Œæˆ ä½¿ç”¨weak_ptræ‰§è¡Œç»“æœ Aæ„é€ å®Œæˆ Bæ„é€ å®Œæˆ 1 Aææ„å®Œæˆ Bææ„å®Œæˆ shared_ptrçš„moveè¯­ä¹‰ï¼šå¯¹shared_ptrè¿›è¡Œstd::move()ä¼šå°†è¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆçš„æ‰€æœ‰å†…å®¹è½¬ç§»ç»™æ–°æŒ‡é’ˆï¼ŒåŒæ—¶åŸæŒ‡é’ˆä¼šè¢«ç½®ä¸ºnullptr ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š int main() { auto ptrA = make_shared\u003cA\u003e(); cout \u003c\u003c ptrA.use_count() \u003c\u003c endl; auto ptr2 = std::move(ptrA); cout \u003c\u003c ptrA.use_count() \u003c\u003c endl; cout \u003c\u003c ptr2.use_count() \u003c\u003c endl; if (ptrA == nullptr) { cout \u003c\u003c \"ptrAå·²ç»è¢«ç½®ä¸ºnullptr\" \u003c\u003c endl; } return 0; } æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š Aæ„é€ å®Œæˆ 1 0 1 ptrAå·²ç»è¢«ç½®ä¸ºnullptr Aææ„å®Œæˆ shared_pträ¹Ÿæ”¯æŒget()æ–¹æ³•ï¼Œä½¿ç”¨ä½œç”¨ä¸weak_ptrç›¸åŒ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:5:5","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"C++çš„å¼•ç”¨ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:6:0","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"å¼•ç”¨æ˜¯ä»€ä¹ˆ å¼•ç”¨å°±æ˜¯ä¸€ç§ç‰¹æ®Šçš„æŒ‡é’ˆï¼Œæ˜¯ä¸€ç§ä¸å…è®¸ä¿®æ”¹çš„æŒ‡é’ˆã€‚ ä½¿ç”¨æŒ‡é’ˆçš„å‘ï¼š é‡æŒ‡é’ˆ æ‚¬ç©ºæŒ‡é’ˆ ä¸çŸ¥ä¸è§‰æ›´æ”¹äº†æŒ‡é’ˆçš„å€¼ä½†å´ç»§ç»­ä½¿ç”¨ ä½¿ç”¨å¼•ç”¨è§£å†³çš„é—®é¢˜ï¼š ä¸å­˜åœ¨ç©ºå¼•ç”¨ å¿…é¡»åˆå§‹åŒ– ä¸€ä¸ªå¼•ç”¨æ°¸è¿œæŒ‡å‘å®ƒåˆå§‹åŒ–çš„é‚£ä¸ªå¯¹è±¡ ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:6:1","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"å¼•ç”¨çš„åŸºæœ¬ä½¿ç”¨ å¯ä»¥è®¤ä¸ºå¼•ç”¨å°±æ˜¯æŒ‡å®šå˜é‡çš„åˆ«åï¼Œåœ¨ä½¿ç”¨æ—¶å¯è®¤ä¸ºå¼•ç”¨å³æ˜¯å˜é‡æœ¬èº« ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:6:2","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"æœ€å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯ è¾“å…¥åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œéœ€è¦æ›´æ”¹ä¸¤ä¸ªå¯¹è±¡çš„å€¼ï¼Œæ¯”å¦‚æœ€ç®€å•çš„äº¤æ¢å€¼swap()ç¨‹åº: void swap(int\u0026 a, int\u0026 b) { int c = a; a = b; b = c; } int main() { int a = 10, b = 20; cout \u003c\u003c \"a: \" \u003c\u003c a \u003c\u003c \", b: \" \u003c\u003c b \u003c\u003c endl; swap(a, b); cout \u003c\u003c \"a: \" \u003c\u003c a \u003c\u003c \", b: \" \u003c\u003c b \u003c\u003c endl; return 0; } æ‰§è¡Œç»“æœï¼š a: 10, b: 20 a: 20, b: 10 ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:6:3","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["C/C++"],"content":"ä¸¤ä¸ªé—®é¢˜çš„æ€è€ƒ æœ‰äº†æŒ‡é’ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦å¼•ç”¨ JAVAåªæœ‰å¼•ç”¨ï¼Œè€ŒCåˆ™åªæœ‰æŒ‡é’ˆï¼ŒC++åˆ™æ”¯æŒæŒ‡é’ˆå’Œå¼•ç”¨æ··åˆç¼–ç¨‹ C++ä¹‹çˆ¶Bjarne Stroustrupçš„è§£é‡Šæ˜¯ï¼šä¸ºäº†æ”¯æŒå‡½æ•°è¿ç®—ç¬¦é‡è½½ æœ‰äº†å¼•ç”¨ä¸ºä»€ä¹ˆè¿˜éœ€è¦æŒ‡é’ˆ å› ä¸ºè¿™æ˜¯C++ï¼Œä¸€å®šè¦å»å…¼å®¹Cè¯­è¨€ï¼Œæ˜¯ä¸€ç§å†å²é—ç•™é—®é¢˜ï¼ŒåƒJAVAå°±å¯ä»¥ç›´æ¥èˆå¼ƒCè¯­è¨€ï¼Œå› ä¸ºå®ƒå¹¶ä¸éœ€è¦å…¼å®¹Cè¯­è¨€ ç®€å•æ¥è¯´ï¼Œä¸ªäººè®¤ä¸ºæŒ‡é’ˆæ˜¯å†å²ï¼Œè·‘ä¸æ‰è€Œä¸”åœ¨å¾ˆå¤šåœºæ™¯ä¸‹æ›´çµæ´»ï¼Œè€Œå¼•ç”¨åˆ™æ›´ç¬¦åˆäººçš„ç›´è§‰ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ é¡ºç•…ï¼Œæ‰€æœ‰å¼•ç”¨çš„åœºæ™¯ç¡®å®éƒ½å¯ä»¥é€šè¿‡æŒ‡é’ˆå®ç°ï¼Œä½†å¼•ç”¨æ˜¯ä¸€ç§æ›´åŠ ä¾¿æ·çš„å·¥å…·ï¼Œéƒ½æ”¯æŒä¸æ˜¯C++çš„ç¼ºç‚¹ï¼Œåè€Œæ˜¯ä¼˜ç‚¹ï¼Œè€Œé‡ç‚¹åˆ™åœ¨ç¨‹åºå‘˜ä»¬è¦å¦‚ä½•å»ä½¿ç”¨è¿™ä¸¤æ ·å·¥å…· ","date":"2022-08-27","objectID":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/:6:4","tags":["C++è¯­æ³•"],"title":"C++çš„æŒ‡é’ˆ","uri":"/posts/c++%E7%9A%84%E6%8C%87%E9%92%88/"},{"categories":["iOS"],"content":"UITableViewä½¿ç”¨æŒ‡å—ï¼Œé€ŸæŸ¥æ‰‹å†Œï¼Œå¿«é€Ÿä¸Šæ‰‹","date":"2022-08-17","objectID":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","tags":["iOS"],"title":"iOS-UITableViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"UITableViewä½¿ç”¨æŒ‡å— ","date":"2022-08-17","objectID":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:0:0","tags":["iOS"],"title":"iOS-UITableViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"æ¦‚è¿° ä¸€èˆ¬é‡åˆ°å¤§é‡ç›¸åŒç»“æ„çš„è§†å›¾è¿›è¡ŒåŒä¸€æ–¹å‘æ’åˆ—æ—¶ï¼Œæ¯”å¦‚ä¸€èˆ¬appçš„è®¾ç½®é¡µé¢ã€é€šè®¯å½•ç­‰ï¼Œä½¿ç”¨UITableViewæ˜¯ä¸€ä¸ªéå¸¸åˆé€‚çš„æ–¹æ¡ˆã€‚ ","date":"2022-08-17","objectID":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:1:0","tags":["iOS"],"title":"iOS-UITableViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"åŸºæœ¬ä»‹ç» ","date":"2022-08-17","objectID":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:2:0","tags":["iOS"],"title":"iOS-UITableViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"é£æ ¼æ ·å¼ï¼š è¿™ä¸ªå±æ€§æ˜¯UITableViewæœ€åŸºæœ¬çš„å±æ€§ï¼Œå…±æœ‰ä¸¤ç§ UITableViewStylePlainï¼šé»˜è®¤æ ·å¼ åœ¨ plain æ¨¡å¼ä¸‹ï¼Œå¦‚æœ tableview æœ‰å¤šä¸ª sectionï¼ˆåˆ†åŒºã€åˆ†ç»„ï¼‰ï¼Œç»„ä¸ç»„ä¹‹é—´é»˜è®¤æ˜¯æ²¡æœ‰é—´è·çš„ã€‚ åŒæ—¶ç»„å¤´æˆ–ç»„å°¾ä¼šæœ‰ sticky æ•ˆæœï¼ˆç²˜æ€§æ•ˆæœã€æ‚¬åœæ•ˆæœï¼‰ï¼Œå³è¡¨æ ¼æ»šåŠ¨æ—¶ç»„å¤´ä¸ç»„å°¾ä¼šè‡ªåŠ¨åœç•™ï¼Œè€Œä¸æ˜¯è·Ÿéšå•å…ƒæ ¼ä¸€åŒç§»åŠ¨ã€‚ åŒæ—¶plainæ¨¡å¼ä¸‹çš„tableViewå¯ä»¥æœ‰ä¸€ä¸ªsectionç´¢å¼•ï¼Œä½œä¸ºä¸€ä¸ªbaråœ¨tableçš„å³è¾¹(ä¾‹å¦‚A ~ Z)ã€‚ä½ å¯ä»¥ç‚¹å‡»ä¸€ä¸ªç‰¹å®šçš„æ ‡ç­¾ï¼Œè·³è½¬åˆ°ç›®æ ‡sectionã€‚ ä¾‹å¦‚ï¼šiOSä¸­ã€Œé€šè®¯å½•ã€å°±æ˜¯å…¸å‹åº”ç”¨ UITableViewStyleGroupedï¼šåˆ†ç»„æ ·å¼ åœ¨ grouped æ¨¡å¼ä¸‹ï¼Œå¦‚æœ tableview æœ‰å¤šä¸ª sectionï¼Œç»„ä¸ç»„ä¹‹é—´é»˜è®¤æ˜¯æœ‰é—´è·çš„ã€‚ åœ¨è¡¨æ ¼æ»šåŠ¨çš„åŒæ—¶ç»„å¤´ä¸ç»„å°¾ä¼šéšä¹‹æ»šåŠ¨ã€ä¸åœç•™ï¼Œä¸ä¼šæœ‰ sticky æ•ˆæœï¼ˆç²˜æ€§æ•ˆæœã€æ‚¬åœæ•ˆæœï¼‰ã€‚ Groupç±»å‹é»˜è®¤è®¾ç½®tableViewç°è‰²èƒŒæ™¯è‰²ï¼Œcellä¸ºç™½è‰²èƒŒæ™¯è‰²ï¼Œsectionå¤–è¾¹ç¼˜è®¾ç½®æµ…ç°è‰²è¾¹æ¡†ï¼Œcellè®¾ç½®æµ…ç°è‰²é—´éš”çº¿ ä¾‹å¦‚ï¼šiOSä¸­ã€Œè®¾ç½®ã€å°±æ˜¯å…¸å‹åº”ç”¨ è¸©å‘è®°å½•ï¼š åœ¨iOS15ä¸­ï¼Œå¦‚æœä½¿ç”¨UITableViewStylePlainæ ·å¼å»ºç«‹TableViewï¼Œå¦‚æœç»™sectionæ·»åŠ ä¸€ä¸ªheaderé‚£ä¹ˆä¼šå‡ºç°ä¸€ä¸ªç°è±¡ï¼Œå°±æ˜¯åœ¨è¿™ä¸ªheaderä¸Šæ–¹ä¼šå‡ºç°ä¸€ä¸ªç©ºç™½åŒºåŸŸã€‚è¿™ä¸ªç©ºç™½åŒºåŸŸæ˜¯ç”±äºåœ¨iOS15ä¸­UITableViewä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å±æ€§sectionHeaderTopPaddingï¼Œè¿™ä¸ªå±æ€§é»˜è®¤æ˜¯22ï¼Œå¦‚æœä¸éœ€è¦è¿™å—ç©ºç™½ï¼Œæ”¹ä¸º0å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š let tableView = UITableView() if #available(iOS 15.0, *) { tableView.sectionHeaderTopPadding = 0 } else { // Fallback on earlier versions } ","date":"2022-08-17","objectID":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:2:1","tags":["iOS"],"title":"iOS-UITableViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"å•å…ƒæ ¼Cell UITableViewçš„æ¯è¡Œæ•°æ®éƒ½æ˜¯ä¸€ä¸ªUITableViewCellï¼š æ¯ä¸ªCellä½¿ç”¨IndexPathæ¥è¡¨ç¤ºä½ç½®ï¼Œæ¢è¨€ä¹‹UITableViewä¸­çš„æ•°æ®åªæœ‰è¡Œçš„æ¦‚å¿µï¼Œæ²¡æœ‰åˆ—çš„æ¦‚å¿µ IndexPathåˆåˆ†ä¸ºsectionå’Œrowï¼Œæ¯ä¸ªsectionä¸ºä¸€ç»„ï¼Œå…¶ä¸­å¯ä»¥åŒ…å«å¤šä¸ªè¡Œrowã€‚ å…³äºCellçš„é‡ç”¨ éœ€è¦æ³¨æ„çš„æ˜¯ TableView å¿…é¡»ä½¿ç”¨é‡ç”¨æœºåˆ¶ ï¼Œå½“cellæ»‘å‡ºå±å¹•çš„æ—¶å€™ cellä¼šè¢«ç³»ç»Ÿå›æ”¶ï¼Œåœ¨ä¸‹é¢cellå°†è¦æ˜¾ç¤ºæ—¶ä¼šè°ƒç”¨ä¹‹å‰å›æ”¶çš„cellï¼Œè¿™æ ·å°±ä¸å¿…æ¯æ¬¡éƒ½åˆ›å»ºé”€æ¯ï¼ŒèŠ‚çœå†…å­˜åŒæ—¶èŠ‚çœæ—¶é—´ï¼Œå¦‚æœä¸ä½¿ç”¨é‡ç”¨æœºåˆ¶ï¼Œæ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„cell æ˜¯éå¸¸æ¶ˆè€—å†…å­˜å’Œæ€§èƒ½çš„ // å¿…é¡»å®ä½œçš„æ–¹æ³•ï¼šCellé‡ç”¨ï¼Œç„¶åè®¾å®šCellçš„å†…å®¹ func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -\u003e UITableViewCell { // å–å¾— tableView ç›®å‰ä½¿ç”¨çš„ cell let cell = tableView.dequeueReusableCell( withIdentifier: \"Cell\", for: indexPath) as UITableViewCell // è®¾ç½®æ˜¾ç¤ºçš„å†…å®¹ if let myLabel = cell.textLabel { myLabel.text = \"xxxx\" } return cell } Cellçš„UIå’Œå¸ƒå±€ UITableViewä¸­æ¯è¡Œæ•°æ®éƒ½æ˜¯ä¸€ä¸ªUITableViewCellï¼Œåœ¨è¿™ä¸ªæ§ä»¶ä¸­ä¸ºäº†æ˜¾ç¤ºæ›´å¤šçš„ä¿¡æ¯ï¼ŒiOSå·²ç»åœ¨å…¶å†…éƒ¨è®¾ç½®å¥½äº†å¤šä¸ªå­æ§ä»¶ä»¥ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚å¦‚æœæˆ‘ä»¬æŸ¥çœ‹UITableViewCellçš„å£°æ˜æ–‡ä»¶å¯ä»¥å‘ç°åœ¨å†…éƒ¨æœ‰ä¸€ä¸ªUIViewæ§ä»¶ï¼ˆcontentViewï¼Œä½œä¸ºå…¶ä»–å…ƒç´ çš„çˆ¶æ§ä»¶ï¼‰ä¸¤ä¸ªUILableæ§ä»¶ï¼ˆtextLabelã€detailTextLabelï¼‰ã€ä¸€ä¸ªUIImageæ§ä»¶ï¼ˆimageViewï¼‰ï¼Œåˆ†åˆ«ç”¨äºå®¹å™¨ã€æ˜¾ç¤ºå†…å®¹ã€è¯¦æƒ…å’Œå›¾ç‰‡ã€‚ å¦‚æœç›´æ¥ä½¿ç”¨UITableViewCellåˆ™é»˜è®¤å…±æœ‰å››ç§Styleè®¾å®šï¼š typedef NS_ENUM(NSInteger, UITableViewCellStyle) { UITableViewCellStyleDefault, // å·¦ä¾§æ˜¾ç¤ºtextLabelï¼ˆä¸æ˜¾ç¤ºdetailTextLabelï¼‰ï¼ŒimageViewå¯é€‰ï¼ˆæ˜¾ç¤ºåœ¨æœ€å·¦è¾¹ï¼‰ UITableViewCellStyleValue1, // å·¦ä¾§æ˜¾ç¤ºtextLabelã€å³ä¾§æ˜¾ç¤ºdetailTextLabelï¼ˆé»˜è®¤è“è‰²ï¼‰ï¼ŒimageViewå¯é€‰ï¼ˆæ˜¾ç¤ºåœ¨æœ€å·¦è¾¹ï¼‰ UITableViewCellStyleValue2, // å·¦ä¾§ä¾æ¬¡æ˜¾ç¤ºtextLabel(é»˜è®¤è“è‰²)å’ŒdetailTextLabelï¼ŒimageViewå¯é€‰ï¼ˆæ˜¾ç¤ºåœ¨æœ€å·¦è¾¹ï¼‰ UITableViewCellStyleSubtitle // å·¦ä¸Šæ–¹æ˜¾ç¤ºtextLabelï¼Œå·¦ä¸‹æ–¹æ˜¾ç¤ºdetailTextLabelï¼ˆé»˜è®¤ç°è‰²ï¼‰,imageViewå¯é€‰ï¼ˆæ˜¾ç¤ºåœ¨æœ€å·¦è¾¹ï¼‰ }; Cellçš„å±æ€§ accessoryView åœ¨contentViewçš„å³è¾¹ï¼Œè¿˜æœ‰ä¸€ä¸ªaccessoryViewï¼Œè¿™ä¸ªViewæ˜¯ç”¨æ¥ä½œä¸ºåŠŸèƒ½é”®ä½¿ç”¨ï¼Œåœ¨iOSä¸­ç§°ä¸ºè®¿é—®å™¨ï¼Œæ”¯æŒæ˜¾ç¤ºä¸åŒçš„å›¾æ ‡ï¼Œç‚¹å‡»å¯ä»¥è§¦å‘ä¸åŒçš„äº‹ä»¶ è¿™ä¸ªViewçš„è®¾å®šæ˜¯é€šè¿‡è®¾ç½®UITableViewCellä¸­çš„accesoryTypeå±æ€§å®Œæˆçš„ï¼š public enum AccessoryType : Int, @unchecked Sendable { case none = 0 // ä¸æ˜¾ç¤ºä»»ä½•å›¾æ ‡ case disclosureIndicator = 1 // è·³è½¬æŒ‡ç¤ºå›¾æ ‡ case detailDisclosureButton = 2 // å†…å®¹è¯¦æƒ…å›¾æ ‡å’Œè·³è½¬æŒ‡ç¤ºå›¾æ ‡ case checkmark = 3 // å‹¾é€‰å›¾æ ‡ @available(iOS 7.0, *) case detailButton = 4 // å†…å®¹è¯¦æƒ…å›¾æ ‡ } é»˜è®¤æƒ…å†µå¦‚å›¾æ‰€ç¤ºï¼š Cellçš„åˆ†å‰²çº¿ // è®¾ç½®åˆ†å‰²çº¿ç«¯è·ï¼Œè¿™é‡Œè¡¨ç¤ºseparatorç¦»å·¦è¾¹å’Œå³è¾¹å‡80åƒç´  myTableView.separatorInset = UIEdgeInsets(top: 0, left: 40, bottom: 0, right: 40) myTableView.separatorStyle = .singleLine // åˆ†å‰²çº¿çš„æ ·å¼ myTableView.separatorColor = .red // åˆ†å‰²çº¿é¢œè‰² éšè—éƒ¨åˆ†Cellçš„åˆ†å‰²çº¿ å› ä¸ºTableViewçš„é£æ ¼è®¾ç½®æ˜¯é’ˆå¯¹æ•´ä¸ªtableViewçš„ï¼Œå¦‚æœè®¾ç½®myTableView.separatorStyle = .singleLineï¼Œåˆ™æ‰€æœ‰çš„celléƒ½ä¼šæœ‰åˆ†å‰²çº¿ï¼Œå¦‚æœè¦éšè—éƒ¨åˆ†cellçš„è¯å°±éœ€è¦ä¸€ç‚¹ç‚¹å°trick åœ¨è¦æ˜¾ç¤ºcellçš„æ—¶å€™å°†cellçš„åˆ†å‰²çº¿insetå·¦å³å„è®¾ä¸ºcellå®½åº¦çš„ä¸€åŠ func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) { if indexPath.section == 1 { cell.separatorInset = .init(top: 0, left: cell.bounds.width / 2, bottom: 0, right: cell.bounds.width / 2) } } Cellé€‰ä¸­æ ·å¼ // cellçš„é€‰ä¸­æ ·å¼ cell.selectionStyle = .default // é»˜è®¤ç‚¹å‡»æ—¶ä¸ºç°è‰² cell.selectionStyle = .none // è®¾ç½®ä¸ºnoneç‚¹å‡»æ—¶æ— ååº” // è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œå…¶å®è¿˜æœ‰.greyå’Œ.blueä½†æ•ˆæœå’Œ.defaultæ˜¯ç›¸åŒçš„ // åœ¨iOS7çš„æ—¶å€™æ›´æ”¹äº†ï¼Œç„¶åå¦‚æœæƒ³è¦è®¾ç½®ä¸ºå…¶ä»–é¢œè‰²ï¼Œåˆ™è¦è®¾ç½®selectedBackgroundView // cellçš„é€‰ä¸­æ ·å¼ä¸ºå…¶ä»–é¢œè‰² cell.selectionStyle = .default cell.selectedBackgroundView = UIView() cell.selectedBackgroundView?.backgroundColor = .blue UITableViewçš„ä½¿ç”¨ï¼š åœ¨controllerä¸­å¼•å…¥UITableViewç±»å‹çš„å˜é‡ï¼Œç„¶åè®¾ç½®ç›¸åº”çš„æ•°æ®æºå’Œä»£ç†ï¼š tableView.delegate = self tableView.datasource = self è¡¨æ ¼åˆ†ç»„sectionçš„DataSourceæ–¹æ³•çš„è°ƒç”¨æ—¶åºï¼š DataSourceæ•°æ®æºï¼šéœ€è¦åœ¨Controllerå¼•å…¥UITableViewDataSourceåè®® è¿”å›è¡¨æ ¼è§†å›¾çš„Sectionæ•°ï¼šnumberOfSections func numberOfSections(in tableView: UITableView) -\u003e Int { // è¿”å›sectionçš„æ•°é‡ return 1 } è®¾ç½® sectionä¸­çš„rowè¡Œçš„ä¸ªæ•°ï¼š func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -\u003e Int { // è¿”å›Sectionä¸­çš„rowè¡Œæ•° return 1 } è¿”å›Sectionçš„å¤´éƒ¨Viewï¼š func tableView(_ tableView: UITableView, viewForHeaderInSection section: Int) -\u003e UIView? { // è¿”å›å¯¹åº”Sectionçš„å¤´éƒ¨ return UIView() } è¿”å›Sectionçš„å°¾éƒ¨Viewï¼š func tableView(_ tableView: UITableView, viewForFooterInSection section: Int) -\u003e UIView? { // è¿”å›å¯¹åº”Sectionçš„å°¾éƒ¨ return UIView() } UITableViewDelegateï¼šéœ€è¦åœ¨Controllerå¼•å…¥UITableViewDelegateåè®® è¿”å›æ¯ä¸ªcellå¯¹åº”çš„è¡Œé«˜ï¼š func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -\u003e CGFloat { if indexPath.section == 0 { // section0 çš„cellè¡Œé«˜ä¸º70 return 70 } else if indexPath.section == 1 { // section1 çš„cellè¡Œé«˜ä¸º140 return 140 } // é»˜è®¤è¡Œé«˜ return 106 } è¿”å›Sectionå¤´éƒ¨çš„é«˜åº¦ï¼š func tableView(_ tableView: UITableView, heightForHeaderInSection section: Int) -\u003e CGFloat { if section == 0 { return 0.01 } if (isShowUrlCell \u0026\u0026 section == 5) || (!isShowUrlCell \u0026\u0026 section ==","date":"2022-08-17","objectID":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:2:2","tags":["iOS"],"title":"iOS-UITableViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uitableview%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"UIStackViewä½¿ç”¨æŒ‡å— ","date":"2022-08-17","objectID":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:0:0","tags":["iOS"],"title":"iOS-UIStackViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"æ¦‚è¿° ä¸€èˆ¬é‡åˆ°ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„æ§ä»¶è¿›è¡Œä¸€è¡Œæˆ–ä¸€åˆ—å¸ƒå±€æ—¶ï¼Œæˆ–è¡Œåˆ—ç»„åˆæˆå¡ç‰‡å½¢å¼çš„å¸ƒå±€æ—¶ï¼Œä½¿ç”¨ UIStackView æ˜¯æœ€ç®€å•æœ‰æ•ˆçš„æ–¹æ¡ˆï¼Œä¾‹å¦‚ä¸€äº› tab çš„å±•ç¤ºæ—¶ï¼Œå¯ç®€å•ä½¿ç”¨ UIStackView + UIScrollView å®ç°ã€‚å½“ç„¶è¦æ’åˆ—çš„æ§ä»¶æ¯”è¾ƒå¤šï¼Œä¸”éœ€è¦åˆ†é¡µåŠ è½½çš„æ—¶å€™ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ UICollectionViewã€‚ æ‰€ä»¥è¿™é‡Œçš„ Stack ä¸æ˜¯å †æ ˆçš„æ„æ€ï¼Œä¹Ÿä¸å­˜åœ¨å‹æ ˆã€å¼¹æ ˆçš„æ“ä½œï¼Œå¯ä»¥ç†è§£ä¸ºâ€œå †å â€ã€‚UIStackViewå®ç°äº†Uç•Œé¢Ã—è½´å’Œä¸«è½´æ–¹å‘ä¸Šçš„å †å ã€‚ç±»æ¯”ç†è§£ï¼ŒSwiftul å¸¦æ¥çš„ ZStack å°±æ˜¯Zè½´æ–¹å‘ä¸Šçš„è§†å›¾å †å ã€‚ ä¸€å›¾æ¦‚ä¹‹ï¼š åŸºæœ¬è¦ç‚¹ï¼š åŸºäº Auto Layout å¸ƒå±€å­è§†å›¾ã€‚UIStackView è‡ªèº«ä¹Ÿéœ€è¦ä½¿ç”¨ Auto Layout å¸ƒå±€ï¼Œä½¿ç”¨ frame å¸ƒå±€å¯èƒ½æ•ˆæœä¸ä¸€å®šç¬¦åˆé¢„æœŸã€‚ å¼€å‘è€…è´Ÿè´£å®šä¹‰ UIStackView çš„ä½ç½®å’Œå°ºå¯¸ï¼ˆå¯é€‰ï¼‰ï¼ŒUIStackView è‡ªèº«ç®¡ç†å­è§†å›¾çš„å†…å®¹å¸ƒå±€å’Œè‡ªèº«å¤§å°ï¼Œå³è‡³å°‘ç»™ UIStackView æ·»åŠ ä¸¤ä¸ªé‚»è¾¹çš„ä½ç½®çº¦æŸã€‚ å¯åŠ¨æ€ä¿®æ”¹æ‰€æœ‰å±æ€§ã€‚ é˜„å‰²äº† UView åŸºç±»çš„ä¸€äº›ç‰¹æ€§ï¼Œå¦‚è®¾ç½® backgroundColor UIStackView æ˜¯ Apple åŸºäº Flexbox æ€æƒ³æ¥å®ç°çš„å¸ƒå±€ï¼Œè™½ç„¶æ˜¯ä»¥ä¸€ä¸ªæ§ä»¶ ï¼ˆUlView å­ç±»ï¼‰å‘ˆç°ï¼Œä½†å®ƒåšçš„æ›´å¤šæ˜¯å¸ƒå±€å…¶åŠ å…¥å­è§†å›¾ã€‚è¿™ç§å¸ƒå±€æ€æƒ³æ›´æ¥è¿‘ç‰©ç†ä¸–ç•Œçš„ç›´è§‰ã€‚ Flexbox åœ¨2009 å¹´è¢«W3C æå‡ºï¼Œå¯ä»¥å¾ˆç®€å•ã€å®Œæ•´åœ°å®ç°å„ç§é¡µé¢å¸ƒå±€ï¼Œè€Œä¸”è¿˜æ˜¯å“åº”å¼çš„ï¼Œå¼€å§‹è¢«åº”ç”¨äºå‰ç«¯é¢†åŸŸï¼Œç›®å‰æ‰€æœ‰æµè§ˆå™¨éƒ½å·²æ”¯æŒã€‚åæ¥é€šè¿‡ React Native å’Œ Weexç­‰æ¡†æ¶ï¼Œå®ƒè¢«å¸¦å…¥åˆ°å®¢æˆ·ç«¯å¼€å‘ä¸­ï¼ŒåŒæ—¶æ”¯æŒäº† i0s å’Œ Androidã€‚æƒ³äº†è§£ Flexbax çš„è¯¦ç»† CSSå¸ƒå±€ï¼Œå¯å‚é˜… Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡-é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—ã€‚ è¦æƒ³æ›´ç›´è§‚åœ°ä½“éªŒæŠŠç© Flexbox å¸ƒå±€ï¼Œå¯å‚é˜…ä»¥ä¸‹é“¾æ¥ï¼š display: flex Flexbox Froggy - A game for learning CSS flexbox Flexy Boxes â€” CSS flexbox playground and code generation tool è¦æƒ³åœ¨iOSå®Œæ•´ä½“éªŒ Flexbox å¸ƒå±€ï¼Œå¯ä½¿ç”¨ Texture ä¸­çš„ ASStackLayoutSpecã€‚ä¸€äº›èªæ˜çš„å¼€å‘è€…é€šè¿‡UICollectionViewLayoutä¹Ÿå®ç°äº†ç®€å•çš„ Flexbox å¸ƒå±€ï¼Œå¦‚ UICollectionViewFlexboxLayouto SwiftUlä¹Ÿå¼•å…¥äº†äº› Flexbox å¸ƒå±€ï¼Œå¦‚ HStackã€ vStack å’Œ ZStackï¼Œå¯å‚é˜… Building layouts with UIStackViews ç®€å•ä½“éªŒå…¶ä¸ºå¸ƒå±€å¸¦æ¥çš„ä¾¿åˆ© ","date":"2022-08-17","objectID":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:1:0","tags":["iOS"],"title":"iOS-UIStackViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"å†…å®¹è‡ªé€‚åº”è§„åˆ™ ä¸€å¥è¯æ¦‚æ‹¬ï¼šsubview content size + spacingã€‚ UIStackView æ²¿è½´æ–¹å‘é•¿åº¦ = æ‰€æœ‰æ’åˆ—å­è§†å›¾å¤§å°ä¹‹å’Œ + å­è§†å›¾ä¹‹é—´çš„é—´è·æ€»å’Œ UIStackView æ­£äº¤è½´æ–¹å‘ï¼ˆå‚ç›´äºè½´æ–¹å‘ï¼‰é•¿åº¦ = æœ€å¤§æ’åˆ—å­è§†å›¾çš„é•¿åº¦ è‹¥ isLayoutwarginsReLativeArrangement ä¸º trueï¼Œä¸Šè¿°çš„é•¿åº¦è¿˜ä¼šåŒ…å«ç›¸å…³çš„ layoutMargins ä¸Šé¢æ‰€è¯´çš„é•¿åº¦éƒ½æ˜¯æ‹Ÿåˆå¤§å° ï¼ˆfitting size) æ³¨æ„: è¿™é‡Œçš„å­è§†å›¾å¤§å°æ˜¯è§†å›¾çš„ content sizeï¼Œå†…å®¹å¤§å°ï¼Œæ˜¯æŒ‡ Auto Layout çº¦æŸè®¡ç®—ä¹‹åçš„ sizeï¼Œæ‰€ä»¥ç›´æ¥è®¾ç½® frameæ˜¯æ— æ•ˆçš„ï¼Œå¿…é¡»é€šè¿‡é‡å†™ intrinsieContentsize å±æ€§æˆ–ç»™å­è§†å›¾çš„å®½é«˜æ·»åŠ  Auto Layout çº¦æŸ è¿™é‡Œè¿˜éšå«äº†ä¸€äº›æ½œè§„åˆ™ï¼š è®© UIStackView èƒ½è‡ªé€‚åº”å­è§†å›¾å¤§å°çš„å‰ææ˜¯å­è§†å›¾è¦æœ‰ content sizeã€‚ æœ€ç»ˆå­è§†å›¾çš„ size ä¹Ÿä¸ä¸€å®šç­‰äº content sizeï¼Œå½“ UIStackView è‡ªèº«è®¾ç½®äº†å®½é«˜çº¦æŸï¼Œå…¶ä¼šä¸ºäº†å¡«å……ç©ºé—´ä¼šå¯¹å­è§†å›¾è¿›è¡Œæ‹‰ä¼¸æˆ–æ”¶ç¼©ã€‚ è‡ªé€‚åº”å­è§†å›¾å¤§å°æ„å‘³ç€å…¶ä¸å…è®¸å­è§†å›¾æº¢å‡ºå…¶è‡ªèº«ã€‚è¿™ä¸ CSS flexbox çš„ flex-wrap è¡¨ç°æœ‰åˆ«ã€‚ å¦å¤– UIStackView çš„è¿™äº›å¸ƒå±€å±æ€§ä¼šç›´æ¥å½±å“å…¶è‡ªé€‚åº”çš„å¤§å°ï¼š axisï¼šå®šä¹‰äº†å †å çš„è½´æ–¹å‘ï¼Œæ˜¯åœ¨å‚ç›´æ–¹å‘è¿˜æ˜¯æ°´å¹³æ–¹å‘è¿›è¡Œå †å ã€‚ distributionï¼šå®šä¹‰äº†è½´æ–¹å‘ä¸Šçš„å­è§†å›¾å¸ƒå±€ã€‚ alignmentï¼šå®šä¹‰äº†è½´æ­£äº¤æ–¹å‘ä¸Šçš„å­è§†å›¾å¸ƒå±€ã€‚ spacingï¼šå®šä¹‰äº†è½´æ–¹å‘ä¸Šçš„å­è§†å›¾ä¹‹é—´çš„æœ€å°é—´è·ã€‚ isBaselineRelativeArrangementï¼šå®šä¹‰äº†è§†å›¾ä¹‹é—´çš„å‚ç›´é—´è·æ˜¯å¦ä»åŸºçº¿æµ‹é‡ isLayoutMarginsRelativeArrangementï¼šå®šä¹‰äº†æ˜¯å¦è¦åŸºäºå­è§†å›¾çš„ LayoutMargins æ¥å¸ƒå±€ è‹¥ä¿®æ”¹ä¸Šè¿°å±æ€§æ— æ³•è¾¾åˆ°ä½ çš„é¢„æœŸæ•ˆæœï¼Œåˆ™ä¼˜å…ˆæ£€æŸ¥ Xcode æ§åˆ¶å°æ˜¯å¦è¾“å‡ºäº† Auto Layout çº¦æŸå†²çªçš„é”™è¯¯æ—¥å¿—ï¼Œä»ä¸­æ£€æŸ¥éœ€è¦ä¿®æ”¹çš„å±æ€§æˆ–è¡¥å……çš„çº¦æŸã€‚ ","date":"2022-08-17","objectID":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:2:0","tags":["iOS"],"title":"iOS-UIStackViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"NSLayoutConstraint.Axis é»˜è®¤ä¸ºhorizontalæ°´å¹³æ–¹å‘ ","date":"2022-08-17","objectID":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:2:1","tags":["iOS"],"title":"iOS-UIStackViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"UIStackView.Distribution å®šä¹‰æ²¿ UIStackView è½´æ–¹å‘çš„å­è§†å›¾çš„å¤§å°å’Œä½ç½®çš„å¸ƒå±€ã€‚ é™¤äº† fillEqually ä»¥å¤–çš„ distributionï¼ŒUStackView åœ¨æ²¿è½´æ–¹å‘è®¡ç®—å°ºå¯¸æ—¶ï¼Œä¼šä½¿ç”¨æ¯ä¸ªå­è§†å›¾çš„ intrinsicContentsize å±æ€§ã€‚è€Œ fiLLEqually ä¼šç›¸ç­‰è°ƒæ•´å­è§†å›¾çš„å¤§å°ï¼Œä½¿å…¶åœ¨è½´æ–¹å‘çš„é•¿åº¦æ˜¯ä¸€è‡´çš„ï¼Œå¦‚æœå¯èƒ½ï¼ŒUIStackView ä¼šæ‹‰ä¼¸æ‰€æœ‰å­è§†å›¾ï¼Œä»¥åŒ¹é…è½´æ–¹å‘æœ€å¤§å†…å®¹å¤§å°çš„è§†å›¾ã€‚ fill é»˜è®¤æƒ…å†µï¼ŒUIStackView è°ƒæ•´å…¶å­è§†å›¾çš„å¤§å°,ä»¥å¡«å……è½´æ–¹å‘ä¸Šçš„å¯ç”¨ç©ºé—´ å½“å­è§†å›¾å¡ä¸è¿› UIStackView æ—¶,UIStackView æ ¹æ®å…¶æŠ—å‹ä¼˜å…ˆçº§ (compression resistance priority) æ”¶ç¼©è§†å›¾ å½“å­è§†å›¾æ²¡æœ‰å¡æ»¡UIStackViewæ—¶ï¼ŒUIStackViewæ ¹æ®å…¶æ‹¥æŠ±ä¼˜å…ˆçº§(hugging priority)æ‹‰ä¼¸æ—¶å›¾ å½“å­˜åœ¨æ­§ä¹‰æ—¶,UIStackView æ ¹æ®å­è§†å›¾åœ¨ arrangedSubviews ä¸­çš„ç´¢å¼•è°ƒæ•´å­è§†å›¾çš„å¤§å° fillEqually UIStackView è°ƒæ•´å…¶å­è§†å›¾çš„å¤§å°ï¼Œä»¥å¡«å……è½´æ–¹å‘ä¸Šçš„å¯ç”¨ç©ºé—´ã€‚å­è§†å›¾ä¼šæ‹‰ä¼¸è°ƒæ•´å¤§å°ï¼ˆåŒ¹é…æœ€å¤§çš„å­è§†å›¾ï¼‰ï¼Œä»¥ä¿æŒè½´æ–¹å‘ä¸Šçš„å¤§å°éƒ½ç›¸ç­‰ã€‚ fillPropertionlly UIStackView è°ƒæ•´å…¶å­è§†å›¾çš„å¤§å°ï¼Œä»¥å¡«å……è½´æ–¹å‘ä¸Šçš„å¯ç”¨ç©ºé—´ã€‚è§†å›¾æ ¹æ®å…¶æ²¿ UIStackView è½´çš„å†…åœ¨å†…å®¹å¤§å°æŒ‰æ¯”ä¾‹è°ƒæ•´å¤§å°ã€‚ equalSpacing UIStackView æ”¾ç½®æ’åˆ—å­è§†å›¾ï¼Œä»¥å¡«å……è½´æ–¹å‘ä¸Šçš„å¯ç”¨ç©ºé—´ã€‚ å½“æ’åˆ—çš„è§†å›¾æ²¡æœ‰å¡«å…… UIStackView æ—¶ï¼šUIstackview ä¼šå‡åŒ€åœ°å¡«å……è§†å›¾ä¹‹é—´è¡Œé—´è·ã€‚å³æ­¤æ—¶çš„ spaicing åªé™å®šäº†æœ€å°çš„é—´è·ã€‚ å½“å­è§†å›¾å¡ä¸è¿› UIStackView æ—¶ï¼ŒUIStackView ä¼šæ ¹æ®å…¶æŠ—å‹ä¼˜å…ˆçº§æ”¶ç¼©è§†å›¾ã€‚ equalCentering å¯¹â¼¦è§†å›¾ä¸­ç‚¹ç­‰è·å¸ƒå±€ï¼ŒåŒæ—¶ä¿æŒâ¼¦è§†å›¾ä¹‹é—´çš„é—´è·ã€‚åŒæ ·ï¼Œæ­¤æ—¶çš„ spaicing åªé™å®šäº†æœ€â¼©çš„é—´è·ã€‚ å½“â¼¦è§†å›¾å¡ä¸è¿› UIStackView æ—¶ï¼ŒUIStackView æ”¶ç¼©é—´è·ï¼Œç›´åˆ°è¾¾åˆ° spaicing å€¼ã€‚è‹¥â¼¦è§†å›¾ä»å¡ä¸è¿›UIStackViewï¼Œåˆ™ä¼šæ ¹æ®å…¶æŠ—å‹ä¼˜å…ˆçº§æ”¶ç¼©å­è§†å›¾ å½“å­˜åœ¨æ­§ä¹‰æ—¶ï¼ŒUIStackView ä¼šæ ¹æ®å…¶åœ¨ arrangedsubviews ä¸­çš„ç´¢å¼•æ”¶ç¼©å­è§†å›¾ ä¸ºäº†ä¿æŒâ¼¦è§†å›¾å†…å®¹â¼¤â¼©ï¼ŒUIStackView ä¼šçªç ´ä¸­ç‚¹ç­‰è·å¸ƒå±€ã€‚åŒæ ·ï¼Œä¸ºä¿æŒâ¼¦è§†å›¾é—´çš„æœ€â¼©é—´è·ï¼Œ UIStackView ä¼šå‹ç¼©â¼¦è§†å›¾çš„å†…å®¹â¼¤â¼©ã€‚ ","date":"2022-08-17","objectID":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:2:2","tags":["iOS"],"title":"iOS-UIStackViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"UIStackView.Alignment å®šä¹‰å‚ç›´äº UIStackView è½´æ–¹å‘çš„å­è§†å›¾å¸ƒå±€ã€‚ å¯¹äºé™¤ fill ä¹‹å¤–çš„æ‰€æœ‰ alignmentï¼ŒUIStackView åœ¨è®¡ç®—è½´æ­£äº¤æ–¹å‘çš„å¤§å°æ—¶ä½¿ç”¨æ¯ä¸ªå­è§†å›¾çš„ intrinsiccontentsize å±æ€§ã€‚fill åˆ™è°ƒæ•´æ‰€æœ‰å­è§†å›¾çš„å¤§å°ï¼Œä»¥å¡«å……è½´æ­£äº¤æ–¹å‘ä¸Šçš„å¯ç”¨ç©ºé—´ï¼Œå¦‚æœå¯èƒ½ï¼ŒUIStackView ä¼šæ‹‰ä¼¸æ‰€æœ‰å­è§†å›¾ï¼Œä»¥åŒ¹é…è½´æ­£äº¤æ–¹å‘ä¸Šæœ€å¤§å†…åœ¨å¤§å°çš„è§†å›¾ã€‚ fill é»˜è®¤ã€‚UIStackView è°ƒæ•´å…¶å­è§†å›¾å¤§å°ï¼Œä»¥å¡«å……è½´æ­£äº¤æ–¹å‘ä¸Šçš„å¯ç”¨ç©ºé—´ã€‚ center UIStackView æŠŠâ¼¦è§†å›¾ä¸­ç‚¹æ²¿è½´å¯¹â»¬ï¼Œå³å‚ç›´æ–¹å‘å±…ä¸­å¯¹â»¬ã€‚ leadingï¼šæ¨ªè½´æ—¶ä¹Ÿå¯ä»¥ç”¨top UIStackViewæŠŠå­è§†å›¾æ²¿ç€å‰è¾¹ç¼˜å¯¹é½ trailingï¼šæ¨ªè½´æ—¶ä¹Ÿå¯ä»¥ç”¨bottom fisrtBaseline ä»…æ¨ªè½´æœ‰æ•ˆï¼ŒUIStackViewæ ¹æ®é¦–ä¸ªåŸºçº¿å¯¹é½æ’åˆ—å­è§†å›¾ lastBaseline ä»…çºµè½´æœ‰æ•ˆï¼ŒUIStackViewæ ¹æ®æœ«å°¾åŸºçº¿å¯¹é½æ’åˆ—å­è§†å›¾ ","date":"2022-08-17","objectID":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:2:3","tags":["iOS"],"title":"iOS-UIStackViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"Spacingé—´è· å›ºå®šé—´è· var spacing: CGFloat { get set } é»˜è®¤ä¸º0.0ï¼Œæ­¤å±æ€§å®šä¹‰äº†åœ¨UIStackViewDistribution.fillå­è§†å›¾ä¹‹é—´çš„ä¸¥æ ¼é—´è·ï¼Œä¹Ÿæ˜¯UIStackView.Distribution.equalSpacing å’Œ UIStackView.Distribution.equalCentering çš„æœ€å°é—´è· ä½¿ç”¨è´Ÿå€¼ä¼šé‡å å­è§†å›¾ï¼Œå…¶å †å å±‚çº§æŒ‰å­è§†å›¾çš„å±‚çº§ç´¢å¼•æ’åˆ— æ›´è¿›ä¸€æ­¥ï¼ŒiOS 11.0+ è¿˜å¢åŠ äº†è®¾ç½®è‡ªå®šä¹‰é—´è·çš„æ–¹æ³• // Applies custom spacing after the specified view. func setCustomSpacing(_ spacing: CGFloat, after arrangedSubview: UIView) func customSpacing(after arrangedSubview: UIView) -\u003e CGFloat é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥è®¾ç½®å­è§†å›¾ä¹‹é—´çš„é—´è·ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåªå¯ä»¥è®¾ç½®ä¸¤ä¸ªsubViewä¹‹é—´çš„é—´è·ï¼Œè€Œä¸å¯ä»¥è®¾ç½®ä¸€ä¸ªsubViewåˆ°supperViewçš„è¾¹ç¼˜çš„è·ç¦» è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡ç»™è¾¹ç¼˜ä½ç½®æ·»åŠ ä¸€ä¸ªå ä½è§†å›¾çš„æ–¹å¼æ¥è¿›è¡Œç›¸å…³è®¾ç½®ï¼Œè¿™é‡Œç®€å•å°è£…ä¸€ä¸ªå ä½è§†å›¾ï¼š import UIKit /// è‡ªå®šä¹‰å†…å®¹å°ºå¯¸è§†å›¾ public class SizeView: UIView { public var size: CGSize = .zero required init?(coder: NSCoder) { super.init(coder: coder) commonInit() } override init(frame: CGRect) { super.init(frame: frame) commonInit() } private func commonInit() { isUserInteractionEnabled = false } public override var intrinsicContentSize: CGSize { size } } public extension SizeView { convenience init(size: CGSize, color: UIColor? = nil) { self.init(frame: .zero) self.size = size backgroundColor = color } /// å°½å¯èƒ½å¤§ static func expanded(width: CGFloat = .greatestFiniteMagnitude, height: CGFloat = .greatestFiniteMagnitude, color: UIColor? = nil) -\u003e SizeView { SizeView(size: CGSize(width: width, height: height), color: color) } /// å°½å¯èƒ½å° static func shrinked(width: CGFloat = 0, height: CGFloat = 0, color: UIColor? = nil) -\u003e SizeView { SizeView(size: CGSize(width: width, height: height), color: color) } } éŸ³ä¹å…¥å£ä»£ç å¦‚ä¸‹ï¼š noMusicStackView.then { let musicIconView = makeMusicIconView() // ä½¿ç”¨å ä½è§†å›¾æ·»åŠ å·¦ä¾§é—´è· $0.addArrangedSubview(SizeView.shrinked(width: 12)) $0.addArrangedSubview(musicIconView) // ä½¿ç”¨è‡ªå®šä¹‰é—´è· API è®¾ç½® sub view é—´çš„é—´è· $0.setCustomSpacing(6, after: musicIconView) let addLabel = self.addLabel addLabel.font = UI.textFont addLabel.textColor = UI.textColor addLabel.layer.lv.setupShadow(color: UI.textShadow.color, offset: UI.textShadow.offset, radius: UI.textShadow.radius) $0.addArrangedSubview(addLabel) // ä½¿ç”¨å ä½è§†å›¾æ·»åŠ å³ä¾§é—´è· $0.addArrangedSubview(SizeView.shrinked(width: 12)) } æ•ˆæœï¼š ","date":"2022-08-17","objectID":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:2:4","tags":["iOS"],"title":"iOS-UIStackViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"å­è§†å›¾ç®¡ç† func addArrangedSubview(_ view: UIView) var arrangedSubviews: [UIView] { get } func insertArrangedSubview(_ view: UIView, at stackIndex: Int) func removeArrangedSubview(_ view: UIView) ä¸Šè¿°æ‰€æœ‰æ–¹æ³•éƒ½ä¼šä½œç”¨äºarrangedSubviewsæ•°ç»„ï¼Œè°ƒç”¨UIStackViewçš„addArrangedSubview(_:)æ—¶ï¼Œæ·»åŠ çš„è§†å›¾é™¤äº†æ·»åŠ åˆ° arrangedSubviews ä¸­ï¼ŒåŒæ—¶ä¹Ÿä¼šæ·»åŠ åˆ°åŸºç±»çš„ subviews ä¸­ï¼Œå³æˆä¸ºå­è§†å›¾ã€‚ ç”±äº UIStackView å†…éƒ¨ä¼šç¡®ä¿ arrangedSubviews æ˜¯ subviews çš„å­é›†ï¼Œæ‰€ä»¥å³ä½¿åœ¨è°ƒç”¨ addArrangedSubview(_:) å‰è°ƒç”¨äº†åŸºç±»çš„ addSubview(_:)ï¼Œä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå½±å“ï¼Œä¹Ÿä¸ä¼šæ”¹å˜å…¶åœ¨ arrangedSubviews ä¸­çš„é¡ºåºã€‚ä½†å¿…é¡»è¦è°ƒç”¨ addArrangedSubview(_:) æ¥æ·»åŠ ç®¡ç†çš„å­è§†å›¾ï¼Œå¦åˆ™è®¾ç½® UIStackView çš„å„ä¸ªå±æ€§å°†æ— æ³•ä½œç”¨äºæ·»åŠ çš„å­è§†å›¾ã€‚ ç§»é™¤è§†å›¾çš„æ—¶å€™è¦æ³¨æ„ï¼ŒremoveArrangedSubview(_:) åªæ˜¯ä» arrangedSubviews ä¸­ç§»é™¤å­è§†å›¾ï¼Œå³ç§»é™¤çš„å­è§†å›¾ä¸å— UIStackView ç®¡ç†ï¼Œä½†å…¶è¿˜åœ¨åŸºç±»çš„ subviews ä¸­ï¼Œå³è¿˜åœ¨è§†å›¾å±‚çº§ä¸­ã€‚æ‰€ä»¥è¦ç›´æ¥ä»å±‚çº§ä¸­ç§»é™¤å­è§†å›¾ï¼Œå¯ç›´æ¥ä½¿ç”¨åŸºç±»çš„ removeFromSuperview() æ–¹æ³•ã€‚ ","date":"2022-08-17","objectID":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:3:0","tags":["iOS"],"title":"iOS-UIStackViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["iOS"],"content":"å¸ƒå±€ç®¡ç† UIStackView ä¼šåŠ¨æ€å“åº”ä»¥ä¸‹æ“ä½œï¼Œå¹¶è‡ªåŠ¨æ›´æ–°å¸ƒå±€ï¼š æ·»åŠ ã€åˆ é™¤æˆ–æ’å…¥åˆ° arrangedSubviewsã€‚ ä¿®æ”¹ UIStackView å®šä¹‰çš„æ‰€æœ‰å±æ€§ã€‚ ä¿®æ”¹å­è§†å›¾çš„ isHidden å±æ€§ã€‚å…¶æ•ˆæœè·Ÿ UIView å¯¹å­è§†å›¾çš„æ•ˆæœä¸ä¸€è‡´ï¼Œå½“å€¼ä¸º true æ—¶ UIStackView ä¼šé‡æ–°è®¡ç®—å¸ƒå±€ï¼ˆè·Ÿç§»é™¤è§†å›¾æ•ˆæœä¸€è‡´ï¼‰ï¼Œè¿˜ç”šè‡³é»˜è®¤æ·»åŠ äº†åŠ¨ç”»ï¼ˆè½´æ–¹å‘æ”¶ç¼©æ•ˆæœï¼‰ï¼Œè€Œ UIView å¯¹å­è§†å›¾ isHidden ä¸º true æ—¶ä¸ä¼šæœ‰å¸ƒå±€æ›´æ–°ï¼Œæ›´ä¸ä¼šæœ‰åŠ¨ç”»ã€‚ å¤„ç†ç¬¬ 1 ç‚¹ç®¡ç† arrangedSubviews çš„å‡ ä¸ªæ–¹æ³•ï¼Œç¬¬ 2ã€3 ç‚¹æ¶‰åŠçš„å±æ€§éƒ½å¯ä»¥æ·»åŠ åŠ¨ç”»ã€‚å¦å¤–è¦æ§åˆ¶å­è§†å›¾ isHidden çš„æ—¶é•¿ï¼Œå¯ä»¥æ”¾åˆ° animate(withDuration:animations:) ä¸­æ§åˆ¶ã€‚ ","date":"2022-08-17","objectID":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/:3:1","tags":["iOS"],"title":"iOS-UIStackViewä½¿ç”¨æŒ‡å—","uri":"/posts/ios-uistackvie%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"å­—ç¬¦ä¸²å¤„ç† ","date":"2022-06-12","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95/:1:0","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"å­—ç¬¦ä¸²ç®—æ³•","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"KMP è®²è§£è§†é¢‘ï¼šæœ€æµ…æ˜¾æ˜“æ‡‚çš„ KMP ç®—æ³•è®²è§£ vector\u003cint\u003e strStr(string\u0026 str, string\u0026 pattern) { int m = str.length(); int n = pattern.length(); // æ„é€ nextæ•°ç»„ï¼Œnextæ•°ç»„æ˜¯æ ¹æ®æ¨¡ç‰ˆå­—ç¬¦ä¸²åˆ›å»ºçš„ï¼Œé»˜è®¤ä¸º-1ï¼Œå³æ²¡æœ‰å‰ç¼€èƒ½ä¸ç°åœ¨æ„æˆçš„åç¼€è¿›è¡ŒåŒ¹é… vector\u003cint\u003e ne(n, -1); // ä»ä¸‹æ ‡1å¼€å§‹æ„é€ ï¼Œå› ä¸ºä¸‹æ ‡0ä¸€å®šæ²¡æœ‰å‰ç¼€ // iä»£è¡¨çš„æ˜¯åç¼€ï¼Œjä»£è¡¨çš„æ˜¯å‰ç¼€ for (int i = 1, j = -1; i \u003c n; ++i) { // æ‰¾åˆ°ç¬¬ä¸€ä¸ªpattern[i] == pattern[j + 1]çš„ä¸‹æ ‡j while (j \u003e= 0 \u0026\u0026 pattern[i] != pattern[j + 1]) j = ne[j]; // å¦‚æœç›¸åŒå³è¯´æ˜å‰åç¼€ç›¸åŒ¹é… if (pattern[i] == pattern[j + 1]) ++j; // å¾—åˆ°j ne[i] = j; } // anså­˜å‚¨æ‰€æœ‰åŒ¹é…ä¸Šçš„é¦–å­—ç¬¦ä¸‹æ ‡ vector\u003cint\u003e ans; // iæ˜¯æ™®é€šå­—ç¬¦ä¸²ä¸‹æ ‡ï¼Œjæ˜¯æ¨¡ç‰ˆå­—ç¬¦ä¸²ä¸‹æ ‡ï¼Œå› ä¸ºéœ€è¦å›é€€ï¼Œjåˆå§‹åŒ–ä¸º-1 for (int i = 0, j = -1; i \u003c m; ++i) { while (j \u003e= 0 \u0026\u0026 str[i] != pattern[j + 1]) j = ne[j]; // str[i] == pattern[j + 1]åŒ¹é…ä¸Šäº†ï¼ŒjåŠ 1 if (j + 1 \u003c n \u0026\u0026 str[i] == pattern[j + 1]) ++j; // j + 1 == nä»£è¡¨åŒ¹é…å®Œæˆï¼Œé¦–å­—ç¬¦ä¸‹æ ‡ä¸ºi - n + 1 if (j + 1 == n) ans.push_back(i - n + 1); } return ans; } ","date":"2022-06-12","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95/:1:1","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"å­—ç¬¦ä¸²ç®—æ³•","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"å­—å…¸æ ‘Trie å­—å…¸æ ‘Trieæ˜¯ä¸€ç§é«˜æ•ˆåœ°å­˜å‚¨å’ŒæŸ¥æ‰¾å­—ç¬¦ä¸²é›†åˆçš„æ•°æ®ç»“æ„ï¼Œç”±â€œç»“ç‚¹â€å’Œâ€œå¸¦æœ‰å­—ç¬¦çš„è¾¹ã€æ„æˆã€‚ å…¸å‹åº”ç”¨æ˜¯ç”¨äºç»Ÿè®¡å’Œæ’åºå¤§é‡çš„å­—ç¬¦ä¸²ï¼ˆä½†ä¸ä»…é™äºå­—ç¬¦ä¸²ï¼‰ï¼Œç»å¸¸è¢«æœç´¢å¼•æ“ç³»ç»Ÿç”¨äºæ–‡æœ¬è¯é¢‘ç»Ÿè®¡ã€‚ å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼šæœ€å¤§é™åº¦åœ°å‡å°‘æ— è°“çš„å­—ç¬¦ä¸²æ¯”è¾ƒï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”å“ˆå¸Œè¡¨é«˜ã€‚ åŸºæœ¬æ€§è´¨ ç»“ç‚¹æœ¬èº«ä¸ä¿å­˜å®Œæ•´å•è¯ ä»æ ¹ç»“ç‚¹åˆ°æŸä¸€ç»“ç‚¹ï¼Œè·¯å¾„ä¸Šç»è¿‡çš„å­—ç¬¦è¿æ¥èµ·æ¥å³ä¸ºè¯¥ç»“ç‚¹å¯¹åº”çš„å•è¯ æ¯ä¸ªç»“ç‚¹å‡ºå‘çš„æ‰€æœ‰è¾¹ä»£è¡¨çš„å­—ç¬¦éƒ½ä¸ç›¸åŒ ç»“ç‚¹ç”¨äºå­˜å‚¨å•è¯çš„é¢å¤–ä¿¡æ¯ï¼ˆä¾‹å¦‚é¢‘æ¬¡ï¼‰ å†…éƒ¨å®ç° å­—ç¬¦é›†æ•°ç»„æ³•ï¼ˆç®€å•ï¼‰ æ¯ä¸ªç»“ç‚¹ä¿å­˜ä¸€ä¸ªé•¿åº¦å›ºå®šä¸ºå­—ç¬¦é›†å¤§å°ï¼ˆä¾‹å¦‚26ï¼‰çš„æ•°ç»„ï¼Œä»¥å­—ç¬¦ä¸ºä¸‹æ ‡ï¼Œä¿å­˜æŒ‡å‘çš„ç»“ç‚¹ç©ºé—´å¤æ‚åº¦ä¸ºO(ç»“ç‚¹æ•°*å­—ç¬¦é›†å¤§å°)ï¼ŒæŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(å•è¯é•¿åº¦)é€‚ç”¨äºè¾ƒå°å­—ç¬¦é›†ï¼Œæˆ–è€…å•è¯çŸ­ã€åˆ†å¸ƒç¨ å¯†çš„å­—å…¸ å­—ç¬¦é›†æ˜ å°„æ³•ï¼ˆä¼˜åŒ–ï¼‰ æŠŠæ¯ä¸ªç»“ç‚¹ä¸Šçš„å­—ç¬¦é›†æ•°ç»„æ”¹ä¸ºä¸€ä¸ªæ˜ å°„ï¼ˆè¯é¢‘ç»Ÿè®¡ï¼šhashmapï¼Œæ’åºï¼šordered map) ç©ºé—´å¤æ‚åº¦ä¸ºO(æ–‡æœ¬å­—ç¬¦æ€»æ•°)ï¼ŒæŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(å•è¯é•¿åº¦)ï¼Œä½†å¸¸æ•°ç¨å¤§ä¸€äº›é€‚ç”¨æ€§æ›´å¹¿ æ ¸å¿ƒæ€æƒ³â€”â€”ç©ºé—´æ¢æ—¶é—´ æ— è®ºæ˜¯ä¿å­˜æ ‘çš„ç»“æ„ã€å­—ç¬¦é›†æ•°ç»„è¿˜æ˜¯å­—ç¬¦é›†æ˜ å°„ï¼Œéƒ½éœ€è¦é¢å¤–çš„ç©ºé—´ åˆ©ç”¨å­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€æ¥é™ä½æŸ¥è¯¢æ—¶é—´çš„å¼€é”€ä»¥è¾¾åˆ°æé«˜æ•ˆç‡çš„ç›®çš„ åˆ†ç»„æ€æƒ³ï¼šå‰ç¼€ç›¸åŒçš„å­—ç¬¦ä¸²åœ¨åŒä¸€å­æ ‘ä¸­ æ¨¡ç‰ˆ ä¸€èˆ¬å®ç° class Trie { public: Trie() { root = new Node(); } void insert(string word) { Node* cur = root; for (char ch : word) { if (cur-\u003emp.find(ch) == cur-\u003emp.end()) { cur-\u003emp[ch] = new Node(); } cur = cur-\u003emp[ch]; } ++cur-\u003ecount; } bool search(string word) { Node* cur = root; for (char ch : word) { if (cur-\u003emp.find(ch) == cur-\u003emp.end()) return false; cur = cur-\u003emp[ch]; } return cur-\u003ecount \u003e 0; } bool startsWith(string prefix) { Node* cur = root; for (char ch : prefix) { if (cur-\u003emp.find(ch) == cur-\u003emp.end()) return false; cur = cur-\u003emp[ch]; } return true; } private: struct Node { int count; unordered_map\u003cchar, Node*\u003e mp; Node() { count = 0; } }; Node* root; }; é‡æ„å®ç°ï¼ˆæ›´ç²¾ç®€ï¼‰ struct Trie { public: /** Initialize your data structure here. */ Trie() { root = new Node(); } /** Inserts a word into the trie. */ void insert(string word) { find(word, true, true); } /** Returns if the word is in the trie. */ bool search(string word) { return find(word, true, false); } /** Returns if there is any word in the trie that starts with the given prefix. */ bool startsWith(string prefix) { return find(prefix, false, false); } private: struct Node { int count; unordered_map\u003cchar, Node*\u003e child; Node() : count(0) {} }; Node* root; bool find(const string\u0026 s, bool exact_match, bool insert_if_not_exist) { Node* curr = root; for (char c : s) { if (curr-\u003echild.find(c) == curr-\u003echild.end()) { if (!insert_if_not_exist) return false; curr-\u003echild[c] = new Node(); } curr = curr-\u003echild[c]; } if (insert_if_not_exist) curr-\u003ecount++; return exact_match ? curr-\u003ecount \u003e 0 : true; } }; ","date":"2022-06-12","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95/:1:2","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"å­—ç¬¦ä¸²ç®—æ³•","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"ä¸€é“æœ‰æ„æ€çš„Trieåº”ç”¨é¢˜ æœ€å¤§å¼‚æˆ–å¯¹ åœ¨ç»™å®šçš„Nä¸ªæ•´æ•° A1ï¼ŒA2â€¦â€¦Anä¸­é€‰å‡ºä¸¤ä¸ªè¿›è¡Œ xorï¼ˆå¼‚æˆ–ï¼‰è¿ç®—ï¼Œå¾—åˆ°çš„ç»“æœæœ€å¤§æ˜¯å¤šå°‘ï¼Ÿ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•´æ•° Nã€‚ ç¬¬äºŒè¡Œè¾“å…¥Nä¸ªæ•´æ•° A1A1ï½Anã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚ æ•°æ®èŒƒå›´ 32ä½æ•´æ•°ï¼ŒN \u003c= 1e5 #include \u003ciostream\u003e #include \u003ccstring\u003e #include \u003calgorithm\u003e #include \u003cvector\u003e using namespace std; struct Node { Node* child[2]; int number; Node() { number = -1; memset(child, 0, sizeof child); } }; Node* root; void insert(int x) { Node* cur = root; for (int i = 31; i \u003e= 0; --i) { if (x \u0026 (1 \u003c\u003c i)) { if (!cur-\u003echild[1]) { cur-\u003echild[1] = new Node(); } cur = cur-\u003echild[1]; } else { if (!cur-\u003echild[0]) { cur-\u003echild[0] = new Node(); } cur = cur-\u003echild[0]; } } cur-\u003enumber = x; } int cmp(int x) { Node* cur = root; for (int i = 31; i \u003e= 0; --i) { if (x \u0026 (1 \u003c\u003c i)) { cur = cur-\u003echild[0] ? cur-\u003echild[0] : cur-\u003echild[1]; } else { cur = cur-\u003echild[1] ? cur-\u003echild[1] : cur-\u003echild[0]; } } return x ^ cur-\u003enumber; } int main() { int n; cin \u003e\u003e n; int nums[n]; root = new Node(); for (int i = 0; i \u003c n; ++i) { int x; cin \u003e\u003e x; nums[i] = x; insert(x); } int ans = -1; for (int i = 0; i \u003c n; ++i) { ans = max(ans, cmp(nums[i])); } printf(\"%d\\n\", ans); return 0; } ","date":"2022-06-12","objectID":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95/:1:3","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"å­—ç¬¦ä¸²ç®—æ³•","uri":"/posts/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"é«˜ç²¾åº¦ç®—æ³• å…³äºé«˜ç²¾åº¦ï¼šé«˜ç²¾åº¦å°±æ˜¯è®¡ç®—ç»“æœä½æ•°éå¸¸å¤šï¼Œä¸€èˆ¬çš„æ•°å­—æ•´å‹æ— æ³•æ­£å¸¸æ˜¾ç¤ºï¼Œjavaå’ŒPythonæ— éœ€è€ƒè™‘ï¼Œè¯­æ³•è‡ªå¸¦å³å¯å®Œæˆé«˜ç²¾åº¦å¤„ç† ","date":"2022-06-12","objectID":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:0","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"é«˜ç²¾åº¦ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"é«˜ç²¾åº¦åŠ æ³• é«˜ç²¾åº¦åŠ æ³•å°±æ˜¯ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿäººçš„åŠ æ³•è¿‡ç¨‹ï¼Œå…ˆåŠ ä¸ªä½ï¼Œç„¶ååä½ã€ç™¾ä½ã€åƒä½ï¼Œæ¯ä¸€ä½éƒ½è¦è€ƒè™‘ä¸Šä¸€ä½çš„è¿›ä½ï¼Œç”±äºæœ€åå¯èƒ½è¿˜å­˜åœ¨ä¸€ä½è¿›ä½ï¼Œå› æ­¤ç”¨å¤§ç«¯æ¨¡å¼å­˜å‚¨ï¼ˆå³æ•°å­—çš„é«˜ä½åœ¨æ•°ç»„çš„é«˜ä½ï¼Œæ•°å­—çš„ä½ä½åœ¨æ•°ç»„çš„ä½ä½ï¼Œå³nums[0]æ˜¯ä¸ªä½ï¼‰å¯ä»¥åˆ©ç”¨æ•°ç»„çš„push_back()è€Œæ— éœ€æ¬ç§»æ•´ä¸ªæ•°ç»„æ¥åœ¨æœ€å‰é¢åŠ ä¸€ä½ã€‚ vector\u003cint\u003e add(vector\u003cint\u003e\u0026 A, vector\u003cint\u003e\u0026 B) { if (A.size() \u003c B.size()) return add(B, A); vector\u003cint\u003e ans; // iæ˜¯ä½æ•°ï¼Œç”±ä½åˆ°é«˜åˆ†åˆ«æ˜¯ä¸ªä½-\u003eæœ€é«˜ä½ï¼Œtæ˜¯è¿›ä½ int t = 0; for (int i = 0; i \u003c A.size(); ++i) { int cur = A[i] + (i \u003c B.size() ? B[i] : 0) + t; ans.push_back(cur % 10); t = cur / 10; } if (t) ans.push_back(t); return ans; } ","date":"2022-06-12","objectID":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:1","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"é«˜ç²¾åº¦ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"é«˜ç²¾åº¦å‡æ³• ä¸é«˜ç²¾åº¦åŠ æ³•ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä»ä½ä½å‡èµ·ï¼Œä¸å¤Ÿå‡éœ€è¦å‘é«˜ä½å€Ÿä½ï¼Œå› æ­¤ä¸€å®šè¦ç”¨å¤§çš„å‡å°çš„ï¼Œå°çš„å‡å¤§çš„åˆ™åè¿‡æ¥å‡ç„¶åè¡¥è´Ÿå· ç”¨cmpæ¥åˆ¤æ–­Aå’ŒBçš„å¤§å°ï¼Œsubç”¨æ¥åšå‡æ³•ï¼Œè¦æ±‚å¤§çš„å‡å°çš„ // åˆ¤æ–­Aå¤§äºç­‰äºB bool cmp(vector\u003cint\u003e\u0026 A, vector\u003cint\u003e\u0026 B) { if (A.size() != B.size()) return A.size() \u003e B.size(); for (int i = A.size() - 1; i \u003e= 0; --i) { if (A[i] \u003e B[i]) return true; else if (A[i] \u003c B[i]) return false; else continue; } return true; } vector\u003cint\u003e sub(vector\u003cint\u003e\u0026 A, vector\u003cint\u003e\u0026 B) { vector\u003cint\u003e ans; // è¿™é‡Œå°±å·²ç»ä¿è¯äº†Aæ˜¯å¤§äºç­‰äºBçš„ for (int i = 0, t = 0; i \u003c A.size(); ++i) { int cur = A[i] - (i \u003c B.size() ? B[i] : 0) - t; if (cur \u003e= 0) { t = 0; } else { cur += 10; t = 1; } ans.push_back(cur); } while (ans.size() \u003e 1 \u0026\u0026 ans.back() == 0) ans.pop_back(); return ans; } ","date":"2022-06-12","objectID":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:2","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"é«˜ç²¾åº¦ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"é«˜ç²¾åº¦ä¹˜æ³• å’ŒåŠ æ³•éå¸¸åƒï¼Œå¯¹äºé«˜ç²¾åº¦æ•°å­—Aå’Œæ™®é€šæ•°å­—Bï¼ŒA * Bçš„ç»“æœæ˜¯Aä¸­æ¯ä¸€ä½ä¸Bç›¸ä¹˜çš„ç»“æœç›¸åŠ ï¼Œæ³¨æ„è¿›ä½å³å¯ vector\u003cint\u003e mul(vector\u003cint\u003e\u0026 A, int b) { if (b == 0) return {0}; vector\u003cint\u003e ans; for (int i = 0, t = 0; i \u003c A.size() || t; ++i) { if (i \u003c A.size()) t += A[i] * b; ans.push_back(t % 10); t /= 10; } return ans; } ","date":"2022-06-12","objectID":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:3","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"é«˜ç²¾åº¦ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"é«˜ç²¾åº¦é™¤æ³• æ¨¡æ‹Ÿé™¤æ³•ï¼Œä¸ä¸Šè¿°ä¸‰ç§çš„ä¸åŒåœ¨äºï¼Œé™¤æ³•è¦å…ˆä»é«˜ä½å¼€å§‹é™¤ï¼Œä¸å¤Ÿé™¤å°±æ˜¯é›¶ï¼Œâœ–ï¸10åŠ ä¸Šä¸‹ä¸€ä½ç»§ç»­é™¤ vector\u003cint\u003e div(vector\u003cint\u003e\u0026 A, int b, int\u0026 r) { // A é™¤ bï¼Œræ˜¯ä½™æ•° if (b == 0) return {}; r = 0; vector\u003cint\u003e ans; // è¿™é‡Œä¾æ—§æ˜¯é«˜ä½è¡¨ç¤ºçš„æ˜¯é«˜ä½ for (int i = A.size() - 1; i \u003e= 0; --i) { r = r * 10 + A[i]; ans.push_back(r / b); r = r % b; } reverse(ans.begin(), ans.end()); while (ans.size() \u003e 1 \u0026\u0026 ans.back() == 0) ans.pop_back(); return ans; } ","date":"2022-06-12","objectID":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:4","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"é«˜ç²¾åº¦ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"äºŒåˆ†ç®—æ³• äºŒåˆ†çš„æœ¬è´¨æ˜¯è¾¹ç•Œï¼Œæ•´ä¸ªåŒºé—´å¯ä»¥ä¸€åˆ†ä¸ºäºŒï¼Œå·¦åŠè¾¹æ»¡è¶³æŸæ€§è´¨ï¼Œå³åŠè¾¹ä¸æ»¡è¶³æŸæ€§è´¨ï¼ŒäºŒåˆ†å°±æ˜¯ç”¨æ¥å¯»æ‰¾è¿™ä¸ªè¾¹ç•Œçš„æ–¹æ³•ã€‚ ","date":"2022-06-12","objectID":"/posts/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:0","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"äºŒåˆ†ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"æ•´æ•°äºŒåˆ† åšæ³•ï¼š æƒ…å†µä¸€ï¼šæ‰¾åˆ°mid = (l + r + 1) / 2 if (check(mid)): true è¾¹ç•Œç‚¹åœ¨ [mid, r]è¿™ä¸ªèŒƒå›´å†…ï¼Œæ›´æ–°æ–¹å¼ï¼šl = mid false è¾¹ç•Œç‚¹åœ¨[l, mid - 1]è¿™ä¸ªèŒƒå›´å†…ï¼Œæ›´æ–°æ–¹å¼r = mid - 1 æƒ…å†µäºŒï¼šæ‰¾åˆ°mid = (l + r) / 2 if (check(mid)): true è¾¹ç•Œç‚¹åœ¨ [l, mid]è¿™ä¸ªèŒƒå›´å†…ï¼Œæ›´æ–°æ–¹å¼ï¼šr = mid false è¾¹ç•Œç‚¹åœ¨[mid + 1, r]è¿™ä¸ªèŒƒå›´å†…ï¼Œæ›´æ–°æ–¹å¼l = mid + 1 æ‹¿åˆ°é¢˜ç›®ï¼š å…ˆå†™checkå‡½æ•°ï¼Œå¦‚æœtrueçš„æ—¶å€™æ˜¯l = midåˆ™è¡¥ä¸Š+1ï¼Œå¦‚æœtrueçš„æ—¶å€™æ˜¯r = midåˆ™ä¸åŠ ä¸€ æ¨¡ç‰ˆ // æ™®é€šäºŒåˆ†æŸ¥æ‰¾int int binarySearch(const vector\u003cint\u003e\u0026 nums, int target) { int left = 0, right = (int)nums.size() - 1; while (left \u003c= right) { int mid = left + (right - left) / 2; if (nums[mid] == target) return mid; else if (nums[mid] \u003c target) left = mid + 1; else right = mid - 1; } return -1; } // æ›´é€šç”¨çš„äºŒåˆ†æ¨¡æ¿ // LeetCode34 åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® class Solution { public: vector\u003cint\u003e searchRange(vector\u003cint\u003e\u0026 nums, int target) { vector\u003cint\u003e ans; // å¼€å§‹ä½ç½®ï¼ˆlower_boundï¼‰ï¼šæŸ¥è¯¢ç¬¬ä¸€ä¸ª\u003e=targetçš„æ•° // èŒƒå›´ [0 .. n-1 ] + [nè¡¨ç¤ºä¸å­˜åœ¨] int left = 0, right = nums.size(); while (left \u003c right) { int mid = (left + right) / 2; if (nums[mid] \u003e= target) right = mid; else left = mid + 1; } ans.push_back(right); //ç¬¬ä¸€ä¸ª\u003e=targetçš„æ•°çš„ä¸‹æ ‡ï¼ˆä¸å­˜åœ¨ä¸ºnï¼‰ // ç»“æŸä½ç½®ï¼šæŸ¥è¯¢æœ€åä¸€ä¸ª\u003c=targetçš„æ•° // èŒƒå›´ [-1è¡¨ç¤ºä¸å­˜åœ¨] + [0 .. n-1 ] left = -1, right = nums.size() - 1; while (left \u003c right) { int mid = (left + right + 1) / 2; if (nums[mid] \u003c= target) left = mid; else right = mid - 1; } ans.push_back(right); //æœ€åä¸€ä¸ª\u003c=targetçš„æ•°ï¼ˆä¸å­˜åœ¨ä¸º-1ï¼‰ // targetå‡ºç°åœ¨[ans[0], ans[1]] if (ans[0] \u003e ans[1]) ans = {-1, -1}; return ans; } }; ","date":"2022-06-12","objectID":"/posts/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:1","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"äºŒåˆ†ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"æµ®ç‚¹æ•°äºŒåˆ† è·Ÿæ•´æ•°äºŒåˆ†æ€è·¯ä¸€è‡´ï¼Œä½†ä¸ç”¨åŒºåˆ†æ˜¯å¦+1ï¼Œæ²¡æœ‰è¾¹ç•Œé—®é¢˜ // å®æ•°äºŒåˆ†æ¨¡æ¿ // ans = realSqrt(x) // å¦‚æœè¦æ±‚4ä½å°æ•°ï¼Œå°±å¤šç®—2~4ä½ï¼Œåˆ°1e-6æˆ–1e-8ï¼Œä¿è¯ç²¾ç¡® double realSqrt(double x, double eps = 1e-6) { double left = 0, right = max(x, 1.0); while (right - left \u003e eps) { double mid = (left + right) / 2; if (mid * mid \u003c= x) { left = mid; } else { right = mid; } } return right; } ","date":"2022-06-12","objectID":"/posts/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:2","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"äºŒåˆ†ç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"æ’åºç®—æ³• ","date":"2022-06-12","objectID":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:0","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"æ’åºç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"å¿«é€Ÿæ’åºï¼ˆO(nlogn)) æ€æƒ³ï¼šåˆ†æ²» åšæ³•ï¼š ç¡®å®šåˆ†ç•Œç‚¹ï¼šnums[l]æˆ–nums[r]æˆ–nums[(l + r) / 2]æˆ–éšæœº è°ƒæ•´èŒƒå›´ï¼Œä½¿å¾—åˆ†ç•Œç‚¹å·¦è¾¹çš„æ•°å°äºåˆ†ç•Œç‚¹çš„æ•°å€¼ï¼Œåˆ†ç•Œç‚¹å³è¾¹çš„æ•°å¤§äºåˆ†ç•Œç‚¹çš„æ•°å€¼ é€’å½’å¤„ç†å·¦å³ä¸¤æ®µ void quickSort(vector\u003cint\u003e\u0026 nums, int l, int r) { if (l \u003e= r) return; int x = nums[(l + r) \u003e\u003e 1]; int i = l, j = r; while (i \u003c= j) { while (nums[i] \u003c x) ++i; while (nums[j] \u003e x) --j; if (i \u003e= j) break; swap(nums[i++], nums[j--]); } quickSort(nums, l, j); quickSort(nums, j + 1, r); } ","date":"2022-06-12","objectID":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:1","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"æ’åºç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"å½’å¹¶æ’åº(O(nlogn)) æ€æƒ³ï¼šåˆ†æ²» åšæ³•ï¼š ç¡®å®šåˆ†ç•Œç‚¹ï¼šmid = (l + r) / 2 é€’å½’æ’åºå·¦å³ä¸¤ç«¯ å½’å¹¶ï¼šå°†å·¦å³ä¸¤æ®µåˆäºŒä¸ºä¸€ void mergeSort(vector\u003cint\u003e\u0026 nums, int l, int r) { if (l \u003e= r) return; int mid = (l + r) \u003e\u003e 1; mergeSort(nums, l, mid); mergeSort(nums, mid + 1, r); // ä½¿ç”¨æ•°ç»„ï¼Œé€Ÿåº¦å¿«éå¸¸å¤šï¼Œå¤§æ¦‚æ˜¯ä½¿ç”¨vectorçš„ä¸¤å€ int n = r - l + 1; int temp[n]; int i = l, j = mid + 1, idx = 0; while (i \u003c= mid \u0026\u0026 j \u003c= r) { temp[idx++] = nums[i] \u003c nums[j] ? nums[i++] : nums[j++]; } while (i \u003c= mid) temp[idx++] = nums[i++]; while (j \u003c= r) temp[idx++] = nums[j++]; for (int i = 0; i \u003c n; ++i) { nums[l + i] = temp[i]; } } ","date":"2022-06-12","objectID":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:2","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"æ’åºç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"å †æ’åº(O(nlogn)) æ€æƒ³ï¼šåˆ©ç”¨å°æ ¹å †å®Œæˆæ’åº åšæ³•ï¼š å°†æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°æ‰”åˆ°å †é‡Œ å°†å †æŒ‰åºè¾“å‡º #include \u003ciostream\u003e #include \u003cvector\u003e #include \u003cqueue\u003e using namespace std; void HeapSort(vector\u003cint\u003e\u0026 nums) { priority_queue\u003cint, vector\u003cint\u003e, greater\u003cint\u003e\u003e q(nums.begin(), nums.end()); for (int i = 0; i \u003c nums.size(); ++i) { nums[i] = q.top(); q.pop(); } } int main() { vector\u003cint\u003e nums({3, 5, 2, 5, 7, 4, 9, 0}); HeapSort(nums); for (int i : nums) cout \u003c\u003c i \u003c\u003c \" \"; cout \u003c\u003c endl; return 0; } ","date":"2022-06-12","objectID":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:3","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"æ’åºç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"è®¡æ•°æ’åº(O(n + k)) æ€æƒ³ï¼šéå† åšæ³•ï¼š ç¡®å®šèŒƒå›´ å»æ•°æ¯ä¸ªæ•°çš„æ•°é‡ é‡æ„æ•°ç»„ #include \u003calgorithm\u003e #include \u003ciostream\u003e #include \u003cvector\u003e using namespace std; void countSort(vector\u003cint\u003e\u0026 nums) { int maxVal = -1; for (int num : nums) { maxVal = max(maxVal, num); } vector\u003cint\u003e count(maxVal + 1); for (int num : nums) { ++count[num]; } int index = 0; //åŸæ•°ç»„ä¿®æ”¹åæ ‡ for (int val = 0; val \u003c count.size(); ++val) { while (count[val] \u003e 0) { --count[val]; nums[index++] = val; } } } int main() { vector\u003cint\u003e test = {4, 5, 2, 1, 4, 2, 3, 4, 4, 0, 8}; for (auto a : test) { cout \u003c\u003c a \u003c\u003c ' '; } cout \u003c\u003c endl; countSort(test); for (auto a : test) { cout \u003c\u003c a \u003c\u003c ' '; } cout \u003c\u003c endl; } ","date":"2022-06-12","objectID":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:4","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"æ’åºç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"å†’æ³¡æ’åº(O(n^2)) æ€æƒ³ï¼šä¸¤ééå† åšæ³•ï¼š ç¬¬ä¸€å±‚éå†å†³å®šå¼€å§‹çš„ä½ç½® æ¯äºŒå±‚éå†å°†æœ€å¤§å€¼æ”¾åˆ°æ•°ç»„çš„æœ€å³è¾¹ #include \u003ciostream\u003e #include \u003cvector\u003e using namespace std; void BubbleSort(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); if (n \u003c= 1) return; for (int i = 1; i \u003c n; ++i) { bool check = false; for (int j = 1; j \u003c n - i + 1; ++j) { if (nums[j] \u003c nums[j - 1]) { std::swap(nums[j], nums[j - 1]); check = true; } } if (!check) break; } } int main() { vector\u003cint\u003e nums({3, 5, 2, 5, 7, 4, 9, 0}); BubbleSort(nums); for (int i : nums) cout \u003c\u003c i \u003c\u003c \" \"; cout \u003c\u003c endl; return 0; } ","date":"2022-06-12","objectID":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:5","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"æ’åºç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"æ’å…¥æ’åº æ€æƒ³ï¼šå°†æ•°ç»„åˆ†ä¸ºå·²æ’åºå’Œæœªæ’åºä¸¤éƒ¨åˆ†ï¼Œæ¯æ¬¡å°†æœªæ’åºä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ’å…¥åˆ°å·²æ’åºçš„éƒ¨åˆ†ä¸­ï¼Œæœªæ’åºçš„æ•°é‡ä¸º0æ—¶æ’åºå®Œæˆ åšæ³•ï¼š æ•°ç»„çš„é¦–æ•°å­—ä¸ºå·²æ’åºéƒ¨åˆ†ï¼Œå…¶ä½™éƒ¨åˆ†ä¸ºæœªæ’åºéƒ¨åˆ† ä¸¤å±‚éå†ï¼Œå°†æœªæ’åºçš„ç¬¬ä¸€ä¸ªæ•°å­—ä¸å·²æ’åºçš„éƒ¨åˆ†é€ä¸ªæ¯”è¾ƒç›´åˆ°æ’å…¥åˆ°åˆé€‚çš„ä½ç½®ä¸­ #include \u003ciostream\u003e #include \u003cvector\u003e using namespace std; void InsertSort(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); if (n \u003c= 1) return; for (int i = 1; i \u003c n; ++i) { for (int j = i; j \u003e 0 \u0026\u0026 nums[j] \u003c nums[j - 1]; --j) { swap(nums[j], nums[j - 1]); } } } int main() { vector\u003cint\u003e nums({3, 5, 2, 5, 7, 4, 9, 0}); InsertSort(nums); for (int i : nums) cout \u003c\u003c i \u003c\u003c \" \"; cout \u003c\u003c endl; return 0; } ","date":"2022-06-12","objectID":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:6","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"æ’åºç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["ç®—æ³•æ¨¡ç‰ˆ"],"content":"é€‰æ‹©æ’åº æ€æƒ³ï¼šå°†å°†æ•°ç»„åˆ†ä¸ºå·²æ’åºå’Œæœªæ’åºä¸¤éƒ¨åˆ†ï¼Œæ¯æ¬¡å°†æœªæ’åºä¸­çš„æœ€å°çš„å…ƒç´ æ”¾åˆ°å·²æ’åºéƒ¨åˆ†çš„æœ«å°¾ åšæ³•ï¼š å·²æ’åºéƒ¨åˆ†ä¸ºæ— ï¼Œæ•´ä¸ªæ•°ç»„éƒ½æ˜¯æœªæ’åºéƒ¨åˆ† ä¸¤å±‚éå†ï¼Œæ¯æ¬¡é€‰æ‹©ä¸€ä¸ªæœ€å°çš„å€¼æ”¾åˆ°å·²æ’åºçš„æœ«å°¾ #include \u003ciostream\u003e #include \u003cvector\u003e using namespace std; void SelectSort(vector\u003cint\u003e\u0026 nums) { int n = nums.size(); if (n \u003c= 1) return; for (int i = 0; i \u003c n; ++i) { int idx = i; for (int j = i; j \u003c n; ++j) { if (nums[j] \u003c nums[idx]) { idx = j; } } swap(nums[i], nums[idx]); } } int main() { vector\u003cint\u003e nums({3, 5, 2, 5, 7, 4, 9, 0}); SelectSort(nums); for (int i : nums) cout \u003c\u003c i \u003c\u003c \" \"; cout \u003c\u003c endl; return 0; } ","date":"2022-06-12","objectID":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/:0:7","tags":["æ•°æ®ç»“æ„ä¸ç®—æ³•","ç®—æ³•æ¨¡ç‰ˆ"],"title":"æ’åºç®—æ³•æ¨¡ç‰ˆ","uri":"/posts/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%A8%A1%E7%89%88/"},{"categories":["C/C++"],"content":"ä¼˜å…ˆé˜Ÿåˆ—â€”â€”priority_queue ","date":"2022-06-11","objectID":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/:0:0","tags":["C/C++"],"title":"ä¼˜å…ˆé˜Ÿåˆ—","uri":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"},{"categories":["C/C++"],"content":"ä»‹ç» æ™®é€šçš„é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œå…ƒç´ åœ¨é˜Ÿåˆ—å°¾è¿½åŠ ï¼Œè€Œä»é˜Ÿåˆ—å¤´åˆ é™¤ï¼› åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œå…ƒç´ è¢«èµ‹äºˆä¼˜å…ˆçº§ã€‚å½“è®¿é—®å…ƒç´ æ—¶ï¼Œå…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ æœ€å…ˆåˆ é™¤ã€‚ä¼˜å…ˆé˜Ÿåˆ—å…·æœ‰æœ€é«˜çº§å…ˆå‡º ï¼ˆfirst in, largest outï¼‰çš„è¡Œä¸ºç‰¹å¾ã€‚ ","date":"2022-06-11","objectID":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/:1:0","tags":["C/C++"],"title":"ä¼˜å…ˆé˜Ÿåˆ—","uri":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"},{"categories":["C/C++"],"content":"ä½¿ç”¨ é¦–å…ˆè¦åŒ…å«å¤´æ–‡ä»¶****, ä»–å’Œqueueä¸åŒçš„å°±åœ¨äºæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å…¶ä¸­æ•°æ®çš„ä¼˜å…ˆçº§, è®©ä¼˜å…ˆçº§é«˜çš„æ’åœ¨é˜Ÿåˆ—å‰é¢,ä¼˜å…ˆå‡ºé˜Ÿã€‚ âš ï¸ï¼šä¼˜å…ˆé˜Ÿåˆ—å…·æœ‰é˜Ÿåˆ—çš„æ‰€æœ‰ç‰¹æ€§ï¼ŒåŒ…æ‹¬é˜Ÿåˆ—çš„åŸºæœ¬æ“ä½œï¼Œåªæ˜¯åœ¨è¿™åŸºç¡€ä¸Šæ·»åŠ äº†å†…éƒ¨çš„ä¸€ä¸ªæ’åºï¼Œå®ƒæœ¬è´¨æ˜¯ä¸€ä¸ªå †å®ç°çš„ã€‚ ","date":"2022-06-11","objectID":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/:2:0","tags":["C/C++"],"title":"ä¼˜å…ˆé˜Ÿåˆ—","uri":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"},{"categories":["C/C++"],"content":"åŸºæœ¬æ“ä½œ å’Œé˜Ÿåˆ—åŸºæœ¬æ“ä½œç›¸åŒ: top è®¿é—®é˜Ÿå¤´å…ƒç´  empty é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º size è¿”å›é˜Ÿåˆ—å†…å…ƒç´ ä¸ªæ•° push æ’å…¥å…ƒç´ åˆ°é˜Ÿå°¾ (å¹¶æ’åº) emplace åŸåœ°æ„é€ ä¸€ä¸ªå…ƒç´ å¹¶æ’å…¥é˜Ÿåˆ— pop å¼¹å‡ºé˜Ÿå¤´å…ƒç´  swap äº¤æ¢å†…å®¹ ","date":"2022-06-11","objectID":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/:2:1","tags":["C/C++"],"title":"ä¼˜å…ˆé˜Ÿåˆ—","uri":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"},{"categories":["C/C++"],"content":"å®šä¹‰ï¼ˆåˆå§‹åŒ–ï¼‰ priority_queue\u003cType, Container, Functional\u003e Type å°±æ˜¯æ•°æ®ç±»å‹ï¼ŒContainer å°±æ˜¯å®¹å™¨ç±»å‹ï¼ˆContainerå¿…é¡»æ˜¯ç”¨æ•°ç»„å®ç°çš„å®¹å™¨ï¼Œæ¯”å¦‚vector,dequeç­‰ç­‰ï¼Œä½†ä¸èƒ½ç”¨ listã€‚STLé‡Œé¢é»˜è®¤ç”¨çš„æ˜¯vectorï¼‰ï¼ŒFunctional å°±æ˜¯æ¯”è¾ƒçš„æ–¹å¼ã€‚ å½“éœ€è¦ç”¨è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹æ—¶æ‰éœ€è¦ä¼ å…¥è¿™ä¸‰ä¸ªå‚æ•°ï¼Œä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œåªéœ€è¦ä¼ å…¥æ•°æ®ç±»å‹ï¼Œé»˜è®¤æ˜¯å¤§é¡¶å †ã€‚ ä¸€èˆ¬æƒ…å†µå¦‚ä¸‹ï¼š //å‡åºé˜Ÿåˆ—ï¼Œå°é¡¶å † priority_queue \u003cint,vector\u003cint\u003e,greater\u003cint\u003e \u003e q; //é™åºé˜Ÿåˆ—ï¼Œå¤§é¡¶å † priority_queue \u003cint,vector\u003cint\u003e,less\u003cint\u003e \u003eq; //greaterå’Œlessæ˜¯stdå®ç°çš„ä¸¤ä¸ªä»¿å‡½æ•°ï¼ˆå°±æ˜¯ä½¿ä¸€ä¸ªç±»çš„ä½¿ç”¨çœ‹ä¸Šå»åƒä¸€ä¸ªå‡½æ•°ã€‚ //å…¶å®ç°å°±æ˜¯ç±»ä¸­å®ç°ä¸€ä¸ªoperator()ï¼Œè¿™ä¸ªç±»å°±æœ‰äº†ç±»ä¼¼å‡½æ•°çš„è¡Œä¸ºï¼Œå°±æ˜¯ä¸€ä¸ªä»¿å‡½æ•°ç±»äº†ï¼‰ ","date":"2022-06-11","objectID":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/:2:2","tags":["C/C++"],"title":"ä¼˜å…ˆé˜Ÿåˆ—","uri":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"},{"categories":["C/C++"],"content":"ä¾‹å­ğŸŒ° ","date":"2022-06-11","objectID":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/:3:0","tags":["C/C++"],"title":"ä¼˜å…ˆé˜Ÿåˆ—","uri":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"},{"categories":["C/C++"],"content":"é»˜è®¤æƒ…å†µ #include\u003ciostream\u003e #include \u003cqueue\u003e using namespace std; int main() { //å¯¹äºåŸºç¡€ç±»å‹ é»˜è®¤æ˜¯å¤§é¡¶å † priority_queue\u003cint\u003e a; //ç­‰åŒäº priority_queue\u003cint, vector\u003cint\u003e, less\u003cint\u003e \u003e a; // è¿™é‡Œä¸€å®šè¦æœ‰ç©ºæ ¼ï¼Œä¸ç„¶æˆäº†å³ç§»è¿ç®—ç¬¦â†“â†“ priority_queue\u003cint, vector\u003cint\u003e, greater\u003cint\u003e \u003e c; //è¿™æ ·å°±æ˜¯å°é¡¶å † priority_queue\u003cstring\u003e b; for (int i = 0; i \u003c 5; i++) { a.push(i); c.push(i); } while (!a.empty()) { cout \u003c\u003c a.top() \u003c\u003c ' '; a.pop(); } cout \u003c\u003c endl; while (!c.empty()) { cout \u003c\u003c c.top() \u003c\u003c ' '; c.pop(); } cout \u003c\u003c endl; b.push(\"abc\"); b.push(\"abcd\"); b.push(\"cbd\"); while (!b.empty()) { cout \u003c\u003c b.top() \u003c\u003c ' '; b.pop(); } cout \u003c\u003c endl; return 0; } è¿è¡Œç»“æœï¼š 4 3 2 1 0 0 1 2 3 4 cbd abcd abc è¯·æŒ‰ä»»æ„é”®ç»§ç»­. . . ","date":"2022-06-11","objectID":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/:3:1","tags":["C/C++"],"title":"ä¼˜å…ˆé˜Ÿåˆ—","uri":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"},{"categories":["C/C++"],"content":"ç”¨pairåšä¼˜å…ˆé˜Ÿåˆ—çš„å…ƒç´  ä½¿ç”¨pairé»˜è®¤æ¯”è¾ƒè§„åˆ™ pairé»˜è®¤æ¯”è¾ƒè§„åˆ™ï¼šå…ˆæ¯”è¾ƒç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªç›¸ç­‰æ¯”è¾ƒç¬¬äºŒä¸ªã€‚ #include \u003ciostream\u003e #include \u003cqueue\u003e #include \u003cvector\u003e using namespace std; int main() { priority_queue\u003cpair\u003cint, int\u003e \u003e a; pair\u003cint, int\u003e b(1, 2); pair\u003cint, int\u003e c(1, 3); pair\u003cint, int\u003e d(2, 5); a.push(d); a.push(c); a.push(b); while (!a.empty()) { cout \u003c\u003c a.top().first \u003c\u003c ' ' \u003c\u003c a.top().second \u003c\u003c '\\n'; a.pop(); } } è¿è¡Œç»“æœï¼š 2 5 1 3 1 2 è¯·æŒ‰ä»»æ„é”®ç»§ç»­. . . è‡ªå®šä¹‰pairæ¯”è¾ƒè§„åˆ™ å¯å‚è€ƒåšå®¢ï¼š å®šä¹‰æ¯”è¾ƒç±»ï¼Œé‡æ„operator() // ä¼˜å…ˆé˜Ÿåˆ—ä¸­ä½¿ç”¨ pair , è‡ªå®šä¹‰æ’åº #define pii pair\u003cint,int\u003e struct cmp { bool operator() (const pii p1,const pii p2) { // å¤§äºå·æ˜¯å°é¡¶å †ï¼Œå°äºå·æ˜¯å¤§é¡¶å † return p1.first \u003e p2.first; // first å°çš„å…ˆå¼¹å‡º } }; priority_queue\u003cpii,vector\u003cpii\u003e,cmp\u003e Q; å®šä¹‰æ¯”è¾ƒå‡½æ•° // ç¼–å†™æ¯”è¾ƒè§„åˆ™cmpï¼Œè¦æ±‚x.first/x.second \u003c y.first/y.second // âš ï¸ï¼šè¿™é‡Œæ¯”è¾ƒè§„åˆ™ä¸å®é™…ç¼–å†™çš„æ˜¯åå‘çš„ auto cmp = [\u0026](const pair\u003cint, int\u003e\u0026 x, const pair\u003cint, int\u003e\u0026 y) { return arr[x.first] * arr[y.second] \u003e arr[x.second] * arr[y.first]; }; priority_queue\u003cpair\u003cint, int\u003e, vector\u003cpair\u003cint, int\u003e\u003e, decltype(cmp)\u003e q(cmp); ","date":"2022-06-11","objectID":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/:3:2","tags":["C/C++"],"title":"ä¼˜å…ˆé˜Ÿåˆ—","uri":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"},{"categories":["C/C++"],"content":"ç”¨è‡ªå®šä¹‰ç±»å‹åšä¼˜å…ˆé˜Ÿåˆ—å…ƒç´ çš„ä¾‹å­ #include \u003ciostream\u003e #include \u003cqueue\u003e using namespace std; //æ–¹æ³•1 struct tmp1 //è¿ç®—ç¬¦é‡è½½\u003c { int x; tmp1(int a) {x = a;} bool operator\u003c(const tmp1\u0026 a) const { return x \u003c a.x; //å¤§é¡¶å † } }; //æ–¹æ³•2 struct tmp2 //é‡å†™ä»¿å‡½æ•° { bool operator() (tmp1 a, tmp1 b) { return a.x \u003c b.x; //å¤§é¡¶å † } }; int main() { tmp1 a(1); tmp1 b(2); tmp1 c(3); priority_queue\u003ctmp1\u003e d; d.push(b); d.push(c); d.push(a); while (!d.empty()) { cout \u003c\u003c d.top().x \u003c\u003c '\\n'; d.pop(); } cout \u003c\u003c endl; priority_queue\u003ctmp1, vector\u003ctmp1\u003e, tmp2\u003e f; f.push(b); f.push(c); f.push(a); while (!f.empty()) { cout \u003c\u003c f.top().x \u003c\u003c '\\n'; f.pop(); } } è¿è¡Œç»“æœï¼š 3 2 1 3 2 1 è¯·æŒ‰ä»»æ„é”®ç»§ç»­. . . ","date":"2022-06-11","objectID":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/:3:3","tags":["C/C++"],"title":"ä¼˜å…ˆé˜Ÿåˆ—","uri":"/posts/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/"},{"categories":["C/C++"],"content":" å¤„ç†åˆ¤æ–­å­—ç¬¦ç±» isalphaï¼šåˆ¤æ–­å­—ç¬¦æ˜¯å¦ä¸ºå­—æ¯ è¿”å›å€¼ï¼šæ˜¯å­—æ¯è¿”å›éé›¶ï¼Œä¸æ˜¯å­—æ¯è¿”å›é›¶ ä½¿ç”¨ cout\u003c\u003cisalpha('a'); //è¿”å›éé›¶ cout\u003c\u003cisalpha('2'); //è¿”å›0 isalnumï¼šåˆ¤æ–­æ˜¯å¦ä¸ºå­—æ¯æˆ–æ•°å­— cout\u003c\u003cisalnum('a'); //è¾“å‡ºéé›¶ cout\u003c\u003cisalnum('2'); // éé›¶ cout\u003c\u003cisalnum('.'); // é›¶ islowerï¼šåˆ¤æ–­æ˜¯å¦æ˜¯å°å†™å­—æ¯ cout\u003c\u003cislower('a'); //éé›¶ cout\u003c\u003cislower('2'); //è¾“å‡º0 cout\u003c\u003cislower('A'); //è¾“å‡º0 isupperï¼šåˆ¤æ–­æ˜¯å¦æ˜¯å¤§å†™å­—æ¯ cout\u003c\u003cisupper('a'); //è¿”å›0 cout\u003c\u003cisupper('2'); //è¿”å›0 cout\u003c\u003cisupper('A'); //è¿”å›éé›¶ tolowerï¼šæŠŠå­—ç¬¦è½¬åŒ–ä¸ºå°å†™ string str= \"THIS IS A STRING\"; for (int i=0; i \u003cstr.size(); i++) str[i] = tolower(str[i]); toupperï¼šæŠŠå­—ç¬¦è½¬åŒ–ä¸ºå¤§å†™ string str= \"hahahahaha\"; for (int i=0; i \u003cstr.size(); i++) str[i] = toupper(str[i]); ","date":"2022-06-11","objectID":"/posts/%E5%B8%B8%E7%94%A8c++%E5%87%BD%E6%95%B0/:0:0","tags":["C/C++"],"title":"å¸¸ç”¨C++å‡½æ•°","uri":"/posts/%E5%B8%B8%E7%94%A8c++%E5%87%BD%E6%95%B0/"},{"categories":["C/C++"],"content":"å¸¸ç”¨Cå‡½æ•° ","date":"2022-06-10","objectID":"/posts/%E5%B8%B8%E7%94%A8c%E5%87%BD%E6%95%B0/:0:0","tags":["C/C++"],"title":"å¸¸ç”¨Cå‡½æ•°","uri":"/posts/%E5%B8%B8%E7%94%A8c%E5%87%BD%E6%95%B0/"},{"categories":["C/C++"],"content":"æ–‡ä»¶ç±»å‡½æ•°ï¼š fopenhå‡½æ•°ï¼ˆæ‰“å¼€æ–‡ä»¶ï¼‰ æè¿°ï¼šC åº“å‡½æ•° FILE *fopen(const char filename, const char mode)ä½¿ç”¨ç»™å®šçš„æ¨¡å¼ mode æ‰“å¼€ filename æ‰€æŒ‡å‘çš„æ–‡ä»¶ã€‚ å£°æ˜ï¼šFILE *fopen(const char *filename, const char *mode) å‚æ•° filename â€“ è¿™æ˜¯ C å­—ç¬¦ä¸²ï¼ŒåŒ…å«äº†è¦æ‰“å¼€çš„æ–‡ä»¶åç§°ã€‚ mode â€“ è¿™æ˜¯ C å­—ç¬¦ä¸²ï¼ŒåŒ…å«äº†æ–‡ä»¶è®¿é—®æ¨¡å¼ï¼Œæ¨¡å¼å¦‚ä¸‹ æ¨¡å¼ï¼š â€œrâ€ æ‰“å¼€ä¸€ä¸ªç”¨äºè¯»å–çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å¿…é¡»å­˜åœ¨ã€‚ â€œwâ€ åˆ›å»ºä¸€ä¸ªç”¨äºå†™å…¥çš„ç©ºæ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶åç§°ä¸å·²å­˜åœ¨çš„æ–‡ä»¶ç›¸åŒï¼Œåˆ™ä¼šåˆ é™¤å·²æœ‰æ–‡ä»¶çš„å†…å®¹ï¼Œæ–‡ä»¶è¢«è§†ä¸ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶ã€‚ â€œaâ€ è¿½åŠ åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚å†™æ“ä½œå‘æ–‡ä»¶æœ«å°¾è¿½åŠ æ•°æ®ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶ã€‚ â€œr+â€ æ‰“å¼€ä¸€ä¸ªç”¨äºæ›´æ–°çš„æ–‡ä»¶ï¼Œå¯è¯»å–ä¹Ÿå¯å†™å…¥ã€‚è¯¥æ–‡ä»¶å¿…é¡»å­˜åœ¨ã€‚ â€œw+â€ åˆ›å»ºä¸€ä¸ªç”¨äºè¯»å†™çš„ç©ºæ–‡ä»¶ã€‚ â€œa+â€ æ‰“å¼€ä¸€ä¸ªç”¨äºè¯»å–å’Œè¿½åŠ çš„æ–‡ä»¶ã€‚ è¿”å›å€¼ï¼šè¯¥å‡½æ•°è¿”å›ä¸€ä¸ª FILE æŒ‡é’ˆã€‚å¦åˆ™è¿”å› NULLï¼Œä¸”è®¾ç½®å…¨å±€å˜é‡ errno æ¥æ ‡è¯†é”™è¯¯ã€‚ statå‡½æ•°ï¼ˆæ£€æŸ¥æ–‡ä»¶å±æ€§ï¼‰ å¤´æ–‡ä»¶ï¼š#include\u003csys/stat.h\u003e ã€#include\u003cuninstd.h\u003e å£°æ˜ï¼šint stat(const char * file_name, struct stat *buf); æè¿°ï¼šstat()ç”¨æ¥å°†å‚æ•°file_name æ‰€æŒ‡çš„æ–‡ä»¶çŠ¶æ€, å¤åˆ¶åˆ°å‚æ•°buf æ‰€æŒ‡çš„ç»“æ„ä¸­ statç»“æ„ä½“è¯´æ˜ï¼š struct stat { dev_t st_dev; //device æ–‡ä»¶çš„è®¾å¤‡ç¼–å· ino_t st_ino; //inode æ–‡ä»¶çš„i-node mode_t st_mode; //protection æ–‡ä»¶çš„ç±»å‹å’Œå­˜å–çš„æƒé™ nlink_t st_nlink; //number of hard links è¿åˆ°è¯¥æ–‡ä»¶çš„ç¡¬è¿æ¥æ•°ç›®, åˆšå»ºç«‹çš„æ–‡ä»¶å€¼ä¸º1. uid_t st_uid; //user ID of owner æ–‡ä»¶æ‰€æœ‰è€…çš„ç”¨æˆ·è¯†åˆ«ç  gid_t st_gid; //group ID of owner æ–‡ä»¶æ‰€æœ‰è€…çš„ç»„è¯†åˆ«ç  dev_t st_rdev; //device type è‹¥æ­¤æ–‡ä»¶ä¸ºè£…ç½®è®¾å¤‡æ–‡ä»¶, åˆ™ä¸ºå…¶è®¾å¤‡ç¼–å· off_t st_size; //total size, in bytes æ–‡ä»¶å¤§å°, ä»¥å­—èŠ‚è®¡ç®— unsigned long st_blksize; //blocksize for filesystem I/O æ–‡ä»¶ç³»ç»Ÿçš„I/O ç¼“å†²åŒºå¤§å°. unsigned long st_blocks; //number of blocks allocated å ç”¨æ–‡ä»¶åŒºå—çš„ä¸ªæ•°, æ¯ä¸€åŒºå—å¤§å°ä¸º512 ä¸ªå­—èŠ‚. time_t st_atime; //time of lastaccess æ–‡ä»¶æœ€è¿‘ä¸€æ¬¡è¢«å­˜å–æˆ–è¢«æ‰§è¡Œçš„æ—¶é—´, ä¸€èˆ¬åªæœ‰åœ¨ç”¨mknodã€ utimeã€readã€write ä¸tructate æ—¶æ”¹å˜. time_t st_mtime; //time of last modification æ–‡ä»¶æœ€åä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¶é—´, ä¸€èˆ¬åªæœ‰åœ¨ç”¨mknodã€utime å’Œwriteæ—¶æ‰ä¼šæ”¹å˜ time_t st_ctime; //time of last change i-node æœ€è¿‘ä¸€æ¬¡è¢«æ›´æ”¹çš„æ—¶é—´, æ­¤å‚æ•°ä¼šåœ¨æ–‡ä»¶æ‰€æœ‰è€…ã€ç»„ã€æƒé™è¢«æ›´æ”¹æ—¶æ›´æ–° }; statç»“æ„ä½“ä¸­çš„st_modeç§ç±»ï¼š S_IFMT 0170000 æ–‡ä»¶ç±»å‹çš„ä½é®ç½© S_IFSOCK 0140000 scoket S_IFLNK 0120000 ç¬¦å·è¿æ¥ S_IFREG 0100000 ä¸€èˆ¬æ–‡ä»¶ S_IFBLK 0060000 åŒºå—è£…ç½® S_IFDIR 0040000 ç›®å½• S_IFCHR 0020000 å­—ç¬¦è£…ç½® S_IFIFO 0010000 å…ˆè¿›å…ˆå‡º S_ISUID 04000 æ–‡ä»¶çš„ (set user-id on execution)ä½ S_ISGID 02000 æ–‡ä»¶çš„ (set group-id on execution)ä½ S_ISVTX 01000 æ–‡ä»¶çš„sticky ä½ S_IRUSR (S_IREAD) 00400 æ–‡ä»¶æ‰€æœ‰è€…å…·å¯è¯»å–æƒé™ S_IWUSR (S_IWRITE)00200 æ–‡ä»¶æ‰€æœ‰è€…å…·å¯å†™å…¥æƒé™ S_IXUSR (S_IEXEC) 00100 æ–‡ä»¶æ‰€æœ‰è€…å…·å¯æ‰§è¡Œæƒé™ S_IRGRP 00040 ç”¨æˆ·ç»„å…·å¯è¯»å–æƒé™ S_IWGRP 00020 ç”¨æˆ·ç»„å…·å¯å†™å…¥æƒé™ S_IXGRP 00010 ç”¨æˆ·ç»„å…·å¯æ‰§è¡Œæƒé™ S_IROTH 00004 å…¶ä»–ç”¨æˆ·å…·å¯è¯»å–æƒé™ S_IWOTH 00002 å…¶ä»–ç”¨æˆ·å…·å¯å†™å…¥æƒé™ S_IXOTH 00001 å…¶ä»–ç”¨æˆ·å…·å¯æ‰§è¡Œæƒé™ä¸Šè¿°çš„æ–‡ä»¶ç±»å‹åœ¨ POSIX ä¸­å®šä¹‰äº†æ£€æŸ¥è¿™äº›ç±»å‹çš„å®å®šä¹‰ S_ISLNK (st_mode) åˆ¤æ–­æ˜¯å¦ä¸ºç¬¦å·è¿æ¥ S_ISREG (st_mode) æ˜¯å¦ä¸ºä¸€èˆ¬æ–‡ä»¶ S_ISDIR (st_mode) æ˜¯å¦ä¸ºç›®å½• S_ISCHR (st_mode) æ˜¯å¦ä¸ºå­—ç¬¦è£…ç½®æ–‡ä»¶ S_ISBLK (s3e) æ˜¯å¦ä¸ºå…ˆè¿›å…ˆå‡º S_ISSOCK (st_mode) æ˜¯å¦ä¸ºsocket è‹¥ä¸€ç›®å½•å…·æœ‰sticky ä½ (S_ISVTX), åˆ™è¡¨ç¤ºåœ¨æ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶åªèƒ½ è¢«è¯¥æ–‡ä»¶æ‰€æœ‰è€…ã€æ­¤ç›®å½•æ‰€æœ‰è€…æˆ–root æ¥åˆ é™¤æˆ–æ”¹å. è¿”å›å€¼ï¼šæ‰§è¡ŒæˆåŠŸåˆ™è¿”å›0ï¼Œå¤±è´¥è¿”å›-1ï¼Œé”™è¯¯ä»£ç å­˜äºerrno ","date":"2022-06-10","objectID":"/posts/%E5%B8%B8%E7%94%A8c%E5%87%BD%E6%95%B0/:0:1","tags":["C/C++"],"title":"å¸¸ç”¨Cå‡½æ•°","uri":"/posts/%E5%B8%B8%E7%94%A8c%E5%87%BD%E6%95%B0/"},{"categories":["C/C++"],"content":"å­—ç¬¦ä¸²ç±»å‡½æ•°ï¼š strspnå‡½æ•°ï¼ˆæ£€ç´¢ç¬¬ä¸€ä¸ªä¸åœ¨èŒƒå›´å†…çš„å­—ç¬¦ï¼‰ æè¿°ï¼šæ£€ç´¢å­—ç¬¦ä¸² str1 ä¸­ç¬¬ä¸€ä¸ªä¸åœ¨å­—ç¬¦ä¸² str2 ä¸­å‡ºç°çš„å­—ç¬¦ä¸‹æ ‡ å£°æ˜ï¼šsize_t strspn(const char *str1, const char *str2) å‚æ•°ï¼š str1 â€“ è¦è¢«æ£€ç´¢çš„ C å­—ç¬¦ä¸² str2 â€“ è¯¥å­—ç¬¦ä¸²åŒ…å«äº†è¦åœ¨ str1 ä¸­è¿›è¡ŒåŒ¹é…çš„å­—ç¬¦åˆ—è¡¨ è¿”å›å€¼ï¼šè¿”å› str1 ä¸­ç¬¬ä¸€ä¸ªä¸åœ¨å­—ç¬¦ä¸² str2 ä¸­å‡ºç°çš„å­—ç¬¦ä¸‹æ ‡ strcasecmpå‡½æ•°ï¼ˆå¿½ç•¥å¤§å°å†™æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼‰ å¤´æ–‡ä»¶ï¼š#include \u003cstrings.h\u003e æè¿°ï¼šå¿½ç•¥å¤§å°æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒ å£°æ˜ï¼š int strcasecmp (const char *s1, const char *s2); è¿”å›å€¼ï¼šè‹¥å‚æ•°s1å’Œs2å­—ç¬¦ä¸²ç›¸ç­‰åˆ™è¿”å›0ã€‚s1å¤§äºs2åˆ™è¿”å›å¤§äº0 çš„å€¼ï¼Œs1 å°äºs2 åˆ™è¿”å›å°äº0çš„å€¼ strcmpå‡½æ•°ï¼ˆæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²) æè¿°ï¼šæŠŠ str1 æ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²å’Œ str2 æ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒ å£°æ˜ï¼šint strcmp(const char *str1, const char *str2) strncmpå‡½æ•°ï¼ˆæ¯”è¾ƒé™å®šå­—èŠ‚æ•°çš„ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼‰ æè¿°ï¼šæŠŠ str1 å’Œ str2 è¿›è¡Œæ¯”è¾ƒï¼Œæœ€å¤šæ¯”è¾ƒå‰ n ä¸ªå­—èŠ‚ï¼ˆæ¢è¨€ä¹‹å…¶å®æ¯”è¾ƒçš„é•¿åº¦æ˜¯min(n, strlen(str2))) å£°æ˜ï¼šint strncmp(const char *str1, const char *str2, size_t n) å‚æ•°ï¼š str1 â€“ è¦è¿›è¡Œæ¯”è¾ƒçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ str2 â€“ è¦è¿›è¡Œæ¯”è¾ƒçš„ç¬¬äºŒä¸ªå­—ç¬¦ä¸²ã€‚ n â€“ è¦æ¯”è¾ƒçš„æœ€å¤§å­—ç¬¦æ•°ã€‚ è¿”å›å€¼ï¼š å¦‚æœè¿”å›å€¼ \u003c 0ï¼Œåˆ™è¡¨ç¤º str1 å°äº str2ã€‚ å¦‚æœè¿”å›å€¼ \u003e 0ï¼Œåˆ™è¡¨ç¤º str1 å¤§äº str2ã€‚ å¦‚æœè¿”å›å€¼ = 0ï¼Œåˆ™è¡¨ç¤º str1 ç­‰äº str2ã€‚ ","date":"2022-06-10","objectID":"/posts/%E5%B8%B8%E7%94%A8c%E5%87%BD%E6%95%B0/:0:2","tags":["C/C++"],"title":"å¸¸ç”¨Cå‡½æ•°","uri":"/posts/%E5%B8%B8%E7%94%A8c%E5%87%BD%E6%95%B0/"},{"categories":["C/C++"],"content":"æ—¶é—´ç±»å‡½æ•°ï¼š gettimeofdayå‡½æ•°ï¼ˆè·å–å½“å‰æ—¶é—´ï¼‰ æè¿°ï¼šåœ¨Cè¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨å‡½æ•°gettimeofday()å‡½æ•°æ¥å¾—åˆ°æ—¶é—´ï¼Œå®ƒçš„ç²¾åº¦å¯ä»¥è¾¾åˆ°å¾®ç§’ã€‚å®ƒæŠŠç›®å‰çš„æ—¶é—´ç”¨tv ç»“æ„ä½“è¿”å›ï¼Œå½“åœ°æ—¶åŒºçš„ä¿¡æ¯åˆ™æ”¾åˆ°tzæ‰€æŒ‡çš„ç»“æ„ä¸­ å£°æ˜ï¼šint gettimeofday(struct timeval*tv,struct timezone *tz) ç»“æ„ä½“è¯´æ˜ struct timeval{ long tv_sec;/*ç§’*/ long tv_usec;/*å¾®å¦™*/ }ï¼› struct timezone{ int tz_minuteswest;/*å’Œgreenwich æ—¶é—´å·®äº†å¤šå°‘åˆ†é’Ÿ*/ int tz_dsttime;/*type of DST correction*/ } å‚æ•°ï¼š åœ¨gettimeofday()å‡½æ•°ä¸­tvæˆ–è€…tzéƒ½å¯ä»¥ä¸ºç©ºã€‚å¦‚æœä¸ºç©ºåˆ™å°±ä¸è¿”å›å…¶å¯¹åº”çš„ç»“æ„ä½“ è¿”å›å€¼ï¼šå‡½æ•°æ‰§è¡ŒæˆåŠŸåè¿”å›0ï¼Œå¤±è´¥åè¿”å›-1ï¼Œé”™è¯¯ä»£ç å­˜äºerrnoä¸­ ","date":"2022-06-10","objectID":"/posts/%E5%B8%B8%E7%94%A8c%E5%87%BD%E6%95%B0/:0:3","tags":["C/C++"],"title":"å¸¸ç”¨Cå‡½æ•°","uri":"/posts/%E5%B8%B8%E7%94%A8c%E5%87%BD%E6%95%B0/"},{"categories":["æ‚è°ˆ"],"content":"ç¬¬ä¸€ç¯‡åšå®¢ ","date":"2022-06-10","objectID":"/posts/first_post/:0:0","tags":["æ‚è°ˆ"],"title":"First_post","uri":"/posts/first_post/"},{"categories":["æ‚è°ˆ"],"content":"1.1ç®€å•ä»‹ç» è¿™é‡Œæ˜¯ä¸€æšåŠ±å¿—æˆä¸ºä¸€åä¼˜ç§€çš„åç«¯å¼€å‘å·¥ç¨‹å¸ˆçš„åŒå­¦ æœªæ¥ä¼šé€æ­¥å°†è‡ªå·±ä»¥å‰å†™çš„åšå®¢è¿ç§»è¿‡æ¥ ","date":"2022-06-10","objectID":"/posts/first_post/:0:1","tags":["æ‚è°ˆ"],"title":"First_post","uri":"/posts/first_post/"}]